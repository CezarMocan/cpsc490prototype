function BestInPlaceEditor(t){this.element=t,this.initOptions(),this.bindForm(),this.initNil(),jQuery(this.activator).bind("click",{editor:this},this.clickHandler)}/*
LazyLoad makes it easy and painless to lazily load one or more external
JavaScript or CSS files on demand either during or after the rendering of a web
page.

Supported browsers include Firefox 2+, IE6+, Safari 3+ (including Mobile
Safari), Google Chrome, and Opera 9+. Other browsers may or may not work and
are not officially supported.

Visit https://github.com/rgrove/lazyload/ for more info.

Copyright (c) 2011 Ryan Grove <ryan@wonko.com>
All rights reserved.

Permission is hereby granted, free of charge, to any person obtaining a copy of
this software and associated documentation files (the 'Software'), to deal in
the Software without restriction, including without limitation the rights to
use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
the Software, and to permit persons to whom the Software is furnished to do so,
subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

@module lazyload
@class LazyLoad
@static
@version 2.0.3 (git)
*/
function getEmbedScriptPath(t){for(var e=document.getElementsByTagName("script"),i="",n="",s=0;s<e.length;s++)e[s].src.match(t)&&(i=e[s].src);return""!=i&&(n="/"),i.split("?")[0].split("/").slice(0,-1).join("/")+n}function createStoryJS(t,e){function i(){LoadLib.js(w.js,n)}function n(){_.js=!0,"en"!=w.lang?LazyLoad.js(b.locale,s):_.language=!0,l()}function s(){_.language=!0,l()}function o(){_.css=!0,l()}function a(){_.font.css=!0,l()}function r(){_.font.js=!0,l()}function l(){_.checks>40||(_.checks++,_.js&&_.css&&_.font.css&&_.font.js&&_.language?_.finished||(_.finished=!0,c()):_.timeout=setTimeout("onloaded_check_again();",250))}function h(){var t="storyjs-embed";d=document.createElement("div"),p=""!=w.embed_id?document.getElementById(w.embed_id):document.getElementById("timeline-embed"),p.appendChild(d),d.setAttribute("id",w.id),w.width.toString().match("%")?p.style.width=w.width.split("%")[0]+"%":(w.width=w.width-2,p.style.width=w.width+"px"),w.height.toString().match("%")?(p.style.height=w.height,t+=" full-embed",p.style.height=w.height.split("%")[0]+"%"):(t+=" sized-embed",w.height=w.height-16,p.style.height=w.height+"px"),p.setAttribute("class",t),p.setAttribute("className",t),d.style.position="relative"}function c(){VMM.debug=w.debug,u=new VMM.Timeline(w.id),u.init(w),m&&VMM.bindEvent(global,onHeadline,"HEADLINE")}var u,d,p,f,m=!1,g="2.17",v="1.7.1",y="",_={timeout:"",checks:0,finished:!1,js:!1,css:!1,jquery:!1,has_jquery:!1,language:!1,font:{css:!1,js:!1}},b={base:embed_path,css:embed_path+"css/",js:embed_path+"js/",locale:embed_path+"js/locale/",jquery:"http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js",font:{google:!1,css:embed_path+"css/themes/font/",js:"http://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js"}},w={version:g,debug:!1,type:"timeline",id:"storyjs",embed_id:"timeline-embed",embed:!0,width:"100%",height:"100%",source:"https://docs.google.com/spreadsheet/pub?key=0Agl_Dv6iEbDadFYzRjJPUGktY0NkWXFUWkVIZDNGRHc&output=html",lang:"en",font:"default",css:b.css+"timeline.css?"+g,js:b.js+"timeline-min.js?"+g,api_keys:{google:"",flickr:"",twitter:""},gmap_key:""},x=[{name:"Merriweather-NewsCycle",google:["News+Cycle:400,700:latin","Merriweather:400,700,900:latin"]},{name:"NewsCycle-Merriweather",google:["News+Cycle:400,700:latin","Merriweather:300,400,700:latin"]},{name:"PoiretOne-Molengo",google:["Poiret+One::latin","Molengo::latin"]},{name:"Arvo-PTSans",google:["Arvo:400,700,400italic:latin","PT+Sans:400,700,400italic:latin"]},{name:"PTSerif-PTSans",google:["PT+Sans:400,700,400italic:latin","PT+Serif:400,700,400italic:latin"]},{name:"PT",google:["PT+Sans+Narrow:400,700:latin","PT+Sans:400,700,400italic:latin","PT+Serif:400,700,400italic:latin"]},{name:"DroidSerif-DroidSans",google:["Droid+Sans:400,700:latin","Droid+Serif:400,700,400italic:latin"]},{name:"Lekton-Molengo",google:["Lekton:400,700,400italic:latin","Molengo::latin"]},{name:"NixieOne-Ledger",google:["Nixie+One::latin","Ledger::latin"]},{name:"AbrilFatface-Average",google:["Average::latin","Abril+Fatface::latin"]},{name:"PlayfairDisplay-Muli",google:["Playfair+Display:400,400italic:latin","Muli:300,400,300italic,400italic:latin"]},{name:"Rancho-Gudea",google:["Rancho::latin","Gudea:400,700,400italic:latin"]},{name:"Bevan-PotanoSans",google:["Bevan::latin","Pontano+Sans::latin"]},{name:"BreeSerif-OpenSans",google:["Bree+Serif::latin","Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800:latin"]},{name:"SansitaOne-Kameron",google:["Sansita+One::latin","Kameron:400,700:latin"]},{name:"Lora-Istok",google:["Lora:400,700,400italic,700italic:latin","Istok+Web:400,700,400italic,700italic:latin"]},{name:"Pacifico-Arimo",google:["Pacifico::latin","Arimo:400,700,400italic,700italic:latin"]}];if("object"==typeof t)for(f in t)Object.prototype.hasOwnProperty.call(t,f)&&(w[f]=t[f]);if("undefined"!=typeof e&&(w.source=e),"object"==typeof url_config&&(m=!0,w.source.match("docs.google.com")||w.source.match("json")||w.source.match("storify")||(w.source="https://docs.google.com/spreadsheet/pub?key="+w.source+"&output=html")),w.js.match("locale")&&(w.lang=w.js.split("locale/")[1].replace(".js",""),w.js=b.js+"timeline-min.js?"+g),w.js.match("/")||(w.css=b.css+w.type+".css?"+g,w.js=b.js+w.type+"-min.js?"+g,w.id="storyjs-"+w.type),b.locale=w.lang.match("/")?w.lang:b.locale+w.lang+".js?"+g,h(),LoadLib.css(w.css,o),"default"==w.font)_.font.js=!0,_.font.css=!0;else{var k;w.font.match("/")?(k=w.font.split(".css")[0].split("/"),b.font.name=k[k.length-1],b.font.css=w.font):(b.font.name=w.font,b.font.css=b.font.css+w.font+".css?"+g),LoadLib.css(b.font.css,a);for(var T=0;T<x.length;T++)b.font.name==x[T].name&&(b.font.google=!0,WebFontConfig={google:{families:x[T].google}});b.font.google?LoadLib.js(b.font.js,r):_.font.js=!0}try{if(_.has_jquery=jQuery,_.has_jquery=!0,_.has_jquery){var y=parseFloat(jQuery.fn.jquery);_.jquery=y<parseFloat(v)?!1:!0}}catch(S){_.jquery=!1}_.jquery?i():LoadLib.js(b.jquery,i),this.onloaded_check_again=function(){l()}}!function(t,e){var i=function(){var e=t._data(document,"events");return e&&e.click&&t.grep(e.click,function(t){return"rails"===t.namespace}).length};i()&&t.error("jquery-ujs has already been loaded!");var n;t.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(e){var i=t('meta[name="csrf-token"]').attr("content");i&&e.setRequestHeader("X-CSRF-Token",i)},fire:function(e,i,n){var s=t.Event(i);return e.trigger(s,n),s.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t.attr("href")},handleRemote:function(i){var s,o,a,r,l,h,c,u;if(n.fire(i,"ajax:before")){if(r=i.data("cross-domain"),l=r===e?null:r,h=i.data("with-credentials")||null,c=i.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,i.is("form")){s=i.attr("method"),o=i.attr("action"),a=i.serializeArray();var d=i.data("ujs:submit-button");d&&(a.push(d),i.data("ujs:submit-button",null))}else i.is(n.inputChangeSelector)?(s=i.data("method"),o=i.data("url"),a=i.serialize(),i.data("params")&&(a=a+"&"+i.data("params"))):(s=i.data("method"),o=n.href(i),a=i.data("params")||null);u={type:s||"GET",data:a,dataType:c,beforeSend:function(t,s){return s.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+s.accepts.script),n.fire(i,"ajax:beforeSend",[t,s])},success:function(t,e,n){i.trigger("ajax:success",[t,e,n])},complete:function(t,e){i.trigger("ajax:complete",[t,e])},error:function(t,e,n){i.trigger("ajax:error",[t,e,n])},xhrFields:{withCredentials:h},crossDomain:l},o&&(u.url=o);var p=n.ajax(u);return i.trigger("ajax:send",p),p}return!1},handleMethod:function(i){var s=n.href(i),o=i.data("method"),a=i.attr("target"),r=t("meta[name=csrf-token]").attr("content"),l=t("meta[name=csrf-param]").attr("content"),h=t('<form method="post" action="'+s+'"></form>'),c='<input name="_method" value="'+o+'" type="hidden" />';l!==e&&r!==e&&(c+='<input name="'+l+'" value="'+r+'" type="hidden" />'),a&&h.attr("target",a),h.hide().append(c).appendTo("body"),h.submit()},disableFormElements:function(e){e.find(n.disableSelector).each(function(){var e=t(this),i=e.is("button")?"html":"val";e.data("ujs:enable-with",e[i]()),e[i](e.data("disable-with")),e.prop("disabled",!0)})},enableFormElements:function(e){e.find(n.enableSelector).each(function(){var e=t(this),i=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[i](e.data("ujs:enable-with")),e.prop("disabled",!1)})},allowAction:function(t){var e,i=t.data("confirm"),s=!1;return i?(n.fire(t,"confirm")&&(s=n.confirm(i),e=n.fire(t,"confirm:complete",[s])),s&&e):!0},blankInputs:function(e,i,n){var s,o,a=t(),r=i||"input,textarea",l=e.find(r);return l.each(function(){if(s=t(this),o=s.is(":checkbox,:radio")?s.is(":checked"):s.val(),!o==!n){if(s.is(":radio")&&l.filter('input:radio:checked[name="'+s.attr("name")+'"]').length)return!0;a=a.add(s)}}),a.length?a:!1},nonBlankInputs:function(t,e){return n.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},callFormSubmitBindings:function(i,n){var s=i.data("events"),o=!0;return s!==e&&s.submit!==e&&t.each(s.submit,function(t,e){return"function"==typeof e.handler?o=e.handler(n):void 0}),o},disableElement:function(t){t.data("ujs:enable-with",t.html()),t.html(t.data("disable-with")),t.bind("click.railsDisable",function(t){return n.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.data("ujs:enable-with",!1)),t.unbind("click.railsDisable")}},n.fire(t(document),"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,i){t.crossDomain||n.CSRFProtection(i)}),t(document).delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(t(this))}),t(document).delegate(n.linkClickSelector,"click.rails",function(i){var s=t(this),o=s.data("method"),a=s.data("params");if(!n.allowAction(s))return n.stopEverything(i);if(s.is(n.linkDisableSelector)&&n.disableElement(s),s.data("remote")!==e){if(!(!i.metaKey&&!i.ctrlKey||o&&"GET"!==o||a))return!0;var r=n.handleRemote(s);return r===!1?n.enableElement(s):r.error(function(){n.enableElement(s)}),!1}return s.data("method")?(n.handleMethod(s),!1):void 0}),t(document).delegate(n.inputChangeSelector,"change.rails",function(e){var i=t(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(e)}),t(document).delegate(n.formSubmitSelector,"submit.rails",function(i){var s=t(this),o=s.data("remote")!==e,a=n.blankInputs(s,n.requiredInputSelector),r=n.nonBlankInputs(s,n.fileInputSelector);if(!n.allowAction(s))return n.stopEverything(i);if(a&&s.attr("novalidate")==e&&n.fire(s,"ajax:aborted:required",[a]))return n.stopEverything(i);if(o){if(r){setTimeout(function(){n.disableFormElements(s)},13);var l=n.fire(s,"ajax:aborted:file",[r]);return l||setTimeout(function(){n.enableFormElements(s)},13),l}return!t.support.submitBubbles&&t().jquery<"1.7"&&n.callFormSubmitBindings(s,i)===!1?n.stopEverything(i):(n.handleRemote(s),!1)}setTimeout(function(){n.disableFormElements(s)},13)}),t(document).delegate(n.formInputClickSelector,"click.rails",function(e){var i=t(this);if(!n.allowAction(i))return n.stopEverything(e);var s=i.attr("name"),o=s?{name:s,value:i.val()}:null;i.closest("form").data("ujs:submit-button",o)}),t(document).delegate(n.formSubmitSelector,"ajax:beforeSend.rails",function(e){this==e.target&&n.disableFormElements(t(this))}),t(document).delegate(n.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&n.enableFormElements(t(this))}),t(function(){csrf_token=t("meta[name=csrf-token]").attr("content"),csrf_param=t("meta[name=csrf-param]").attr("content"),t('form input[name="'+csrf_param+'"]').val(csrf_token)}))}(jQuery),/*!
 * jQuery Cookie Plugin v1.2
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2011, Klaus Hartl
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 */
function(t,e,i){function n(t){return t}function s(t){return decodeURIComponent(t.replace(o," "))}var o=/\+/g,a=t.cookie=function(o,r,l){if(r!==i){if(l=t.extend({},a.defaults,l),null===r&&(l.expires=-1),"number"==typeof l.expires){var h=l.expires,c=l.expires=new Date;c.setDate(c.getDate()+h)}return r=a.json?JSON.stringify(r):String(r),e.cookie=[encodeURIComponent(o),"=",a.raw?r:encodeURIComponent(r),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var u,d=a.raw?n:s,p=e.cookie.split("; "),f=0;u=p[f]&&p[f].split("=");f++)if(d(u.shift())===o){var m=d(u.join("="));return a.json?JSON.parse(m):m}return null};a.defaults={},t.removeCookie=function(e,i){return null!==t.cookie(e)?(t.cookie(e,null,i),!0):!1}}(jQuery,document),/*! jQuery UI - v1.10.0 - 2013-01-30
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.datepicker.js, jquery.ui.menu.js
* Copyright (c) 2013 jQuery Foundation and other contributors Licensed MIT */
function(t,e){function i(e,i){var s,o,a,r=e.nodeName.toLowerCase();return"area"===r?(s=e.parentNode,o=s.name,e.href&&o&&"map"===s.nodeName.toLowerCase()?(a=t("img[usemap=#"+o+"]")[0],!!a&&n(a)):!1):(/input|select|textarea|button|object/.test(r)?!e.disabled:"a"===r?e.href||i:i)&&n(e)}function n(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var s=0,o=/^ui-id-\d+$/;t.ui=t.ui||{},t.ui.version||(t.extend(t.ui,{version:"1.10.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({_focus:t.fn.focus,focus:function(e,i){return"number"==typeof e?this.each(function(){var n=this;setTimeout(function(){t(n).focus(),i&&i.call(n)},e)}):this._focus.apply(this,arguments)},scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(i){if(i!==e)return this.css("zIndex",i);if(this.length)for(var n,s,o=t(this[0]);o.length&&o[0]!==document;){if(n=o.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(s=parseInt(o.css("zIndex"),10),!isNaN(s)&&0!==s))return s;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++s)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])},focusable:function(e){return i(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var n=t.attr(e,"tabindex"),s=isNaN(n);return(s||n>=0)&&i(e,!s)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(i,n){function s(e,i,n,s){return t.each(o,function(){i-=parseFloat(t.css(e,"padding"+this))||0,n&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),s&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var o="Width"===n?["Left","Right"]:["Top","Bottom"],a=n.toLowerCase(),r={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+n]=function(i){return i===e?r["inner"+n].call(this):this.each(function(){t(this).css(a,s(this,i)+"px")})},t.fn["outer"+n]=function(e,i){return"number"!=typeof e?r["outer"+n].call(this,e):this.each(function(){t(this).css(a,s(this,e,!0,i)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,i,n){var s,o=t.ui[e].prototype;for(s in n)o.plugins[s]=o.plugins[s]||[],o.plugins[s].push([i,n[s]])},call:function(t,e,i){var n,s=t.plugins[e];if(s&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(n=0;n<s.length;n++)t.options[s[n][0]]&&s[n][1].apply(t.element,i)}},hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return e[n]>0?!0:(e[n]=1,s=e[n]>0,e[n]=0,s)}}))}(jQuery),function(t,e){var i=0,n=Array.prototype.slice,s=t.cleanData;t.cleanData=function(e){for(var i,n=0;null!=(i=e[n]);n++)try{t(i).triggerHandler("remove")}catch(o){}s(e)},t.widget=function(e,i,n){var s,o,a,r,l={},h=e.split(".")[0];e=e.split(".")[1],s=h+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][s.toLowerCase()]=function(e){return!!t.data(e,s)},t[h]=t[h]||{},o=t[h][e],a=t[h][e]=function(t,e){return this._createWidget?(arguments.length&&this._createWidget(t,e),void 0):new a(t,e)},t.extend(a,o,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),r=new i,r.options=t.widget.extend({},r.options),t.each(n,function(e,n){return t.isFunction(n)?(l[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},s=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=s,e=n.apply(this,arguments),this._super=i,this._superApply=o,e}}(),void 0):(l[e]=n,void 0)}),a.prototype=t.widget.extend(r,{widgetEventPrefix:o?r.widgetEventPrefix:e},l,{constructor:a,namespace:h,widgetName:e,widgetFullName:s}),o?(t.each(o._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,a,i._proto)}),delete o._childConstructors):i._childConstructors.push(a),t.widget.bridge(e,a)},t.widget.extend=function(i){for(var s,o,a=n.call(arguments,1),r=0,l=a.length;l>r;r++)for(s in a[r])o=a[r][s],a[r].hasOwnProperty(s)&&o!==e&&(i[s]=t.isPlainObject(o)?t.isPlainObject(i[s])?t.widget.extend({},i[s],o):t.widget.extend({},o):o);return i},t.widget.bridge=function(i,s){var o=s.prototype.widgetFullName||i;t.fn[i]=function(a){var r="string"==typeof a,l=n.call(arguments,1),h=this;return a=!r&&l.length?t.widget.extend.apply(null,[a].concat(l)):a,r?this.each(function(){var n,s=t.data(this,o);return s?t.isFunction(s[a])&&"_"!==a.charAt(0)?(n=s[a].apply(s,l),n!==s&&n!==e?(h=n&&n.jquery?h.pushStack(n.get()):n,!1):void 0):t.error("no such method '"+a+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; "+"attempted to call method '"+a+"'")}):this.each(function(){var e=t.data(this,o);e?e.option(a||{})._init():t.data(this,o,new s(a,this))}),h}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,n){var s,o,a,r=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(r={},s=i.split("."),i=s.shift(),s.length){for(o=r[i]=t.widget.extend({},this.options[i]),a=0;a<s.length-1;a++)o[s[a]]=o[s[a]]||{},o=o[s[a]];if(i=s.pop(),n===e)return o[i]===e?null:o[i];o[i]=n}else{if(n===e)return this.options[i]===e?null:this.options[i];r[i]=n}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,i,n){var s,o=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=s=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),t.each(n,function(n,a){function r(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||t.guid++);var l=n.match(/^(\w+)\s*(.*)$/),h=l[1]+o.eventNamespace,c=l[2];c?s.delegate(c,h,r):i.bind(h,r)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var s,o,a=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent,o)for(s in o)s in i||(i[s]=o[s]);return this.element.trigger(i,n),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,s,o){"string"==typeof s&&(s={effect:s});var a,r=s?s===!0||"number"==typeof s?i:s.effect||i:e;s=s||{},"number"==typeof s&&(s={duration:s}),a=!t.isEmptyObject(s),s.complete=o,s.delay&&n.delay(s.delay),a&&t.effects&&t.effects.effect[r]?n[e](s):r!==e&&n[r]?n[r](s.duration,s.easing,o):n.queue(function(i){t(this)[e](),o&&o.call(n[0]),i()})}})}(jQuery),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!e){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,s=1===i.which,o="string"==typeof this.options.cancel&&i.target.nodeName?t(i.target).closest(this.options.cancel).length:!1;return s&&!o&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t,e){function i(t,e,i){return[parseInt(t[0],10)*(p.test(t[0])?e/100:1),parseInt(t[1],10)*(p.test(t[1])?i/100:1)]}function n(e,i){return parseInt(t.css(e,i),10)||0}function s(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var o,a=Math.max,r=Math.abs,l=Math.round,h=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+%?/,d=/^\w+/,p=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(o!==e)return o;var i,n,s=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=s.children()[0];return t("body").append(s),i=a.offsetWidth,s.css("overflow","scroll"),n=a.offsetWidth,i===n&&(n=s[0].clientWidth),s.remove(),o=i-n},getScrollInfo:function(e){var i=e.isWindow?"":e.element.css("overflow-x"),n=e.isWindow?"":e.element.css("overflow-y"),s="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,o="scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight;return{width:s?t.position.scrollbarWidth():0,height:o?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),n=t.isWindow(i[0]);return{element:i,isWindow:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var o,p,m,g,v,y,_=t(e.of),b=t.position.getWithinInfo(e.within),w=t.position.getScrollInfo(b),x=(e.collision||"flip").split(" "),k={};return y=s(_),_[0].preventDefault&&(e.at="left top"),p=y.width,m=y.height,g=y.offset,v=t.extend({},g),t.each(["my","at"],function(){var t,i,n=(e[this]||"").split(" ");1===n.length&&(n=h.test(n[0])?n.concat(["center"]):c.test(n[0])?["center"].concat(n):["center","center"]),n[0]=h.test(n[0])?n[0]:"center",n[1]=c.test(n[1])?n[1]:"center",t=u.exec(n[0]),i=u.exec(n[1]),k[this]=[t?t[0]:0,i?i[0]:0],e[this]=[d.exec(n[0])[0],d.exec(n[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===e.at[0]?v.left+=p:"center"===e.at[0]&&(v.left+=p/2),"bottom"===e.at[1]?v.top+=m:"center"===e.at[1]&&(v.top+=m/2),o=i(k.at,p,m),v.left+=o[0],v.top+=o[1],this.each(function(){var s,h,c=t(this),u=c.outerWidth(),d=c.outerHeight(),f=n(this,"marginLeft"),y=n(this,"marginTop"),T=u+f+n(this,"marginRight")+w.width,S=d+y+n(this,"marginBottom")+w.height,C=t.extend({},v),D=i(k.my,c.outerWidth(),c.outerHeight());"right"===e.my[0]?C.left-=u:"center"===e.my[0]&&(C.left-=u/2),"bottom"===e.my[1]?C.top-=d:"center"===e.my[1]&&(C.top-=d/2),C.left+=D[0],C.top+=D[1],t.support.offsetFractions||(C.left=l(C.left),C.top=l(C.top)),s={marginLeft:f,marginTop:y},t.each(["left","top"],function(i,n){t.ui.position[x[i]]&&t.ui.position[x[i]][n](C,{targetWidth:p,targetHeight:m,elemWidth:u,elemHeight:d,collisionPosition:s,collisionWidth:T,collisionHeight:S,offset:[o[0]+D[0],o[1]+D[1]],my:e.my,at:e.at,within:b,elem:c})}),e.using&&(h=function(t){var i=g.left-C.left,n=i+p-u,s=g.top-C.top,o=s+m-d,l={target:{element:_,left:g.left,top:g.top,width:p,height:m},element:{element:c,left:C.left,top:C.top,width:u,height:d},horizontal:0>n?"left":i>0?"right":"center",vertical:0>o?"top":s>0?"bottom":"middle"};u>p&&r(i+n)<p&&(l.horizontal="center"),d>m&&r(s+o)<m&&(l.vertical="middle"),l.important=a(r(i),r(n))>a(r(s),r(o))?"horizontal":"vertical",e.using.call(this,t,l)}),c.offset(t.extend(C,{using:h}))})},t.ui.position={fit:{left:function(t,e){var i,n=e.within,s=n.isWindow?n.scrollLeft:n.offset.left,o=n.width,r=t.left-e.collisionPosition.marginLeft,l=s-r,h=r+e.collisionWidth-o-s;e.collisionWidth>o?l>0&&0>=h?(i=t.left+l+e.collisionWidth-o-s,t.left+=l-i):t.left=h>0&&0>=l?s:l>h?s+o-e.collisionWidth:s:l>0?t.left+=l:h>0?t.left-=h:t.left=a(t.left-r,t.left)},top:function(t,e){var i,n=e.within,s=n.isWindow?n.scrollTop:n.offset.top,o=e.within.height,r=t.top-e.collisionPosition.marginTop,l=s-r,h=r+e.collisionHeight-o-s;e.collisionHeight>o?l>0&&0>=h?(i=t.top+l+e.collisionHeight-o-s,t.top+=l-i):t.top=h>0&&0>=l?s:l>h?s+o-e.collisionHeight:s:l>0?t.top+=l:h>0?t.top-=h:t.top=a(t.top-r,t.top)}},flip:{left:function(t,e){var i,n,s=e.within,o=s.offset.left+s.scrollLeft,a=s.width,l=s.isWindow?s.scrollLeft:s.offset.left,h=t.left-e.collisionPosition.marginLeft,c=h-l,u=h+e.collisionWidth-a-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>c?(i=t.left+d+p+f+e.collisionWidth-a-o,(0>i||i<r(c))&&(t.left+=d+p+f)):u>0&&(n=t.left-e.collisionPosition.marginLeft+d+p+f-l,(n>0||r(n)<u)&&(t.left+=d+p+f))},top:function(t,e){var i,n,s=e.within,o=s.offset.top+s.scrollTop,a=s.height,l=s.isWindow?s.scrollTop:s.offset.top,h=t.top-e.collisionPosition.marginTop,c=h-l,u=h+e.collisionHeight-a-l,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,m=-2*e.offset[1];0>c?(n=t.top+p+f+m+e.collisionHeight-a-o,t.top+p+f+m>c&&(0>n||n<r(c))&&(t.top+=p+f+m)):u>0&&(i=t.top-e.collisionPosition.marginTop+p+f+m-l,t.top+p+f+m>u&&(i>0||r(i)<u)&&(t.top+=p+f+m))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,n,s,o,a=document.getElementsByTagName("body")[0],r=document.createElement("div");e=document.createElement(a?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&t.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in n)e.style[o]=n[o];e.appendChild(r),i=a||document.documentElement,i.insertBefore(e,i.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",s=t(r).offset().left,t.support.offsetFractions=s>10&&11>s,e.innerHTML="",i.removeChild(e)}()}(jQuery),function(t){var e=0,i={},n={};i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="hide",n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="show",t.widget("ui.accordion",{version:"1.10.0",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var e=this.options;this.prevShow=this.prevHide=t(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),!e.collapsible&&(e.active===!1||null==e.active)&&(e.active=0),this._processPanels(),e.active<0&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():t()}},_createIcons:function(){var e=this.options.icons;e&&(t("<span>").addClass("ui-accordion-header-icon ui-icon "+e.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(e.header).addClass(e.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){return"active"===t?(this._activate(e),void 0):("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"===t&&!e&&this.options.active===!1&&this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons()),"disabled"===t&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!e),void 0)},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var i=t.ui.keyCode,n=this.headers.length,s=this.headers.index(e.target),o=!1;switch(e.keyCode){case i.RIGHT:case i.DOWN:o=this.headers[(s+1)%n];break;case i.LEFT:case i.UP:o=this.headers[(s-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(e);break;case i.HOME:o=this.headers[0];break;case i.END:o=this.headers[n-1]}o&&(t(e.target).attr("tabIndex",-1),t(o).attr("tabIndex",0),o.focus(),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().focus()},refresh:function(){var e=this.options;this._processPanels(),(e.active===!1&&e.collapsible===!0||!this.headers.length)&&(e.active=!1,this.active=t()),e.active===!1?this._activate(0):this.active.length&&!t.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=t()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var i,n=this.options,s=n.heightStyle,o=this.element.parent(),a=this.accordionId="ui-accordion-"+(this.element.attr("id")||++e);this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(e){var i=t(this),n=i.attr("id"),s=i.next(),o=s.attr("id");n||(n=a+"-header-"+e,i.attr("id",n)),o||(o=a+"-panel-"+e,s.attr("id",o)),i.attr("aria-controls",o),s.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(n.event),"fill"===s?(i=o.height(),this.element.siblings(":visible").each(function(){var e=t(this),n=e.css("position");"absolute"!==n&&"fixed"!==n&&(i-=e.outerHeight(!0))}),this.headers.each(function(){i-=t(this).outerHeight(!0)}),this.headers.next().each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===s&&(i=0,this.headers.next().each(function(){i=Math.max(i,t(this).css("height","").height())}).height(i))},_activate:function(e){var i=this._findActive(e)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var i={keydown:"_keydown"};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var i=this.options,n=this.active,s=t(e.currentTarget),o=s[0]===n[0],a=o&&i.collapsible,r=a?t():s.next(),l=n.next(),h={oldHeader:n,oldPanel:l,newHeader:a?t():s,newPanel:r};e.preventDefault(),o&&!i.collapsible||this._trigger("beforeActivate",e,h)===!1||(i.active=a?!1:this.headers.index(s),this.active=o?t():s,this._toggle(h),n.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),o||(s.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),s.next().addClass("ui-accordion-content-active")))},_toggle:function(e){var i=e.newPanel,n=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,e):(n.hide(),i.show(),this._toggleComplete(e)),n.attr({"aria-expanded":"false","aria-hidden":"true"}),n.prev().attr("aria-selected","false"),i.length&&n.length?n.prev().attr("tabIndex",-1):i.length&&this.headers.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(t,e,s){var o,a,r,l=this,h=0,c=t.length&&(!e.length||t.index()<e.index()),u=this.options.animate||{},d=c&&u.down||u,p=function(){l._toggleComplete(s)};return"number"==typeof d&&(r=d),"string"==typeof d&&(a=d),a=a||d.easing||u.easing,r=r||d.duration||u.duration,e.length?t.length?(o=t.show().outerHeight(),e.animate(i,{duration:r,easing:a,step:function(t,e){e.now=Math.round(t)}}),t.hide().animate(n,{duration:r,easing:a,complete:p,step:function(t,i){i.now=Math.round(t),"height"!==i.prop?h+=i.now:"content"!==l.options.heightStyle&&(i.now=Math.round(o-e.outerHeight()-h),h=0)}}),void 0):e.animate(i,r,a,p):t.animate(n,r,a,p)},_toggleComplete:function(t){var e=t.oldPanel;e.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}})}(jQuery),function(t){var e=0;t.widget("ui.autocomplete",{version:"1.10.0",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var e,i,n;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(s){if(this.element.prop("readOnly"))return e=!0,n=!0,i=!0,void 0;e=!1,n=!1,i=!1;var o=t.ui.keyCode;switch(s.keyCode){case o.PAGE_UP:e=!0,this._move("previousPage",s);break;case o.PAGE_DOWN:e=!0,this._move("nextPage",s);break;case o.UP:e=!0,this._keyEvent("previous",s);break;case o.DOWN:e=!0,this._keyEvent("next",s);break;case o.ENTER:case o.NUMPAD_ENTER:this.menu.active&&(e=!0,s.preventDefault(),this.menu.select(s));break;case o.TAB:this.menu.active&&this.menu.select(s);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(s),s.preventDefault());break;default:i=!0,this._searchTimeout(s)}},keypress:function(n){if(e)return e=!1,n.preventDefault(),void 0;if(!i){var s=t.ui.keyCode;switch(n.keyCode){case s.PAGE_UP:this._move("previousPage",n);break;case s.PAGE_DOWN:this._move("nextPage",n);break;case s.UP:this._keyEvent("previous",n);break;case s.DOWN:this._keyEvent("next",n)}}},input:function(t){return n?(n=!1,t.preventDefault(),void 0):(this._searchTimeout(t),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(t),this._change(t),void 0)}}),this._initSource(),this.menu=t("<ul>").addClass("ui-autocomplete").appendTo(this._appendTo()).menu({input:t(),role:null}).zIndex(this.element.zIndex()+1).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];t(e.target).closest(".ui-menu-item").length||this._delay(function(){var e=this;this.document.one("mousedown",function(n){n.target!==e.element[0]&&n.target!==i&&!t.contains(i,n.target)&&e.close()})})},menufocus:function(e,i){if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)}),void 0;var n=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",e,{item:n})?e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(n.value):this.liveRegion.text(n.value)},menuselect:function(t,e){var i=e.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e||(e=this.element.closest(".ui-front")),e.length||(e=this.document[0].body),e},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var e,i,n=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,n){n(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,s){n.xhr&&n.xhr.abort(),n.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){s(t)},error:function(){s([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):this._trigger("search",e)!==!1?this._search(t):void 0},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var t=this,i=++e;return function(n){i===e&&t.__response(n),t.pending--,t.pending||t.element.removeClass("ui-autocomplete-loading")}},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()
},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({label:e.label||e.value,value:e.value||e.label},e)})},_suggest:function(e){var i=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(i,e),this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var n=this;t.each(i,function(t,i){n._renderItemData(e,i)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").append(t("<a>").text(i.label)).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this._value(this.term),this.menu.blur(),void 0):(this.menu[t](e),void 0):(this.search(null,e),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(t,e),e.preventDefault())}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var n=new RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,function(t){return n.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.text(e))}})}(jQuery),function(t,e){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.dpDiv=n(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(i,"mouseout",function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){t.datepicker._isDisabledDatepicker(o.inline?e.parent()[0]:o.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))})}function s(e,i){t.extend(e,i);for(var n in i)null==i[n]&&(e[n]=i[n]);return e}t.extend(t.ui,{datepicker:{version:"1.10.0"}});var o,a="datepicker",r=(new Date).getTime();t.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return s(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var n,s,o;n=e.nodeName.toLowerCase(),s="div"===n||"span"===n,e.id||(this.uuid+=1,e.id="dp"+this.uuid),o=this._newInst(t(e),s),o.settings=t.extend({},i||{}),"input"===n?this._connectDatepicker(e,o):s&&this._inlineDatepicker(e,o)},_newInst:function(e,i){var s=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var n=t(e);i.append=t([]),i.trigger=t([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),t.data(e,a,i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var n,s,o,a=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),a&&(i.append=t("<span class='"+this._appendClass+"'>"+a+"</span>"),e[r?"before":"after"](i.append)),e.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),n=this._get(i,"showOn"),("focus"===n||"both"===n)&&e.focus(this._showDatepicker),("button"===n||"both"===n)&&(s=this._get(i,"buttonText"),o=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):t("<button type='button'></button>").addClass(this._triggerClass).html(o?t("<img/>").attr({src:o,alt:s,title:s}):s)),e[r?"before":"after"](i.trigger),i.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,n,s,o=new Date(2009,11,20),a=this._get(t,"dateFormat");a.match(/[DM]/)&&(e=function(t){for(i=0,n=0,s=0;s<t.length;s++)t[s].length>i&&(i=t[s].length,n=s);return n},o.setMonth(e(this._get(t,a.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(e(this._get(t,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),t.input.attr("size",this._formatDate(t,o).length)}},_inlineDatepicker:function(e,i){var n=t(e);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),t.data(e,a,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,n,o,r){var l,h,c,u,d,p=this._dialogInst;return p||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},t.data(this._dialogInput[0],a,p)),s(p.settings,o||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(h=document.documentElement.clientWidth,c=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[h/2-100+u,c/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],a,p),this},_destroyDatepicker:function(e){var i,n=t(e),s=t.data(e,a);n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,a),"input"===i?(s.append.remove(),s.trigger.remove(),n.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&n.removeClass(this.markerClassName).empty())},_enableDatepicker:function(e){var i,n,s=t(e),o=t.data(e,a);s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(n=s.children("."+this._inlineClass),n.children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var i,n,s=t(e),o=t.data(e,a);s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(n=s.children("."+this._inlineClass),n.children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,a)}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,n,o){var a,r,l,h,c=this._getInst(i);return 2===arguments.length&&"string"==typeof n?"defaults"===n?t.extend({},t.datepicker._defaults):c?"all"===n?t.extend({},c.settings):this._get(c,n):null:(a=n||{},"string"==typeof n&&(a={},a[n]=o),c&&(this._curInst===c&&this._hideDatepicker(),r=this._getDateDatepicker(i,!0),l=this._getMinMaxDate(c,"min"),h=this._getMinMaxDate(c,"max"),s(c.settings,a),null!==l&&a.dateFormat!==e&&a.minDate===e&&(c.settings.minDate=this._formatDate(c,l)),null!==h&&a.dateFormat!==e&&a.maxDate===e&&(c.settings.maxDate=this._formatDate(c,h)),"disabled"in a&&(a.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(t(i),c),this._autoSize(c),this._setDate(c,r),this._updateAlternate(c),this._updateDatepicker(c)),void 0)},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,n,s,o=t.datepicker._getInst(e.target),a=!0,r=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),a=!1;break;case 13:return s=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",o.dpDiv),s[0]&&t.datepicker._selectDay(e.target,o.selectedMonth,o.selectedYear,s[0]),i=t.datepicker._get(o,"onSelect"),i?(n=t.datepicker._formatDate(o),i.apply(o.input?o.input[0]:null,[n,o])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),a=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),a=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?1:-1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),a=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?-1:1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),a=e.ctrlKey||e.metaKey;break;default:a=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):a=!1;a&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var i,n,s=t.datepicker._getInst(e.target);return t.datepicker._get(s,"constrainInput")?(i=t.datepicker._possibleChars(t.datepicker._get(s,"dateFormat")),n=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||" ">n||!i||i.indexOf(n)>-1):void 0},_doKeyUp:function(e){var i,n=t.datepicker._getInst(e.target);if(n.input.val()!==n.lastVal)try{i=t.datepicker.parseDate(t.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,t.datepicker._getFormatConfig(n)),i&&(t.datepicker._setDateFromField(n),t.datepicker._updateAlternate(n),t.datepicker._updateDatepicker(n))}catch(s){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var i,n,o,a,r,l,h;i=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==i&&(t.datepicker._curInst.dpDiv.stop(!0,!0),i&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),n=t.datepicker._get(i,"beforeShow"),o=n?n.apply(e,[e,i]):{},o!==!1&&(s(i.settings,o),i.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(i),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),a=!1,t(e).parents().each(function(){return a|="fixed"===t(this).css("position"),!a}),r={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(i),r=t.datepicker._checkOffset(i,r,a),i.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":a?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),i.inline||(l=t.datepicker._get(i,"showAnim"),h=t.datepicker._get(i,"duration"),i.dpDiv.zIndex(t(e).zIndex()+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[l]?i.dpDiv.show(l,t.datepicker._get(i,"showOptions"),h):i.dpDiv[l||"show"](l?h:null),i.input.is(":visible")&&!i.input.is(":disabled")&&i.input.focus(),t.datepicker._curInst=i))}},_updateDatepicker:function(e){this.maxRows=4,o=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,n=this._getNumberOfMonths(e),s=n[1],a=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&e.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",a*s+"em"),e.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!==document.activeElement&&e.input.focus(),e.yearshtml&&(i=e.yearshtml,setTimeout(function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null},0))},_getBorders:function(t){var e=function(t){return{thin:1,medium:2,thick:3}[t]||t};return[parseFloat(e(t.css("border-left-width"))),parseFloat(e(t.css("border-top-width")))]},_checkOffset:function(e,i,n){var s=e.dpDiv.outerWidth(),o=e.dpDiv.outerHeight(),a=e.input?e.input.outerWidth():0,r=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:t(document).scrollLeft()),h=document.documentElement.clientHeight+(n?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?s-a:0,i.left-=n&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=n&&i.top===e.input.offset().top+r?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+s>l&&l>s?Math.abs(i.left+s-l):0),i.top-=Math.min(i.top,i.top+o>h&&h>o?Math.abs(o+r):0),i},_findPos:function(e){for(var i,n=this._getInst(e),s=this._get(n,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[s?"previousSibling":"nextSibling"];return i=t(e).offset(),[i.left,i.top]},_hideDatepicker:function(e){var i,n,s,o,r=this._curInst;!r||e&&r!==t.data(e,a)||this._datepickerShowing&&(i=this._get(r,"showAnim"),n=this._get(r,"duration"),s=function(){t.datepicker._tidyDialog(r)},t.effects&&(t.effects.effect[i]||t.effects[i])?r.dpDiv.hide(i,t.datepicker._get(r,"showOptions"),n,s):r.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,s),i||s(),this._datepickerShowing=!1,o=this._get(r,"onClose"),o&&o.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),n=t.datepicker._getInst(i[0]);(i[0].id!==t.datepicker._mainDivId&&0===i.parents("#"+t.datepicker._mainDivId).length&&!i.hasClass(t.datepicker.markerClassName)&&!i.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||i.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==n)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,n){var s=t(e),o=this._getInst(s[0]);this._isDisabledDatepicker(s[0])||(this._adjustInstDate(o,i+("M"===n?this._get(o,"showCurrentAtPos"):0),n),this._updateDatepicker(o))},_gotoToday:function(e){var i,n=t(e),s=this._getInst(n[0]);this._get(s,"gotoCurrent")&&s.currentDay?(s.selectedDay=s.currentDay,s.drawMonth=s.selectedMonth=s.currentMonth,s.drawYear=s.selectedYear=s.currentYear):(i=new Date,s.selectedDay=i.getDate(),s.drawMonth=s.selectedMonth=i.getMonth(),s.drawYear=s.selectedYear=i.getFullYear()),this._notifyChange(s),this._adjustDate(n)},_selectMonthYear:function(e,i,n){var s=t(e),o=this._getInst(s[0]);o["selected"+("M"===n?"Month":"Year")]=o["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(s)},_selectDay:function(e,i,n,s){var o,a=t(e);t(s).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0])||(o=this._getInst(a[0]),o.selectedDay=o.currentDay=t("a",s).html(),o.selectedMonth=o.currentMonth=i,o.selectedYear=o.currentYear=n,this._selectDate(e,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var n,s=t(e),o=this._getInst(s[0]);i=null!=i?i:this._formatDate(o),o.input&&o.input.val(i),this._updateAlternate(o),n=this._get(o,"onSelect"),n?n.apply(o.input?o.input[0]:null,[i,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var i,n,s,o=this._get(e,"altField");o&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),n=this._getDate(e),s=this.formatDate(i,n,this._getFormatConfig(e)),t(o).each(function(){t(this).val(s)}))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(e,i,n){if(null==e||null==i)throw"Invalid arguments";if(i="object"==typeof i?i.toString():i+"",""===i)return null;var s,o,a,r,l=0,h=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof h?h:(new Date).getFullYear()%100+parseInt(h,10),u=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,d=(n?n.dayNames:null)||this._defaults.dayNames,p=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,f=(n?n.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,y=-1,_=!1,b=function(t){var i=s+1<e.length&&e.charAt(s+1)===t;return i&&s++,i},w=function(t){var e=b(t),n="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,s=new RegExp("^\\d{1,"+n+"}"),o=i.substring(l).match(s);if(!o)throw"Missing number at position "+l;return l+=o[0].length,parseInt(o[0],10)},x=function(e,n,s){var o=-1,a=t.map(b(e)?s:n,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(a,function(t,e){var n=e[1];return i.substr(l,n.length).toLowerCase()===n.toLowerCase()?(o=e[0],l+=n.length,!1):void 0}),-1!==o)return o+1;throw"Unknown name at position "+l},k=function(){if(i.charAt(l)!==e.charAt(s))throw"Unexpected literal at position "+l;l++};for(s=0;s<e.length;s++)if(_)"'"!==e.charAt(s)||b("'")?k():_=!1;else switch(e.charAt(s)){case"d":v=w("d");break;case"D":x("D",u,d);break;case"o":y=w("o");break;case"m":g=w("m");break;case"M":g=x("M",p,f);break;case"y":m=w("y");break;case"@":r=new Date(w("@")),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"!":r=new Date((w("!")-this._ticksTo1970)/1e4),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"'":b("'")?k():_=!0;break;default:k()}if(l<i.length&&(a=i.substr(l),!/^\s+/.test(a)))throw"Extra/unparsed characters found in date: "+a;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c>=m?0:-100)),y>-1)for(g=1,v=y;;){if(o=this._getDaysInMonth(m,g-1),o>=v)break;g++,v-=o}if(r=this._daylightSavingAdjust(new Date(m,g-1,v)),r.getFullYear()!==m||r.getMonth()+1!==g||r.getDate()!==v)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(t,e,i){if(!e)return"";var n,s=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,a=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,l=function(e){var i=n+1<t.length&&t.charAt(n+1)===e;return i&&n++,i},h=function(t,e,i){var n=""+e;if(l(t))for(;n.length<i;)n="0"+n;return n},c=function(t,e,i,n){return l(t)?n[e]:i[e]},u="",d=!1;if(e)for(n=0;n<t.length;n++)if(d)"'"!==t.charAt(n)||l("'")?u+=t.charAt(n):d=!1;else switch(t.charAt(n)){case"d":u+=h("d",e.getDate(),2);break;case"D":u+=c("D",e.getDay(),s,o);break;case"o":u+=h("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=h("m",e.getMonth()+1,2);break;case"M":u+=c("M",e.getMonth(),a,r);break;case"y":u+=l("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?u+="'":d=!0;break;default:u+=t.charAt(n)}return u},_possibleChars:function(t){var e,i="",n=!1,s=function(i){var n=e+1<t.length&&t.charAt(e+1)===i;return n&&e++,n};for(e=0;e<t.length;e++)if(n)"'"!==t.charAt(e)||s("'")?i+=t.charAt(e):n=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":s("'")?i+="'":n=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,i){return t.settings[i]!==e?t.settings[i]:this._defaults[i]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),n=t.lastVal=t.input?t.input.val():null,s=this._getDefaultDate(t),o=s,a=this._getFormatConfig(t);try{o=this.parseDate(i,n,a)||s}catch(r){n=e?"":n}t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),t.currentDay=n?o.getDate():0,t.currentMonth=n?o.getMonth():0,t.currentYear=n?o.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,n){var s=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},o=function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(n){}for(var s=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,o=s.getFullYear(),a=s.getMonth(),r=s.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,h=l.exec(i);h;){switch(h[2]||"d"){case"d":case"D":r+=parseInt(h[1],10);break;case"w":case"W":r+=7*parseInt(h[1],10);break;case"m":case"M":a+=parseInt(h[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(o,a));break;case"y":case"Y":o+=parseInt(h[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(o,a))}h=l.exec(i)}return new Date(o,a,r)},a=null==i||""===i?n:"string"==typeof i?o(i):"number"==typeof i?isNaN(i)?n:s(i):new Date(i.getTime());return a=a&&"Invalid Date"===a.toString()?n:a,a&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var n=!e,s=t.selectedMonth,o=t.selectedYear,a=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=a.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=a.getMonth(),t.drawYear=t.selectedYear=t.currentYear=a.getFullYear(),(s!==t.selectedMonth||o!==t.selectedYear)&&!i&&this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(n?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+r].datepicker._adjustDate(n,-i,"M")},next:function(){window["DP_jQuery_"+r].datepicker._adjustDate(n,+i,"M")},hide:function(){window["DP_jQuery_"+r].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+r].datepicker._gotoToday(n)},selectDay:function(){return window["DP_jQuery_"+r].datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+r].datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+r].datepicker._selectMonthYear(n,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,n,s,o,a,r,l,h,c,u,d,p,f,m,g,v,y,_,b,w,x,k,T,S,C,D,E,P,M,I,A,L,z,O,N,B,j,H,R=new Date,F=this._daylightSavingAdjust(new Date(R.getFullYear(),R.getMonth(),R.getDate())),W=this._get(t,"isRTL"),$=this._get(t,"showButtonPanel"),U=this._get(t,"hideIfNoPrevNext"),q=this._get(t,"navigationAsDateFormat"),Z=this._getNumberOfMonths(t),Y=this._get(t,"showCurrentAtPos"),G=this._get(t,"stepMonths"),Q=1!==Z[0]||1!==Z[1],V=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),X=this._getMinMaxDate(t,"min"),K=this._getMinMaxDate(t,"max"),J=t.drawMonth-Y,te=t.drawYear;if(0>J&&(J+=12,te--),K)for(e=this._daylightSavingAdjust(new Date(K.getFullYear(),K.getMonth()-Z[0]*Z[1]+1,K.getDate())),e=X&&X>e?X:e;this._daylightSavingAdjust(new Date(te,J,1))>e;)J--,0>J&&(J=11,te--);for(t.drawMonth=J,t.drawYear=te,i=this._get(t,"prevText"),i=q?this.formatDate(i,this._daylightSavingAdjust(new Date(te,J-G,1)),this._getFormatConfig(t)):i,n=this._canAdjustMonth(t,-1,te,J)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"e":"w")+"'>"+i+"</span></a>":U?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"e":"w")+"'>"+i+"</span></a>",s=this._get(t,"nextText"),s=q?this.formatDate(s,this._daylightSavingAdjust(new Date(te,J+G,1)),this._getFormatConfig(t)):s,o=this._canAdjustMonth(t,1,te,J)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"w":"e")+"'>"+s+"</span></a>":U?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"w":"e")+"'>"+s+"</span></a>",a=this._get(t,"currentText"),r=this._get(t,"gotoCurrent")&&t.currentDay?V:F,a=q?this.formatDate(a,r,this._getFormatConfig(t)):a,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",h=$?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(W?l:"")+(this._isInRange(t,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+a+"</button>":"")+(W?"":l)+"</div>":"",c=parseInt(this._get(t,"firstDay"),10),c=isNaN(c)?0:c,u=this._get(t,"showWeek"),d=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),m=this._get(t,"monthNamesShort"),g=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),y=this._get(t,"selectOtherMonths"),_=this._getDefaultDate(t),b="",w,x=0;x<Z[0];x++){for(k="",this.maxRows=4,T=0;T<Z[1];T++){if(S=this._daylightSavingAdjust(new Date(te,J,t.selectedDay)),C=" ui-corner-all",D="",Q){if(D+="<div class='ui-datepicker-group",Z[1]>1)switch(T){case 0:D+=" ui-datepicker-group-first",C=" ui-corner-"+(W?"right":"left");break;case Z[1]-1:D+=" ui-datepicker-group-last",C=" ui-corner-"+(W?"left":"right");break;default:D+=" ui-datepicker-group-middle",C=""}D+="'>"}for(D+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+C+"'>"+(/all|left/.test(C)&&0===x?W?o:n:"")+(/all|right/.test(C)&&0===x?W?n:o:"")+this._generateMonthYearHeader(t,J,te,X,K,x>0||T>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",E=u?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;7>w;w++)P=(w+c)%7,E+="<th"+((w+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+d[P]+"'>"+p[P]+"</span></th>";for(D+=E+"</tr></thead><tbody>",M=this._getDaysInMonth(te,J),te===t.selectedYear&&J===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,M)),I=(this._getFirstDayOfMonth(te,J)-c+7)%7,A=Math.ceil((I+M)/7),L=Q?this.maxRows>A?this.maxRows:A:A,this.maxRows=L,z=this._daylightSavingAdjust(new Date(te,J,1-I)),O=0;L>O;O++){for(D+="<tr>",N=u?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(z)+"</td>":"",w=0;7>w;w++)B=g?g.apply(t.input?t.input[0]:null,[z]):[!0,""],j=z.getMonth()!==J,H=j&&!y||!B[0]||X&&X>z||K&&z>K,N+="<td class='"+((w+c+6)%7>=5?" ui-datepicker-week-end":"")+(j?" ui-datepicker-other-month":"")+(z.getTime()===S.getTime()&&J===t.selectedMonth&&t._keyEvent||_.getTime()===z.getTime()&&_.getTime()===S.getTime()?" "+this._dayOverClass:"")+(H?" "+this._unselectableClass+" ui-state-disabled":"")+(j&&!v?"":" "+B[1]+(z.getTime()===V.getTime()?" "+this._currentClass:"")+(z.getTime()===F.getTime()?" ui-datepicker-today":""))+"'"+(j&&!v||!B[2]?"":" title='"+B[2]+"'")+(H?"":" data-handler='selectDay' data-event='click' data-month='"+z.getMonth()+"' data-year='"+z.getFullYear()+"'")+">"+(j&&!v?"&#xa0;":H?"<span class='ui-state-default'>"+z.getDate()+"</span>":"<a class='ui-state-default"+(z.getTime()===F.getTime()?" ui-state-highlight":"")+(z.getTime()===V.getTime()?" ui-state-active":"")+(j?" ui-priority-secondary":"")+"' href='#'>"+z.getDate()+"</a>")+"</td>",z.setDate(z.getDate()+1),z=this._daylightSavingAdjust(z);
D+=N+"</tr>"}J++,J>11&&(J=0,te++),D+="</tbody></table>"+(Q?"</div>"+(Z[0]>0&&T===Z[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),k+=D}b+=k}return b+=h,t._keyEvent=!1,b},_generateMonthYearHeader:function(t,e,i,n,s,o,a,r){var l,h,c,u,d,p,f,m,g=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),y=this._get(t,"showMonthAfterYear"),_="<div class='ui-datepicker-title'>",b="";if(o||!g)b+="<span class='ui-datepicker-month'>"+a[e]+"</span>";else{for(l=n&&n.getFullYear()===i,h=s&&s.getFullYear()===i,b+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;12>c;c++)(!l||c>=n.getMonth())&&(!h||c<=s.getMonth())&&(b+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+r[c]+"</option>");b+="</select>"}if(y||(_+=b+(!o&&g&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",o||!v)_+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(u=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(e)?d:e},f=p(u[0]),m=Math.max(f,p(u[1]||"")),f=n?Math.max(f,n.getFullYear()):f,m=s?Math.min(m,s.getFullYear()):m,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",_+=t.yearshtml,t.yearshtml=null}return _+=this._get(t,"yearSuffix"),y&&(_+=(!o&&g&&v?"":"&#xa0;")+b),_+="</div>"},_adjustInstDate:function(t,e,i){var n=t.drawYear+("Y"===i?e:0),s=t.drawMonth+("M"===i?e:0),o=Math.min(t.selectedDay,this._getDaysInMonth(n,s))+("D"===i?e:0),a=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(n,s,o)));t.selectedDay=a.getDate(),t.drawMonth=t.selectedMonth=a.getMonth(),t.drawYear=t.selectedYear=a.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),n=this._getMinMaxDate(t,"max"),s=i&&i>e?i:e;return n&&s>n?n:s},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,n){var s=this._getNumberOfMonths(t),o=this._daylightSavingAdjust(new Date(i,n+(0>e?e:s[0]*s[1]),1));return 0>e&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(t,o)},_isInRange:function(t,e){var i,n,s=this._getMinMaxDate(t,"min"),o=this._getMinMaxDate(t,"max"),a=null,r=null,l=this._get(t,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),a=parseInt(i[0],10)+n,r=parseInt(i[1],10)+n),(!s||e.getTime()>=s.getTime())&&(!o||e.getTime()<=o.getTime())&&(!a||e.getFullYear()>=a)&&(!r||e.getFullYear()<=r)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,n){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var s=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(n,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),s,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new i,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.10.0",window["DP_jQuery_"+r]=t}(jQuery),function(t){t.widget("ui.menu",{version:"1.10.0",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,t.proxy(function(t){this.options.disabled&&t.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(t){t.preventDefault()},"click .ui-state-disabled > a":function(t){t.preventDefault()},"click .ui-menu-item:has(a)":function(e){var i=t(e.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(e),i.has(".ui-menu").length?this.expand(e):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){var i=t(e.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(e,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.children(".ui-menu-item").eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){t(e.target).closest(".ui-menu").length||this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,s,o,a,r,l=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:l=!1,s=this.previousFilter||"",o=String.fromCharCode(e.keyCode),a=!1,clearTimeout(this.filterTimer),o===s?a=!0:o=s+o,r=new RegExp("^"+i(o),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(t(this).children("a").text())}),n=a&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n,n.length||(o=String.fromCharCode(e.keyCode),r=new RegExp("^"+i(o),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(t(this).children("a").text())})),n.length?(this.focus(e,n),n.length>1?(this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i=this.options.icons.submenu,n=this.element.find(this.options.menus);n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),n=e.prev("a"),s=t("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(s),e.attr("aria-labelledby",n.attr("id"))}),e=n.add(this.element),e.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),e.children(":not(.ui-menu-item)").each(function(){var e=t(this);/[^\-\s]/.test(e.text())||e.addClass("ui-widget-content ui-menu-divider")}),e.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),this._super(t,e)},focus:function(t,e){var i,n;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),n=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=e.children(".ui-menu"),i.length&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,n,s,o,a,r;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,s=e.offset().top-this.activeMenu.offset().top-i-n,o=this.activeMenu.scrollTop(),a=this.activeMenu.height(),r=e.height(),0>s?this.activeMenu.scrollTop(o+s):s+r>a&&this.activeMenu.scrollTop(o+s-a+r))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(e),this.activeMenu=n},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var n;this.active&&(n="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.children(".ui-menu-item")[e]()),this.focus(i,n)},nextPage:function(e){var i,n,s;return this.active?(this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-n-s<0}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),void 0):(this.next(e),void 0)},previousPage:function(e){var i,n,s;return this.active?(this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-n+s>0}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item").first())),void 0):(this.next(e),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)}})}(jQuery),/*
 * Metadata - jQuery plugin for parsing metadata from elements
 *
 * Copyright (c) 2006 John Resig, Yehuda Katz, Jrn Zaefferer, Paul McLanahan
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 */
function($){$.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/({.*})/,single:"metadata"},setType:function(t,e){this.defaults.type=t,this.defaults.name=e},get:function(elem,opts){var settings=$.extend({},this.defaults,opts);settings.single.length||(settings.single="metadata");var data=$.data(elem,settings.single);if(data)return data;if(data="{}","class"==settings.type){var m=settings.cre.exec(elem.className);m&&(data=m[1])}else if("elem"==settings.type){if(!elem.getElementsByTagName)return void 0;var e=elem.getElementsByTagName(settings.name);e.length&&(data=$.trim(e[0].innerHTML))}else if(void 0!=elem.getAttribute){var attr=elem.getAttribute(settings.name);attr&&(data=attr)}return data.indexOf("{")<0&&(data="{"+data+"}"),data=eval("("+data+")"),$.data(elem,settings.single,data),data}}}),$.fn.metadata=function(t){return $.metadata.get(this[0],t)}}(jQuery),function(t,e){"use strict";function i(e){t.fn.cycle.debug&&n(e)}function n(){window.console&&console.log&&console.log("[cycle] "+Array.prototype.join.call(arguments," "))}function s(e,i,n){var s=t(e).data("cycle.opts");if(s){var o=!!e.cyclePause;o&&s.paused?s.paused(e,s,i,n):!o&&s.resumed&&s.resumed(e,s,i,n)}}function o(i,o,a){function l(e,i,s){if(!e&&i===!0){var o=t(s).data("cycle.opts");if(!o)return n("options not found, can not resume"),!1;s.cycleTimeout&&(clearTimeout(s.cycleTimeout),s.cycleTimeout=0),d(o.elements,o,1,!o.backwards)}}if(i.cycleStop===e&&(i.cycleStop=0),(o===e||null===o)&&(o={}),o.constructor==String){switch(o){case"destroy":case"stop":var h=t(i).data("cycle.opts");return h?(i.cycleStop++,i.cycleTimeout&&clearTimeout(i.cycleTimeout),i.cycleTimeout=0,h.elements&&t(h.elements).stop(),t(i).removeData("cycle.opts"),"destroy"==o&&r(i,h),!1):!1;case"toggle":return i.cyclePause=1===i.cyclePause?0:1,l(i.cyclePause,a,i),s(i),!1;case"pause":return i.cyclePause=1,s(i),!1;case"resume":return i.cyclePause=0,l(!1,a,i),s(i),!1;case"prev":case"next":return(h=t(i).data("cycle.opts"))?(t.fn.cycle[o](h),!1):(n('options not found, "prev/next" ignored'),!1);default:o={fx:o}}return o}if(o.constructor==Number){var c=o;return(o=t(i).data("cycle.opts"))?0>c||c>=o.elements.length?(n("invalid slide index: "+c),!1):(o.nextSlide=c,i.cycleTimeout&&(clearTimeout(i.cycleTimeout),i.cycleTimeout=0),"string"==typeof a&&(o.oneTimeFx=a),d(o.elements,o,1,c>=o.currSlide),!1):(n("options not found, can not advance slide"),!1)}return o}function a(e,i){if(!t.support.opacity&&i.cleartype&&e.style.filter)try{e.style.removeAttribute("filter")}catch(n){}}function r(e,i){i.next&&t(i.next).unbind(i.prevNextEvent),i.prev&&t(i.prev).unbind(i.prevNextEvent),(i.pager||i.pagerAnchorBuilder)&&t.each(i.pagerAnchors||[],function(){this.unbind().remove()}),i.pagerAnchors=null,t(e).unbind("mouseenter.cycle mouseleave.cycle"),i.destroy&&i.destroy(i)}function l(i,o,r,l,p){var v,y=t.extend({},t.fn.cycle.defaults,l||{},t.metadata?i.metadata():t.meta?i.data():{}),_=t.isFunction(i.data)?i.data(y.metaAttr):null;_&&(y=t.extend(y,_)),y.autostop&&(y.countdown=y.autostopCount||r.length);var b=i[0];if(i.data("cycle.opts",y),y.$cont=i,y.stopCount=b.cycleStop,y.elements=r,y.before=y.before?[y.before]:[],y.after=y.after?[y.after]:[],!t.support.opacity&&y.cleartype&&y.after.push(function(){a(this,y)}),y.continuous&&y.after.push(function(){d(r,y,0,!y.backwards)}),h(y),t.support.opacity||!y.cleartype||y.cleartypeNoBg||g(o),"static"==i.css("position")&&i.css("position","relative"),y.width&&i.width(y.width),y.height&&"auto"!=y.height&&i.height(y.height),y.startingSlide!==e?(y.startingSlide=parseInt(y.startingSlide,10),y.startingSlide>=r.length||y.startSlide<0?y.startingSlide=0:v=!0):y.startingSlide=y.backwards?r.length-1:0,y.random){y.randomMap=[];for(var w=0;w<r.length;w++)y.randomMap.push(w);if(y.randomMap.sort(function(){return Math.random()-.5}),v)for(var x=0;x<r.length;x++)y.startingSlide==y.randomMap[x]&&(y.randomIndex=x);else y.randomIndex=1,y.startingSlide=y.randomMap[1]}else y.startingSlide>=r.length&&(y.startingSlide=0);y.currSlide=y.startingSlide||0;var k=y.startingSlide;o.css({position:"absolute",top:0,left:0}).hide().each(function(e){var i;i=y.backwards?k?k>=e?r.length+(e-k):k-e:r.length-e:k?e>=k?r.length-(e-k):k-e:r.length-e,t(this).css("z-index",i)}),t(r[k]).css("opacity",1).show(),a(r[k],y),y.fit&&(y.aspect?o.each(function(){var e=t(this),i=y.aspect===!0?e.width()/e.height():y.aspect;y.width&&e.width()!=y.width&&(e.width(y.width),e.height(y.width/i)),y.height&&e.height()<y.height&&(e.height(y.height),e.width(y.height*i))}):(y.width&&o.width(y.width),y.height&&"auto"!=y.height&&o.height(y.height))),!y.center||y.fit&&!y.aspect||o.each(function(){var e=t(this);e.css({"margin-left":y.width?(y.width-e.width())/2+"px":0,"margin-top":y.height?(y.height-e.height())/2+"px":0})}),!y.center||y.fit||y.slideResize||o.each(function(){var e=t(this);e.css({"margin-left":y.width?(y.width-e.width())/2+"px":0,"margin-top":y.height?(y.height-e.height())/2+"px":0})});var T=(y.containerResize||y.containerResizeHeight)&&!i.innerHeight();if(T){for(var S=0,C=0,D=0;D<r.length;D++){var E=t(r[D]),P=E[0],M=E.outerWidth(),I=E.outerHeight();M||(M=P.offsetWidth||P.width||E.attr("width")),I||(I=P.offsetHeight||P.height||E.attr("height")),S=M>S?M:S,C=I>C?I:C}y.containerResize&&S>0&&C>0&&i.css({width:S+"px",height:C+"px"}),y.containerResizeHeight&&C>0&&i.css({height:C+"px"})}var A=!1;if(y.pause&&i.bind("mouseenter.cycle",function(){A=!0,this.cyclePause++,s(b,!0)}).bind("mouseleave.cycle",function(){A&&this.cyclePause--,s(b,!0)}),c(y)===!1)return!1;var L=!1;if(l.requeueAttempts=l.requeueAttempts||0,o.each(function(){var e=t(this);if(this.cycleH=y.fit&&y.height?y.height:e.height()||this.offsetHeight||this.height||e.attr("height")||0,this.cycleW=y.fit&&y.width?y.width:e.width()||this.offsetWidth||this.width||e.attr("width")||0,e.is("img")){var i=0===this.cycleH&&0===this.cycleW&&!this.complete;if(i){if(p.s&&y.requeueOnImageNotLoaded&&++l.requeueAttempts<100)return n(l.requeueAttempts," - img slide not loaded, requeuing slideshow: ",this.src,this.cycleW,this.cycleH),setTimeout(function(){t(p.s,p.c).cycle(l)},y.requeueTimeout),L=!0,!1;n("could not determine size of image: "+this.src,this.cycleW,this.cycleH)}}return!0}),L)return!1;if(y.cssBefore=y.cssBefore||{},y.cssAfter=y.cssAfter||{},y.cssFirst=y.cssFirst||{},y.animIn=y.animIn||{},y.animOut=y.animOut||{},o.not(":eq("+k+")").css(y.cssBefore),t(o[k]).css(y.cssFirst),y.timeout){y.timeout=parseInt(y.timeout,10),y.speed.constructor==String&&(y.speed=t.fx.speeds[y.speed]||parseInt(y.speed,10)),y.sync||(y.speed=y.speed/2);for(var z="none"==y.fx?0:"shuffle"==y.fx?500:250;y.timeout-y.speed<z;)y.timeout+=y.speed}if(y.easing&&(y.easeIn=y.easeOut=y.easing),y.speedIn||(y.speedIn=y.speed),y.speedOut||(y.speedOut=y.speed),y.slideCount=r.length,y.currSlide=y.lastSlide=k,y.random?(++y.randomIndex==r.length&&(y.randomIndex=0),y.nextSlide=y.randomMap[y.randomIndex]):y.nextSlide=y.backwards?0===y.startingSlide?r.length-1:y.startingSlide-1:y.startingSlide>=r.length-1?0:y.startingSlide+1,!y.multiFx){var O=t.fn.cycle.transitions[y.fx];if(t.isFunction(O))O(i,o,y);else if("custom"!=y.fx&&!y.multiFx)return n("unknown transition: "+y.fx,"; slideshow terminating"),!1}var N=o[k];return y.skipInitializationCallbacks||(y.before.length&&y.before[0].apply(N,[N,N,y,!0]),y.after.length&&y.after[0].apply(N,[N,N,y,!0])),y.next&&t(y.next).bind(y.prevNextEvent,function(){return f(y,1)}),y.prev&&t(y.prev).bind(y.prevNextEvent,function(){return f(y,0)}),(y.pager||y.pagerAnchorBuilder)&&m(r,y),u(y,r),y}function h(e){e.original={before:[],after:[]},e.original.cssBefore=t.extend({},e.cssBefore),e.original.cssAfter=t.extend({},e.cssAfter),e.original.animIn=t.extend({},e.animIn),e.original.animOut=t.extend({},e.animOut),t.each(e.before,function(){e.original.before.push(this)}),t.each(e.after,function(){e.original.after.push(this)})}function c(e){var s,o,a=t.fn.cycle.transitions;if(e.fx.indexOf(",")>0){for(e.multiFx=!0,e.fxs=e.fx.replace(/\s*/g,"").split(","),s=0;s<e.fxs.length;s++){var r=e.fxs[s];o=a[r],o&&a.hasOwnProperty(r)&&t.isFunction(o)||(n("discarding unknown transition: ",r),e.fxs.splice(s,1),s--)}if(!e.fxs.length)return n("No valid transitions named; slideshow terminating."),!1}else if("all"==e.fx){e.multiFx=!0,e.fxs=[];for(var l in a)a.hasOwnProperty(l)&&(o=a[l],a.hasOwnProperty(l)&&t.isFunction(o)&&e.fxs.push(l))}if(e.multiFx&&e.randomizeEffects){var h=Math.floor(20*Math.random())+30;for(s=0;h>s;s++){var c=Math.floor(Math.random()*e.fxs.length);e.fxs.push(e.fxs.splice(c,1)[0])}i("randomized fx sequence: ",e.fxs)}return!0}function u(e,i){e.addSlide=function(n,s){var o=t(n),a=o[0];e.autostopCount||e.countdown++,i[s?"unshift":"push"](a),e.els&&e.els[s?"unshift":"push"](a),e.slideCount=i.length,e.random&&(e.randomMap.push(e.slideCount-1),e.randomMap.sort(function(){return Math.random()-.5})),o.css("position","absolute"),o[s?"prependTo":"appendTo"](e.$cont),s&&(e.currSlide++,e.nextSlide++),t.support.opacity||!e.cleartype||e.cleartypeNoBg||g(o),e.fit&&e.width&&o.width(e.width),e.fit&&e.height&&"auto"!=e.height&&o.height(e.height),a.cycleH=e.fit&&e.height?e.height:o.height(),a.cycleW=e.fit&&e.width?e.width:o.width(),o.css(e.cssBefore),(e.pager||e.pagerAnchorBuilder)&&t.fn.cycle.createPagerAnchor(i.length-1,a,t(e.pager),i,e),t.isFunction(e.onAddSlide)?e.onAddSlide(o):o.hide()}}function d(n,s,o,a){function r(){var t=0;s.timeout,s.timeout&&!s.continuous?(t=p(n[s.currSlide],n[s.nextSlide],s,a),"shuffle"==s.fx&&(t-=s.speedOut)):s.continuous&&l.cyclePause&&(t=10),t>0&&(l.cycleTimeout=setTimeout(function(){d(n,s,0,!s.backwards)},t))}var l=s.$cont[0],h=n[s.currSlide],c=n[s.nextSlide];if(o&&s.busy&&s.manualTrump&&(i("manualTrump in go(), stopping active transition"),t(n).stop(!0,!0),s.busy=0,clearTimeout(l.cycleTimeout)),s.busy)return i("transition active, ignoring new tx request"),void 0;if(l.cycleStop==s.stopCount&&(0!==l.cycleTimeout||o)){if(!o&&!l.cyclePause&&!s.bounce&&(s.autostop&&--s.countdown<=0||s.nowrap&&!s.random&&s.nextSlide<s.currSlide))return s.end&&s.end(s),void 0;var u=!1;if(!o&&l.cyclePause||s.nextSlide==s.currSlide)r();else{u=!0;var f=s.fx;h.cycleH=h.cycleH||t(h).height(),h.cycleW=h.cycleW||t(h).width(),c.cycleH=c.cycleH||t(c).height(),c.cycleW=c.cycleW||t(c).width(),s.multiFx&&(a&&(s.lastFx===e||++s.lastFx>=s.fxs.length)?s.lastFx=0:!a&&(s.lastFx===e||--s.lastFx<0)&&(s.lastFx=s.fxs.length-1),f=s.fxs[s.lastFx]),s.oneTimeFx&&(f=s.oneTimeFx,s.oneTimeFx=null),t.fn.cycle.resetState(s,f),s.before.length&&t.each(s.before,function(t,e){l.cycleStop==s.stopCount&&e.apply(c,[h,c,s,a])});var m=function(){s.busy=0,t.each(s.after,function(t,e){l.cycleStop==s.stopCount&&e.apply(c,[h,c,s,a])}),l.cycleStop||r()};i("tx firing("+f+"); currSlide: "+s.currSlide+"; nextSlide: "+s.nextSlide),s.busy=1,s.fxFn?s.fxFn(h,c,s,m,a,o&&s.fastOnEvent):t.isFunction(t.fn.cycle[s.fx])?t.fn.cycle[s.fx](h,c,s,m,a,o&&s.fastOnEvent):t.fn.cycle.custom(h,c,s,m,a,o&&s.fastOnEvent)}if(u||s.nextSlide==s.currSlide){var g;s.lastSlide=s.currSlide,s.random?(s.currSlide=s.nextSlide,++s.randomIndex==n.length&&(s.randomIndex=0,s.randomMap.sort(function(){return Math.random()-.5})),s.nextSlide=s.randomMap[s.randomIndex],s.nextSlide==s.currSlide&&(s.nextSlide=s.currSlide==s.slideCount-1?0:s.currSlide+1)):s.backwards?(g=s.nextSlide-1<0,g&&s.bounce?(s.backwards=!s.backwards,s.nextSlide=1,s.currSlide=0):(s.nextSlide=g?n.length-1:s.nextSlide-1,s.currSlide=g?0:s.nextSlide+1)):(g=s.nextSlide+1==n.length,g&&s.bounce?(s.backwards=!s.backwards,s.nextSlide=n.length-2,s.currSlide=n.length-1):(s.nextSlide=g?0:s.nextSlide+1,s.currSlide=g?n.length-1:s.nextSlide-1))}u&&s.pager&&s.updateActivePagerLink(s.pager,s.currSlide,s.activePagerClass)}}function p(t,e,n,s){if(n.timeoutFn){for(var o=n.timeoutFn.call(t,t,e,n,s);"none"!=n.fx&&o-n.speed<250;)o+=n.speed;if(i("calculated timeout: "+o+"; speed: "+n.speed),o!==!1)return o}return n.timeout}function f(e,i){var n=i?1:-1,s=e.elements,o=e.$cont[0],a=o.cycleTimeout;if(a&&(clearTimeout(a),o.cycleTimeout=0),e.random&&0>n)e.randomIndex--,-2==--e.randomIndex?e.randomIndex=s.length-2:-1==e.randomIndex&&(e.randomIndex=s.length-1),e.nextSlide=e.randomMap[e.randomIndex];else if(e.random)e.nextSlide=e.randomMap[e.randomIndex];else if(e.nextSlide=e.currSlide+n,e.nextSlide<0){if(e.nowrap)return!1;e.nextSlide=s.length-1}else if(e.nextSlide>=s.length){if(e.nowrap)return!1;e.nextSlide=0}var r=e.onPrevNextEvent||e.prevNextClick;return t.isFunction(r)&&r(n>0,e.nextSlide,s[e.nextSlide]),d(s,e,1,i),!1}function m(e,i){var n=t(i.pager);t.each(e,function(s,o){t.fn.cycle.createPagerAnchor(s,o,n,e,i)}),i.updateActivePagerLink(i.pager,i.startingSlide,i.activePagerClass)}function g(e){function n(t){return t=parseInt(t,10).toString(16),t.length<2?"0"+t:t}function s(e){for(;e&&"html"!=e.nodeName.toLowerCase();e=e.parentNode){var i=t.css(e,"background-color");if(i&&i.indexOf("rgb")>=0){var s=i.match(/\d+/g);return"#"+n(s[0])+n(s[1])+n(s[2])}if(i&&"transparent"!=i)return i}return"#ffffff"}i("applying clearType background-color hack"),e.each(function(){t(this).css("background-color",s(this))})}var v="2.9999.81";t.expr[":"].paused=function(t){return t.cyclePause},t.fn.cycle=function(e,s){var a={s:this.selector,c:this.context};return 0===this.length&&"stop"!=e?!t.isReady&&a.s?(n("DOM not ready, queuing slideshow"),t(function(){t(a.s,a.c).cycle(e,s)}),this):(n("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this):this.each(function(){var r=o(this,e,s);if(r!==!1){r.updateActivePagerLink=r.updateActivePagerLink||t.fn.cycle.updateActivePagerLink,this.cycleTimeout&&clearTimeout(this.cycleTimeout),this.cycleTimeout=this.cyclePause=0,this.cycleStop=0;var h=t(this),c=r.slideExpr?t(r.slideExpr,this):h.children(),u=c.get();if(u.length<2)return n("terminating; too few slides: "+u.length),void 0;var f=l(h,c,u,r,a);if(f!==!1){var m=f.continuous?10:p(u[f.currSlide],u[f.nextSlide],f,!f.backwards);m&&(m+=f.delay||0,10>m&&(m=10),i("first timeout: "+m),this.cycleTimeout=setTimeout(function(){d(u,f,0,!r.backwards)},m))}}})},t.fn.cycle.resetState=function(e,i){i=i||e.fx,e.before=[],e.after=[],e.cssBefore=t.extend({},e.original.cssBefore),e.cssAfter=t.extend({},e.original.cssAfter),e.animIn=t.extend({},e.original.animIn),e.animOut=t.extend({},e.original.animOut),e.fxFn=null,t.each(e.original.before,function(){e.before.push(this)}),t.each(e.original.after,function(){e.after.push(this)});var n=t.fn.cycle.transitions[i];t.isFunction(n)&&n(e.$cont,t(e.elements),e)},t.fn.cycle.updateActivePagerLink=function(e,i,n){t(e).each(function(){t(this).children().removeClass(n).eq(i).addClass(n)})},t.fn.cycle.next=function(t){f(t,1)},t.fn.cycle.prev=function(t){f(t,0)},t.fn.cycle.createPagerAnchor=function(e,n,o,a,r){var l;if(t.isFunction(r.pagerAnchorBuilder)?(l=r.pagerAnchorBuilder(e,n),i("pagerAnchorBuilder("+e+", el) returned: "+l)):l='<a href="#">'+(e+1)+"</a>",l){var h=t(l);if(0===h.parents("body").length){var c=[];o.length>1?(o.each(function(){var e=h.clone(!0);t(this).append(e),c.push(e[0])}),h=t(c)):h.appendTo(o)}r.pagerAnchors=r.pagerAnchors||[],r.pagerAnchors.push(h);var u=function(i){i.preventDefault(),r.nextSlide=e;var n=r.$cont[0],s=n.cycleTimeout;s&&(clearTimeout(s),n.cycleTimeout=0);var o=r.onPagerEvent||r.pagerClick;t.isFunction(o)&&o(r.nextSlide,a[r.nextSlide]),d(a,r,1,r.currSlide<e)};/mouseenter|mouseover/i.test(r.pagerEvent)?h.hover(u,function(){}):h.bind(r.pagerEvent,u),/^click/.test(r.pagerEvent)||r.allowPagerClickBubble||h.bind("click.cycle",function(){return!1});var p=r.$cont[0],f=!1;r.pauseOnPagerHover&&h.hover(function(){f=!0,p.cyclePause++,s(p,!0,!0)},function(){f&&p.cyclePause--,s(p,!0,!0)})}},t.fn.cycle.hopsFromLast=function(t,e){var i,n=t.lastSlide,s=t.currSlide;return i=e?s>n?s-n:t.slideCount-n:n>s?n-s:n+t.slideCount-s},t.fn.cycle.commonReset=function(e,i,n,s,o,a){t(n.elements).not(e).hide(),"undefined"==typeof n.cssBefore.opacity&&(n.cssBefore.opacity=1),n.cssBefore.display="block",n.slideResize&&s!==!1&&i.cycleW>0&&(n.cssBefore.width=i.cycleW),n.slideResize&&o!==!1&&i.cycleH>0&&(n.cssBefore.height=i.cycleH),n.cssAfter=n.cssAfter||{},n.cssAfter.display="none",t(e).css("zIndex",n.slideCount+(a===!0?1:0)),t(i).css("zIndex",n.slideCount+(a===!0?0:1))},t.fn.cycle.custom=function(e,i,n,s,o,a){var r=t(e),l=t(i),h=n.speedIn,c=n.speedOut,u=n.easeIn,d=n.easeOut;l.css(n.cssBefore),a&&(h=c="number"==typeof a?a:1,u=d=null);var p=function(){l.animate(n.animIn,h,u,function(){s()})};r.animate(n.animOut,c,d,function(){r.css(n.cssAfter),n.sync||p()}),n.sync&&p()},t.fn.cycle.transitions={fade:function(e,i,n){i.not(":eq("+n.currSlide+")").css("opacity",0),n.before.push(function(e,i,n){t.fn.cycle.commonReset(e,i,n),n.cssBefore.opacity=0}),n.animIn={opacity:1},n.animOut={opacity:0},n.cssBefore={top:0,left:0}}},t.fn.cycle.ver=function(){return v},t.fn.cycle.defaults={activePagerClass:"activeSlide",after:null,allowPagerClickBubble:!1,animIn:null,animOut:null,aspect:!1,autostop:0,autostopCount:0,backwards:!1,before:null,center:null,cleartype:!t.support.opacity,cleartypeNoBg:!1,containerResize:1,containerResizeHeight:0,continuous:0,cssAfter:null,cssBefore:null,delay:0,easeIn:null,easeOut:null,easing:null,end:null,fastOnEvent:0,fit:0,fx:"fade",fxFn:null,height:"auto",manualTrump:!0,metaAttr:"cycle",next:null,nowrap:0,onPagerEvent:null,onPrevNextEvent:null,pager:null,pagerAnchorBuilder:null,pagerEvent:"click.cycle",pause:0,pauseOnPagerHover:0,prev:null,prevNextEvent:"click.cycle",random:0,randomizeEffects:1,requeueOnImageNotLoaded:!0,requeueTimeout:250,rev:0,shuffle:null,skipInitializationCallbacks:!1,slideExpr:null,slideResize:1,speed:1e3,speedIn:null,speedOut:null,startingSlide:e,sync:1,timeout:4e3,timeoutFn:null,updateActivePagerLink:null,width:null}}(jQuery),/*!
 * jQuery Cycle Plugin Transition Definitions
 * This script is a plugin for the jQuery Cycle Plugin
 * Examples and documentation at: http://malsup.com/jquery/cycle/
 * Copyright (c) 2007-2010 M. Alsup
 * Version:	 2.73
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 */
function(t){"use strict";t.fn.cycle.transitions.none=function(e,i,n){n.fxFn=function(e,i,n,s){t(i).show(),t(e).hide(),s()}},t.fn.cycle.transitions.fadeout=function(e,i,n){i.not(":eq("+n.currSlide+")").css({display:"block",opacity:1}),n.before.push(function(e,i,n,s,o,a){t(e).css("zIndex",n.slideCount+(a!==!0?1:0)),t(i).css("zIndex",n.slideCount+(a!==!0?0:1))}),n.animIn.opacity=1,n.animOut.opacity=0,n.cssBefore.opacity=1,n.cssBefore.display="block",n.cssAfter.zIndex=0},t.fn.cycle.transitions.scrollUp=function(e,i,n){e.css("overflow","hidden"),n.before.push(t.fn.cycle.commonReset);var s=e.height();n.cssBefore.top=s,n.cssBefore.left=0,n.cssFirst.top=0,n.animIn.top=0,n.animOut.top=-s},t.fn.cycle.transitions.scrollDown=function(e,i,n){e.css("overflow","hidden"),n.before.push(t.fn.cycle.commonReset);var s=e.height();n.cssFirst.top=0,n.cssBefore.top=-s,n.cssBefore.left=0,n.animIn.top=0,n.animOut.top=s},t.fn.cycle.transitions.scrollLeft=function(e,i,n){e.css("overflow","hidden"),n.before.push(t.fn.cycle.commonReset);var s=e.width();n.cssFirst.left=0,n.cssBefore.left=s,n.cssBefore.top=0,n.animIn.left=0,n.animOut.left=0-s},t.fn.cycle.transitions.scrollRight=function(e,i,n){e.css("overflow","hidden"),n.before.push(t.fn.cycle.commonReset);var s=e.width();n.cssFirst.left=0,n.cssBefore.left=-s,n.cssBefore.top=0,n.animIn.left=0,n.animOut.left=s},t.fn.cycle.transitions.scrollHorz=function(e,i,n){e.css("overflow","hidden").width(),n.before.push(function(e,i,n,s){n.rev&&(s=!s),t.fn.cycle.commonReset(e,i,n),n.cssBefore.left=s?i.cycleW-1:1-i.cycleW,n.animOut.left=s?-e.cycleW:e.cycleW}),n.cssFirst.left=0,n.cssBefore.top=0,n.animIn.left=0,n.animOut.top=0},t.fn.cycle.transitions.scrollVert=function(e,i,n){e.css("overflow","hidden"),n.before.push(function(e,i,n,s){n.rev&&(s=!s),t.fn.cycle.commonReset(e,i,n),n.cssBefore.top=s?1-i.cycleH:i.cycleH-1,n.animOut.top=s?e.cycleH:-e.cycleH}),n.cssFirst.top=0,n.cssBefore.left=0,n.animIn.top=0,n.animOut.left=0},t.fn.cycle.transitions.slideX=function(e,i,n){n.before.push(function(e,i,n){t(n.elements).not(e).hide(),t.fn.cycle.commonReset(e,i,n,!1,!0),n.animIn.width=i.cycleW}),n.cssBefore.left=0,n.cssBefore.top=0,n.cssBefore.width=0,n.animIn.width="show",n.animOut.width=0},t.fn.cycle.transitions.slideY=function(e,i,n){n.before.push(function(e,i,n){t(n.elements).not(e).hide(),t.fn.cycle.commonReset(e,i,n,!0,!1),n.animIn.height=i.cycleH}),n.cssBefore.left=0,n.cssBefore.top=0,n.cssBefore.height=0,n.animIn.height="show",n.animOut.height=0},t.fn.cycle.transitions.shuffle=function(e,i,n){var s,o=e.css("overflow","visible").width();for(i.css({left:0,top:0}),n.before.push(function(e,i,n){t.fn.cycle.commonReset(e,i,n,!0,!0,!0)}),n.speedAdjusted||(n.speed=n.speed/2,n.speedAdjusted=!0),n.random=0,n.shuffle=n.shuffle||{left:-o,top:15},n.els=[],s=0;s<i.length;s++)n.els.push(i[s]);for(s=0;s<n.currSlide;s++)n.els.push(n.els.shift());n.fxFn=function(e,i,n,s,o){n.rev&&(o=!o);var a=o?t(e):t(i);t(i).css(n.cssBefore);var r=n.slideCount;a.animate(n.shuffle,n.speedIn,n.easeIn,function(){for(var i=t.fn.cycle.hopsFromLast(n,o),l=0;i>l;l++)o?n.els.push(n.els.shift()):n.els.unshift(n.els.pop());if(o)for(var h=0,c=n.els.length;c>h;h++)t(n.els[h]).css("z-index",c-h+r);else{var u=t(e).css("z-index");a.css("z-index",parseInt(u,10)+1+r)}a.animate({left:0,top:0},n.speedOut,n.easeOut,function(){t(o?this:e).hide(),s&&s()})})},t.extend(n.cssBefore,{display:"block",opacity:1,top:0,left:0})},t.fn.cycle.transitions.turnUp=function(e,i,n){n.before.push(function(e,i,n){t.fn.cycle.commonReset(e,i,n,!0,!1),n.cssBefore.top=i.cycleH,n.animIn.height=i.cycleH,n.animOut.width=i.cycleW}),n.cssFirst.top=0,n.cssBefore.left=0,n.cssBefore.height=0,n.animIn.top=0,n.animOut.height=0},t.fn.cycle.transitions.turnDown=function(e,i,n){n.before.push(function(e,i,n){t.fn.cycle.commonReset(e,i,n,!0,!1),n.animIn.height=i.cycleH,n.animOut.top=e.cycleH}),n.cssFirst.top=0,n.cssBefore.left=0,n.cssBefore.top=0,n.cssBefore.height=0,n.animOut.height=0},t.fn.cycle.transitions.turnLeft=function(e,i,n){n.before.push(function(e,i,n){t.fn.cycle.commonReset(e,i,n,!1,!0),n.cssBefore.left=i.cycleW,n.animIn.width=i.cycleW}),n.cssBefore.top=0,n.cssBefore.width=0,n.animIn.left=0,n.animOut.width=0},t.fn.cycle.transitions.turnRight=function(e,i,n){n.before.push(function(e,i,n){t.fn.cycle.commonReset(e,i,n,!1,!0),n.animIn.width=i.cycleW,n.animOut.left=e.cycleW}),t.extend(n.cssBefore,{top:0,left:0,width:0}),n.animIn.left=0,n.animOut.width=0},t.fn.cycle.transitions.zoom=function(e,i,n){n.before.push(function(e,i,n){t.fn.cycle.commonReset(e,i,n,!1,!1,!0),n.cssBefore.top=i.cycleH/2,n.cssBefore.left=i.cycleW/2,t.extend(n.animIn,{top:0,left:0,width:i.cycleW,height:i.cycleH}),t.extend(n.animOut,{width:0,height:0,top:e.cycleH/2,left:e.cycleW/2})}),n.cssFirst.top=0,n.cssFirst.left=0,n.cssBefore.width=0,n.cssBefore.height=0},t.fn.cycle.transitions.fadeZoom=function(e,i,n){n.before.push(function(e,i,n){t.fn.cycle.commonReset(e,i,n,!1,!1),n.cssBefore.left=i.cycleW/2,n.cssBefore.top=i.cycleH/2,t.extend(n.animIn,{top:0,left:0,width:i.cycleW,height:i.cycleH})}),n.cssBefore.width=0,n.cssBefore.height=0,n.animOut.opacity=0},t.fn.cycle.transitions.blindX=function(e,i,n){var s=e.css("overflow","hidden").width();n.before.push(function(e,i,n){t.fn.cycle.commonReset(e,i,n),n.animIn.width=i.cycleW,n.animOut.left=e.cycleW}),n.cssBefore.left=s,n.cssBefore.top=0,n.animIn.left=0,n.animOut.left=s},t.fn.cycle.transitions.blindY=function(e,i,n){var s=e.css("overflow","hidden").height();n.before.push(function(e,i,n){t.fn.cycle.commonReset(e,i,n),n.animIn.height=i.cycleH,n.animOut.top=e.cycleH}),n.cssBefore.top=s,n.cssBefore.left=0,n.animIn.top=0,n.animOut.top=s},t.fn.cycle.transitions.blindZ=function(e,i,n){var s=e.css("overflow","hidden").height(),o=e.width();n.before.push(function(e,i,n){t.fn.cycle.commonReset(e,i,n),n.animIn.height=i.cycleH,n.animOut.top=e.cycleH}),n.cssBefore.top=s,n.cssBefore.left=o,n.animIn.top=0,n.animIn.left=0,n.animOut.top=s,n.animOut.left=o},t.fn.cycle.transitions.growX=function(e,i,n){n.before.push(function(e,i,n){t.fn.cycle.commonReset(e,i,n,!1,!0),n.cssBefore.left=this.cycleW/2,n.animIn.left=0,n.animIn.width=this.cycleW,n.animOut.left=0}),n.cssBefore.top=0,n.cssBefore.width=0},t.fn.cycle.transitions.growY=function(e,i,n){n.before.push(function(e,i,n){t.fn.cycle.commonReset(e,i,n,!0,!1),n.cssBefore.top=this.cycleH/2,n.animIn.top=0,n.animIn.height=this.cycleH,n.animOut.top=0}),n.cssBefore.height=0,n.cssBefore.left=0},t.fn.cycle.transitions.curtainX=function(e,i,n){n.before.push(function(e,i,n){t.fn.cycle.commonReset(e,i,n,!1,!0,!0),n.cssBefore.left=i.cycleW/2,n.animIn.left=0,n.animIn.width=this.cycleW,n.animOut.left=e.cycleW/2,n.animOut.width=0}),n.cssBefore.top=0,n.cssBefore.width=0},t.fn.cycle.transitions.curtainY=function(e,i,n){n.before.push(function(e,i,n){t.fn.cycle.commonReset(e,i,n,!0,!1,!0),n.cssBefore.top=i.cycleH/2,n.animIn.top=0,n.animIn.height=i.cycleH,n.animOut.top=e.cycleH/2,n.animOut.height=0}),n.cssBefore.height=0,n.cssBefore.left=0},t.fn.cycle.transitions.cover=function(e,i,n){var s=n.direction||"left",o=e.css("overflow","hidden").width(),a=e.height();n.before.push(function(e,i,n){t.fn.cycle.commonReset(e,i,n),n.cssAfter.display="","right"==s?n.cssBefore.left=-o:"up"==s?n.cssBefore.top=a:"down"==s?n.cssBefore.top=-a:n.cssBefore.left=o}),n.animIn.left=0,n.animIn.top=0,n.cssBefore.top=0,n.cssBefore.left=0},t.fn.cycle.transitions.uncover=function(e,i,n){var s=n.direction||"left",o=e.css("overflow","hidden").width(),a=e.height();n.before.push(function(e,i,n){t.fn.cycle.commonReset(e,i,n,!0,!0,!0),"right"==s?n.animOut.left=o:"up"==s?n.animOut.top=-a:"down"==s?n.animOut.top=a:n.animOut.left=-o}),n.animIn.left=0,n.animIn.top=0,n.cssBefore.top=0,n.cssBefore.left=0},t.fn.cycle.transitions.toss=function(e,i,n){var s=e.css("overflow","visible").width(),o=e.height();n.before.push(function(e,i,n){t.fn.cycle.commonReset(e,i,n,!0,!0,!0),n.animOut.left||n.animOut.top?n.animOut.opacity=0:t.extend(n.animOut,{left:2*s,top:-o/2,opacity:0})}),n.cssBefore.left=0,n.cssBefore.top=0,n.animIn.left=0},t.fn.cycle.transitions.wipe=function(e,i,n){var s=e.css("overflow","hidden").width(),o=e.height();n.cssBefore=n.cssBefore||{};var a;if(n.clip)if(/l2r/.test(n.clip))a="rect(0px 0px "+o+"px 0px)";else if(/r2l/.test(n.clip))a="rect(0px "+s+"px "+o+"px "+s+"px)";else if(/t2b/.test(n.clip))a="rect(0px "+s+"px 0px 0px)";else if(/b2t/.test(n.clip))a="rect("+o+"px "+s+"px "+o+"px 0px)";else if(/zoom/.test(n.clip)){var r=parseInt(o/2,10),l=parseInt(s/2,10);a="rect("+r+"px "+l+"px "+r+"px "+l+"px)"}n.cssBefore.clip=n.cssBefore.clip||a||"rect(0px 0px 0px 0px)";var h=n.cssBefore.clip.match(/(\d+)/g),c=parseInt(h[0],10),u=parseInt(h[1],10),d=parseInt(h[2],10),p=parseInt(h[3],10);n.before.push(function(e,i,n){if(e!=i){var a=t(e),r=t(i);t.fn.cycle.commonReset(e,i,n,!0,!0,!1),n.cssAfter.display="block";var l=1,h=parseInt(n.speedIn/13,10)-1;!function f(){var t=c?c-parseInt(l*(c/h),10):0,e=p?p-parseInt(l*(p/h),10):0,i=o>d?d+parseInt(l*((o-d)/h||1),10):o,n=s>u?u+parseInt(l*((s-u)/h||1),10):s;r.css({clip:"rect("+t+"px "+n+"px "+i+"px "+e+"px)"}),l++<=h?setTimeout(f,13):a.css("display","none")}()}}),t.extend(n.cssBefore,{display:"block",opacity:1,top:0,left:0}),n.animIn={left:0},n.animOut={left:0}}}(jQuery),function(t){t.fn.extend({actual:function(e,i){if(!this[e])throw'$.actual => The jQuery method "'+e+'" you called does not exist';var n,s,o={absolute:!1,clone:!1,includeMargin:!1},a=t.extend(o,i),r=this.eq(0);if(a.clone===!0)n=function(){var t="position: absolute !important; top: -1000 !important; ";r=r.clone().attr("style",t).appendTo("body")},s=function(){r.remove()};else{var l,h=[],c="";n=function(){l=t.fn.jquery>="1.8.0"?r.parents().addBack().filter(":hidden"):r.parents().andSelf().filter(":hidden"),c+="visibility: hidden !important; display: block !important; ",a.absolute===!0&&(c+="position: absolute !important; "),l.each(function(){var e=t(this);h.push(e.attr("style")),e.attr("style",c)})},s=function(){l.each(function(e){var i=t(this),n=h[e];void 0===n?i.removeAttr("style"):i.attr("style",n)})}}n();var u=/(outer)/g.test(e)?r[e](a.includeMargin):r[e]();return s(),u}})}(jQuery),function(t,e){var i="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";t.fn.imagesLoaded=function(n){function s(){var e=t(u),i=t(d);r&&(d.length?r.reject(h,e,i):r.resolve(h)),t.isFunction(n)&&n.call(a,h,e,i)}function o(e,n){e.src===i||-1!==t.inArray(e,c)||(c.push(e),n?d.push(e):u.push(e),t.data(e,"imagesLoaded",{isBroken:n,src:e.src}),l&&r.notifyWith(t(e),[n,h,t(u),t(d)]),h.length===c.length&&(setTimeout(s),h.unbind(".imagesLoaded")))}var a=this,r=t.isFunction(t.Deferred)?t.Deferred():0,l=t.isFunction(r.notify),h=a.find("img").add(a.filter("img")),c=[],u=[],d=[];return t.isPlainObject(n)&&t.each(n,function(t,e){"callback"===t?n=e:r&&r[t](e)}),h.length?h.bind("load.imagesLoaded error.imagesLoaded",function(t){o(t.target,"error"===t.type)}).each(function(n,s){var a=s.src,r=t.data(s,"imagesLoaded");r&&r.src===a?o(s,r.isBroken):s.complete&&s.naturalWidth!==e?o(s,0===s.naturalWidth||0===s.naturalHeight):(s.readyState||s.complete)&&(s.src=i,s.src=a)}):s(),r?r.promise(a):a}}(jQuery),/**
 * jQuery Masonry v2.1.07
 * A dynamic layout plugin for jQuery
 * The flip-side of CSS Floats
 * http://masonry.desandro.com
 *
 * Licensed under the MIT license.
 * Copyright 2012 David DeSandro
 */
function(t,e){"use strict";var i,n=e.event,s=e.event.handle?"handle":"dispatch";n.special.smartresize={setup:function(){e(this).bind("resize",n.special.smartresize.handler)},teardown:function(){e(this).unbind("resize",n.special.smartresize.handler)},handler:function(t,e){var o=this,a=arguments;t.type="smartresize",i&&clearTimeout(i),i=setTimeout(function(){n[s].apply(o,a)},"execAsap"===e?0:100)}},e.fn.smartresize=function(t){return t?this.bind("smartresize",t):this.trigger("smartresize",["execAsap"])},e.Mason=function(t,i){this.element=e(i),this._create(t),this._init()},e.Mason.settings={isResizable:!0,isAnimated:!1,animationOptions:{queue:!1,duration:500},gutterWidth:0,isRTL:!1,isFitWidth:!1,containerStyle:{position:"relative"}},e.Mason.prototype={_filterFindBricks:function(t){var e=this.options.itemSelector;return e?t.filter(e).add(t.find(e)):t},_getBricks:function(t){var e=this._filterFindBricks(t).css({position:"absolute"}).addClass("masonry-brick");return e},_create:function(i){this.options=e.extend(!0,{},e.Mason.settings,i),this.styleQueue=[];var n=this.element[0].style;this.originalStyle={height:n.height||""};var s=this.options.containerStyle;for(var o in s)this.originalStyle[o]=n[o]||"";this.element.css(s),this.horizontalDirection=this.options.isRTL?"right":"left";var a=this.element.css("padding-"+this.horizontalDirection),r=this.element.css("padding-top");this.offset={x:a?parseInt(a,10):0,y:r?parseInt(r,10):0},this.isFluid=this.options.columnWidth&&"function"==typeof this.options.columnWidth;var l=this;setTimeout(function(){l.element.addClass("masonry")},0),this.options.isResizable&&e(t).bind("smartresize.masonry",function(){l.resize()}),this.reloadItems()},_init:function(t){this._getColumns(),this._reLayout(t)},option:function(t){e.isPlainObject(t)&&(this.options=e.extend(!0,this.options,t))},layout:function(t,e){for(var i=0,n=t.length;n>i;i++)this._placeBrick(t[i]);var s={};if(s.height=Math.max.apply(Math,this.colYs),this.options.isFitWidth){var o=0;for(i=this.cols;--i&&0===this.colYs[i];)o++;s.width=(this.cols-o)*this.columnWidth-this.options.gutterWidth}this.styleQueue.push({$el:this.element,style:s});var a,r=this.isLaidOut?this.options.isAnimated?"animate":"css":"css",l=this.options.animationOptions;for(i=0,n=this.styleQueue.length;n>i;i++)a=this.styleQueue[i],a.$el[r](a.style,l);this.styleQueue=[],e&&e.call(t),this.isLaidOut=!0},_getColumns:function(){var t=this.options.isFitWidth?this.element.parent():this.element,e=t.width();this.columnWidth=this.isFluid?this.options.columnWidth(e):this.options.columnWidth||this.$bricks.outerWidth(!0)||e,this.columnWidth+=this.options.gutterWidth,this.cols=Math.floor((e+this.options.gutterWidth)/this.columnWidth),this.cols=Math.max(this.cols,1)},_placeBrick:function(t){var i,n,s,o,a,r=e(t);if(i=Math.ceil(r.outerWidth(!0)/this.columnWidth),i=Math.min(i,this.cols),1===i)s=this.colYs;else for(n=this.cols+1-i,s=[],a=0;n>a;a++)o=this.colYs.slice(a,a+i),s[a]=Math.max.apply(Math,o);for(var l=Math.min.apply(Math,s),h=0,c=0,u=s.length;u>c;c++)if(s[c]===l){h=c;break}var d={top:l+this.offset.y};d[this.horizontalDirection]=this.columnWidth*h+this.offset.x,this.styleQueue.push({$el:r,style:d});var p=l+r.outerHeight(!0),f=this.cols+1-u;for(c=0;f>c;c++)this.colYs[h+c]=p},resize:function(){var t=this.cols;this._getColumns(),(this.isFluid||this.cols!==t)&&this._reLayout()},_reLayout:function(t){var e=this.cols;for(this.colYs=[];e--;)this.colYs.push(0);this.layout(this.$bricks,t)},reloadItems:function(){this.$bricks=this._getBricks(this.element.children())},reload:function(t){this.reloadItems(),this._init(t)},appended:function(t,e,i){if(e){this._filterFindBricks(t).css({top:this.element.height()});var n=this;setTimeout(function(){n._appended(t,i)},1)}else this._appended(t,i)},_appended:function(t,e){var i=this._getBricks(t);this.$bricks=this.$bricks.add(i),this.layout(i,e)},remove:function(t){this.$bricks=this.$bricks.not(t),t.remove()},destroy:function(){this.$bricks.removeClass("masonry-brick").each(function(){this.style.position="",this.style.top="",this.style.left=""});var i=this.element[0].style;for(var n in this.originalStyle)i[n]=this.originalStyle[n];this.element.unbind(".masonry").removeClass("masonry").removeData("masonry"),e(t).unbind(".masonry")}},e.fn.imagesLoaded=function(t){function i(){t.call(s,o)}function n(t){var s=t.target;s.src!==r&&-1===e.inArray(s,l)&&(l.push(s),--a<=0&&(setTimeout(i),o.unbind(".imagesLoaded",n)))}var s=this,o=s.find("img").add(s.filter("img")),a=o.length,r="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",l=[];return a||i(),o.bind("load.imagesLoaded error.imagesLoaded",n).each(function(){var t=this.src;this.src=r,this.src=t}),s};var o=function(e){t.console&&t.console.error(e)};e.fn.masonry=function(t){if("string"==typeof t){var i=Array.prototype.slice.call(arguments,1);this.each(function(){var n=e.data(this,"masonry");return n?e.isFunction(n[t])&&"_"!==t.charAt(0)?(n[t].apply(n,i),void 0):(o("no such method '"+t+"' for masonry instance"),void 0):(o("cannot call methods on masonry prior to initialization; attempted to call method '"+t+"'"),void 0)})}else this.each(function(){var i=e.data(this,"masonry");i?(i.option(t||{}),i._init()):e.data(this,"masonry",new e.Mason(t,this))});return this}}(window,jQuery),function(t,e,i){e.infinitescroll=function(t,i,n){this.element=e(n),this._create(t,i)||(this.failed=!0)},e.infinitescroll.defaults={loading:{finished:i,finishedMsg:"<em>Congratulations, you've reached the end of the internet.</em>",img:"data:image/gif;base64,R0lGODlh3AATAPQeAPDy+MnQ6LW/4N3h8MzT6rjC4sTM5r/I5NHX7N7j8c7U6tvg8OLl8uXo9Ojr9b3G5MfP6Ovu9tPZ7PT1+vX2+tbb7vf4+8/W69jd7rC73vn5/O/x+K243ai02////wAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQECgD/ACwAAAAA3AATAAAF/6AnjmRpnmiqrmzrvnAsz3Rt33iu73zv/8CgcEj0BAScpHLJbDqf0Kh0Sq1ar9isdioItAKGw+MAKYMFhbF63CW438f0mg1R2O8EuXj/aOPtaHx7fn96goR4hmuId4qDdX95c4+RBIGCB4yAjpmQhZN0YGYGXitdZBIVGAsLoq4BBKQDswm1CQRkcG6ytrYKubq8vbfAcMK9v7q7EMO1ycrHvsW6zcTKsczNz8HZw9vG3cjTsMIYqQkCLBwHCgsMDQ4RDAYIqfYSFxDxEfz88/X38Onr16+Bp4ADCco7eC8hQYMAEe57yNCew4IVBU7EGNDiRn8Z831cGLHhSIgdFf9chIeBg7oA7gjaWUWTVQAGE3LqBDCTlc9WOHfm7PkTqNCh54rePDqB6M+lR536hCpUqs2gVZM+xbrTqtGoWqdy1emValeXKzggYBBB5y1acFNZmEvXAoN2cGfJrTv3bl69Ffj2xZt3L1+/fw3XRVw4sGDGcR0fJhxZsF3KtBTThZxZ8mLMgC3fRatCbYMNFCzwLEqLgE4NsDWs/tvqdezZf13Hvk2A9Szdu2X3pg18N+68xXn7rh1c+PLksI/Dhe6cuO3ow3NfV92bdArTqC2Ebd3A8vjf5QWfH6Bg7Nz17c2fj69+fnq+8N2Lty+fuP78/eV2X13neIcCeBRwxorbZrA1ANoCDGrgoG8RTshahQ9iSKEEzUmYIYfNWViUhheCGJyIP5E4oom7WWjgCeBFAJNv1DVV01MAdJhhjdkplWNzO/5oXI846njjVEIqR2OS2B1pE5PVscajkxhMycqLJghQSwT40PgfAl4GqNSXYdZXJn5gSkmmmmJu1aZYb14V51do+pTOCmA40AqVCIhG5IJ9PvYnhIFOxmdqhpaI6GeHCtpooisuutmg+Eg62KOMKuqoTaXgicQWoIYq6qiklmoqFV0UoeqqrLbq6quwxirrrLTWauutJ4QAACH5BAUKABwALAcABADOAAsAAAX/IPd0D2dyRCoUp/k8gpHOKtseR9yiSmGbuBykler9XLAhkbDavXTL5k2oqFqNOxzUZPU5YYZd1XsD72rZpBjbeh52mSNnMSC8lwblKZGwi+0QfIJ8CncnCoCDgoVnBHmKfByGJimPkIwtiAeBkH6ZHJaKmCeVnKKTHIihg5KNq4uoqmEtcRUtEREMBggtEr4QDrjCuRC8h7/BwxENeicSF8DKy82pyNLMOxzWygzFmdvD2L3P0dze4+Xh1Arkyepi7dfFvvTtLQkZBC0T/FX3CRgCMOBHsJ+EHYQY7OinAGECgQsB+Lu3AOK+CewcWjwxQeJBihtNGHSoQOE+iQ3//4XkwBBhRZMcUS6YSXOAwIL8PGqEaSJCiYt9SNoCmnJPAgUVLChdaoFBURN8MAzl2PQphwQLfDFd6lTowglHve6rKpbjhK7/pG5VinZP1qkiz1rl4+tr2LRwWU64cFEihwEtZgbgR1UiHaMVvxpOSwBA37kzGz9e8G+B5MIEKLutOGEsAH2ATQwYfTmuX8aETWdGPZmiZcccNSzeTCA1Sw0bdiitC7LBWgu8jQr8HRzqgpK6gX88QbrB14z/kF+ELpwB8eVQj/JkqdylAudji/+ts3039vEEfK8Vz2dlvxZKG0CmbkKDBvllRd6fCzDvBLKBDSCeffhRJEFebFk1k/Mv9jVIoIJZSeBggwUaNeB+Qk34IE0cXlihcfRxkOAJFFhwGmKlmWDiakZhUJtnLBpnWWcnKaAZcxI0piFGGLBm1mc90kajSCveeBVWKeYEoU2wqeaQi0PetoE+rr14EpVC7oAbAUHqhYExbn2XHHsVqbcVew9tx8+XJKk5AZsqqdlddGpqAKdbAYBn1pcczmSTdWvdmZ17c1b3FZ99vnTdCRFM8OEcAhLwm1NdXnWcBBSMRWmfkWZqVlsmLIiAp/o1gGV2vpS4lalGYsUOqXrddcKCmK61aZ8SjEpUpVFVoCpTj4r661Km7kBHjrDyc1RAIQAAIfkEBQoAGwAsBwAEAM4ACwAABf/gtmUCd4goQQgFKj6PYKi0yrrbc8i4ohQt12EHcal+MNSQiCP8gigdz7iCioaCIvUmZLp8QBzW0EN2vSlCuDtFKaq4RyHzQLEKZNdiQDhRDVooCwkbfm59EAmKi4SGIm+AjIsKjhsqB4mSjT2IOIOUnICeCaB/mZKFNTSRmqVpmJqklSqskq6PfYYCDwYHDC4REQwGCBLGxxIQDsHMwhAIX8bKzcENgSLGF9PU1j3Sy9zX2NrgzQziChLk1BHWxcjf7N046tvN82715czn9Pryz6Ilc4ACj4EBOCZM8KEnAYYADBRKnACAYUMFv1wotIhCEcaJCisqwJFgAUSQGyX/kCSVUUTIdKMwJlyo0oXHlhskwrTJciZHEXsgaqS4s6PJiCAr1uzYU8kBBSgnWFqpoMJMUjGtDmUwkmfVmVypakWhEKvXsS4nhLW5wNjVroJIoc05wSzTr0PtiigpYe4EC2vj4iWrFu5euWIMRBhacaVJhYQBEFjA9jHjyQ0xEABwGceGAZYjY0YBOrRLCxUp29QM+bRkx5s7ZyYgVbTqwwti2ybJ+vLtDYpycyZbYOlptxdx0kV+V7lC5iJAyyRrwYKxAdiz82ng0/jnAdMJFz0cPi104Ec1Vj9/M6F173vKL/feXv156dw11tlqeMMnv4V5Ap53GmjQQH97nFfg+IFiucfgRX5Z8KAgbUlQ4IULIlghhhdOSB6AgX0IVn8eReghen3NRIBsRgnH4l4LuEidZBjwRpt6NM5WGwoW0KSjCwX6yJSMab2GwwAPDXfaBCtWpluRTQqC5JM5oUZAjUNS+VeOLWpJEQ7VYQANW0INJSZVDFSnZphjSikfmzE5N4EEbQI1QJmnWXCmHulRp2edwDXF43txukenJwvI9xyg9Q26Z3MzGUcBYFEChZh6DVTq34AU8Iflh51Sd+CnKFYQ6mmZkhqfBKfSxZWqA9DZanWjxmhrWwi0qtCrt/43K6WqVjjpmhIqgEGvculaGKklKstAACEAACH5BAUKABwALAcABADOAAsAAAX/ICdyQmaMYyAUqPgIBiHPxNpy79kqRXH8wAPsRmDdXpAWgWdEIYm2llCHqjVHU+jjJkwqBTecwItShMXkEfNWSh8e1NGAcLgpDGlRgk7EJ/6Ae3VKfoF/fDuFhohVeDeCfXkcCQqDVQcQhn+VNDOYmpSWaoqBlUSfmowjEA+iEAEGDRGztAwGCDcXEA60tXEiCrq8vREMEBLIyRLCxMWSHMzExnbRvQ2Sy7vN0zvVtNfU2tLY3rPgLdnDvca4VQS/Cpk3ABwSLQkYAQwT/P309vcI7OvXr94jBQMJ/nskkGA/BQBRLNDncAIAiDcG6LsxAWOLiQzmeURBKWSLCQbv/1F0eDGinJUKR47YY1IEgQASKk7Yc7ACRwZm7mHweRJoz59BJUogisKCUaFMR0x4SlJBVBFTk8pZivTR0K73rN5wqlXEAq5Fy3IYgHbEzQ0nLy4QSoCjXLoom96VOJEeCosK5n4kkFfqXjl94wa+l1gvAcGICbewAOAxY8l/Ky/QhAGz4cUkGxu2HNozhwMGBnCUqUdBg9UuW9eUynqSwLHIBujePef1ZGQZXcM+OFuEBeBhi3OYgLyqcuaxbT9vLkf4SeqyWxSQpKGB2gQpm1KdWbu72rPRzR9Ne2Nu9Kzr/1Jqj0yD/fvqP4aXOt5sW/5qsXXVcv1Nsp8IBUAmgswGF3llGgeU1YVXXKTN1FlhWFXW3gIE+DVChApysACHHo7Q4A35lLichh+ROBmLKAzgYmYEYDAhCgxKGOOMn4WR4kkDaoBBOxJtdNKQxFmg5JIWIBnQc07GaORfUY4AEkdV6jHlCEISSZ5yTXpp1pbGZbkWmcuZmQCaE6iJ0FhjMaDjTMsgZaNEHFRAQVp3bqXnZED1qYcECOz5V6BhSWCoVJQIKuKQi2KFKEkEFAqoAo7uYSmO3jk61wUUMKmknJ4SGimBmAa0qVQBhAAAIfkEBQoAGwAsBwAEAM4ACwAABf/gJm5FmRlEqhJC+bywgK5pO4rHI0D3pii22+Mg6/0Ej96weCMAk7cDkXf7lZTTnrMl7eaYoy10JN0ZFdco0XAuvKI6qkgVFJXYNwjkIBcNBgR8TQoGfRsJCRuCYYQQiI+ICosiCoGOkIiKfSl8mJkHZ4U9kZMbKaI3pKGXmJKrngmug4WwkhA0lrCBWgYFCCMQFwoQDRHGxwwGCBLMzRLEx8iGzMMO0cYNeCMKzBDW19lnF9DXDIY/48Xg093f0Q3s1dcR8OLe8+Y91OTv5wrj7o7B+7VNQqABIoRVCMBggsOHE36kSoCBIcSH3EbFangxogJYFi8CkJhqQciLJEf/LDDJEeJIBT0GsOwYUYJGBS0fjpQAMidGmyVP6sx4Y6VQhzs9VUwkwqaCCh0tmKoFtSMDmBOf9phg4SrVrROuasRQAaxXpVUhdsU6IsECZlvX3kwLUWzRt0BHOLTbNlbZG3vZinArge5Dvn7wbqtQkSYAAgtKmnSsYKVKo2AfW048uaPmG386i4Q8EQMBAIAnfB7xBxBqvapJ9zX9WgRS2YMpnvYMGdPK3aMjt/3dUcNI4blpj7iwkMFWDXDvSmgAlijrt9RTR78+PS6z1uAJZIe93Q8g5zcsWCi/4Y+C8bah5zUv3vv89uft30QP23punGCx5954oBBwnwYaNCDY/wYrsYeggnM9B2Fpf8GG2CEUVWhbWAtGouEGDy7Y4IEJVrbSiXghqGKIo7z1IVcXIkKWWR361QOLWWnIhwERpLaaCCee5iMBGJQmJGyPFTnbkfHVZGRtIGrg5HALEJAZbu39BuUEUmq1JJQIPtZilY5hGeSWsSk52G9XqsmgljdIcABytq13HyIM6RcUA+r1qZ4EBF3WHWB29tBgAzRhEGhig8KmqKFv8SeCeo+mgsF7YFXa1qWSbkDpom/mqR1PmHCqJ3fwNRVXjC7S6CZhFVCQ2lWvZiirhQq42SACt25IK2hv8TprriUV1usGgeka7LFcNmCldMLi6qZMgFLgpw16Cipb7bC1knXsBiEAACH5BAUKABsALAcABADOAAsAAAX/4FZsJPkUmUGsLCEUTywXglFuSg7fW1xAvNWLF6sFFcPb42C8EZCj24EJdCp2yoegWsolS0Uu6fmamg8n8YYcLU2bXSiRaXMGvqV6/KAeJAh8VgZqCX+BexCFioWAYgqNi4qAR4ORhRuHY408jAeUhAmYYiuVlpiflqGZa5CWkzc5fKmbbhIpsAoQDRG8vQwQCBLCwxK6vb5qwhfGxxENahvCEA7NzskSy7vNzzzK09W/PNHF1NvX2dXcN8K55cfh69Luveol3vO8zwi4Yhj+AQwmCBw4IYclDAAJDlQggVOChAoLKkgFkSCAHDwWLKhIEOONARsDKryogFPIiAUb/95gJNIiw4wnI778GFPhzBKFOAq8qLJEhQpiNArjMcHCmlTCUDIouTKBhApELSxFWiGiVKY4E2CAekPgUphDu0742nRrVLJZnyrFSqKQ2ohoSYAMW6IoDpNJ4bLdILTnAj8KUF7UeENjAKuDyxIgOuGiOI0EBBMgLNew5AUrDTMGsFixwBIaNCQuAXJB57qNJ2OWm2Aj4skwCQCIyNkhhtMkdsIuodE0AN4LJDRgfLPtn5YDLdBlraAByuUbBgxQwICxMOnYpVOPej074OFdlfc0TqC62OIbcppHjV4o+LrieWhfT8JC/I/T6W8oCl29vQ0XjLdBaA3s1RcPBO7lFvpX8BVoG4O5jTXRQRDuJ6FDTzEWF1/BCZhgbyAKE9qICYLloQYOFtahVRsWYlZ4KQJHlwHS/IYaZ6sZd9tmu5HQm2xi1UaTbzxYwJk/wBF5g5EEYOBZeEfGZmNdFyFZmZIR4jikbLThlh5kUUVJGmRT7sekkziRWUIACABk3T4qCsedgO4xhgGcY7q5pHJ4klBBTQRJ0CeHcoYHHUh6wgfdn9uJdSdMiebGJ0zUPTcoS286FCkrZxnYoYYKWLkBowhQoBeaOlZAgVhLidrXqg2GiqpQpZ4apwSwRtjqrB3muoF9BboaXKmshlqWqsWiGt2wphJkQbAU5hoCACH5BAUKABsALAcABADOAAsAAAX/oGFw2WZuT5oZROsSQnGaKjRvilI893MItlNOJ5v5gDcFrHhKIWcEYu/xFEqNv6B1N62aclysF7fsZYe5aOx2yL5aAUGSaT1oTYMBwQ5VGCAJgYIJCnx1gIOBhXdwiIl7d0p2iYGQUAQBjoOFSQR/lIQHnZ+Ue6OagqYzSqSJi5eTpTxGcjcSChANEbu8DBAIEsHBChe5vL13G7fFuscRDcnKuM3H0La3EA7Oz8kKEsXazr7Cw9/Gztar5uHHvte47MjktznZ2w0G1+D3BgirAqJmJMAQgMGEgwgn5Ei0gKDBhBMALGRYEOJBb5QcWlQo4cbAihZz3GgIMqFEBSM1/4ZEOWPAgpIIJXYU+PIhRG8ja1qU6VHlzZknJNQ6UanCjQkWCIGSUGEjAwVLjc44+DTqUQtPPS5gejUrTa5TJ3g9sWCr1BNUWZI161StiQUDmLYdGfesibQ3XMq1OPYthrwuA2yU2LBs2cBHIypYQPPlYAKFD5cVvNPtW8eVGbdcQADATsiNO4cFAPkvHpedPzc8kUcPgNGgZ5RNDZG05reoE9s2vSEP79MEGiQGy1qP8LA4ZcdtsJE48ONoLTBtTV0B9LsTnPceoIDBDQvS7W7vfjVY3q3eZ4A339J4eaAmKqU/sV58HvJh2RcnIBsDUw0ABqhBA5aV5V9XUFGiHfVeAiWwoFgJJrIXRH1tEMiDFV4oHoAEGlaWhgIGSGBO2nFomYY3mKjVglidaNYJGJDkWW2xxTfbjCbVaOGNqoX2GloR8ZeTaECS9pthRGJH2g0b3Agbk6hNANtteHD2GJUucfajCQBy5OOTQ25ZgUPvaVVQmbKh9510/qQpwXx3SQdfk8tZJOd5b6JJFplT3ZnmmX3qd5l1eg5q00HrtUkUn0AKaiGjClSAgKLYZcgWXwocGRcCFGCKwSB6ceqphwmYRUFYT/1WKlOdUpipmxW0mlCqHjYkAaeoZlqrqZ4qd+upQKaapn/AmgAegZ8KUtYtFAQQAgAh+QQFCgAbACwHAAQAzgALAAAF/+C2PUcmiCiZGUTrEkKBis8jQEquKwU5HyXIbEPgyX7BYa5wTNmEMwWsSXsqFbEh8DYs9mrgGjdK6GkPY5GOeU6ryz7UFopSQEzygOGhJBjoIgMDBAcBM0V/CYqLCQqFOwobiYyKjn2TlI6GKC2YjJZknouaZAcQlJUHl6eooJwKooobqoewrJSEmyKdt59NhRKFMxLEEA4RyMkMEAjDEhfGycqAG8TQx9IRDRDE3d3R2ctD1RLg0ttKEnbY5wZD3+zJ6M7X2RHi9Oby7u/r9g38UFjTh2xZJBEBMDAboogAgwkQI07IMUORwocSJwCgWDFBAIwZOaJIsOBjRogKJP8wTODw5ESVHVtm3AhzpEeQElOuNDlTZ0ycEUWKWFASqEahGwYUPbnxoAgEdlYSqDBkgoUNClAlIHbSAoOsqCRQnQHxq1axVb06FWFxLIqyaze0Tft1JVqyE+pWXMD1pF6bYl3+HTqAWNW8cRUFzmih0ZAAB2oGKukSAAGGRHWJgLiR6AylBLpuHKKUMlMCngMpDSAa9QIUggZVVvDaJobLeC3XZpvgNgCmtPcuwP3WgmXSq4do0DC6o2/guzcseECtUoO0hmcsGKDgOt7ssBd07wqesAIGZC1YIBa7PQHvb1+SFo+++HrJSQfB33xfav3i5eX3Hnb4CTJgegEq8tH/YQEOcIJzbm2G2EoYRLgBXFpVmFYDcREV4HIcnmUhiGBRouEMJGJGzHIspqgdXxK0yCKHRNXoIX4uorCdTyjkyNtdPWrA4Up82EbAbzMRxxZRR54WXVLDIRmRcag5d2R6ugl3ZXzNhTecchpMhIGVAKAYpgJjjsSklBEd99maZoo535ZvdamjBEpusJyctg3h4X8XqodBMx0tiNeg/oGJaKGABpogS40KSqiaEgBqlQWLUtqoVQnytekEjzo0hHqhRorppOZt2p923M2AAV+oBtpAnnPNoB6HaU6mAAIU+IXmi3j2mtFXuUoHKwXpzVrsjcgGOauKEjQrwq157hitGq2NoWmjh7z6Wmxb0m5w66+2VRAuXN/yFUAIACH5BAUKABsALAcABADOAAsAAAX/4CZuRiaM45MZqBgIRbs9AqTcuFLE7VHLOh7KB5ERdjJaEaU4ClO/lgKWjKKcMiJQ8KgumcieVdQMD8cbBeuAkkC6LYLhOxoQ2PF5Ys9PKPBMen17f0CCg4VSh32JV4t8jSNqEIOEgJKPlkYBlJWRInKdiJdkmQlvKAsLBxdABA4RsbIMBggtEhcQsLKxDBC2TAS6vLENdJLDxMZAubu8vjIbzcQRtMzJz79S08oQEt/guNiyy7fcvMbh4OezdAvGrakLAQwyABsELQkY9BP+//ckyPDD4J9BfAMh1GsBoImMeQUN+lMgUJ9CiRMa5msxoB9Gh/o8GmxYMZXIgxtR/yQ46S/gQAURR0pDwYDfywoyLPip5AdnCwsMFPBU4BPFhKBDi444quCmDKZOfwZ9KEGpCKgcN1jdALSpPqIYsabS+nSqvqplvYqQYAeDPgwKwjaMtiDl0oaqUAyo+3TuWwUAMPpVCfee0cEjVBGQq2ABx7oTWmQk4FglZMGN9fGVDMCuiH2AOVOu/PmyxM630gwM0CCn6q8LjVJ8GXvpa5Uwn95OTC/nNxkda1/dLSK475IjCD6dHbK1ZOa4hXP9DXs5chJ00UpVm5xo2qRpoxptwF2E4/IbJpB/SDz9+q9b1aNfQH08+p4a8uvX8B53fLP+ycAfemjsRUBgp1H20K+BghHgVgt1GXZXZpZ5lt4ECjxYR4ScUWiShEtZqBiIInRGWnERNnjiBglw+JyGnxUmGowsyiiZg189lNtPGACjV2+S9UjbU0JWF6SPvEk3QZEqsZYTk3UAaRSUnznJI5LmESCdBVSyaOWUWLK4I5gDUYVeV1T9l+FZClCAUVA09uSmRHBCKAECFEhW51ht6rnmWBXkaR+NjuHpJ40D3DmnQXt2F+ihZxlqVKOfQRACACH5BAUKABwALAcABADOAAsAAAX/ICdyUCkUo/g8mUG8MCGkKgspeC6j6XEIEBpBUeCNfECaglBcOVfJFK7YQwZHQ6JRZBUqTrSuVEuD3nI45pYjFuWKvjjSkCoRaBUMWxkwBGgJCXspQ36Bh4EEB0oKhoiBgyNLjo8Ki4QElIiWfJqHnISNEI+Ql5J9o6SgkqKkgqYihamPkW6oNBgSfiMMDQkGCBLCwxIQDhHIyQwQCGMKxsnKVyPCF9DREQ3MxMPX0cu4wt7J2uHWx9jlKd3o39MiuefYEcvNkuLt5O8c1ePI2tyELXGQwoGDAQf+iEC2xByDCRAjTlAgIUWCBRgCPJQ4AQBFXAs0coT40WLIjRxL/47AcHLkxIomRXL0CHPERZkpa4q4iVKiyp0tR/7kwHMkTUBBJR5dOCEBAVcKKtCAyOHpowXCpk7goABqBZdcvWploACpBKkpIJI1q5OD2rIWE0R1uTZu1LFwbWL9OlKuWb4c6+o9i3dEgw0RCGDUG9KlRw56gDY2qmCByZBaASi+TACA0TucAaTteCcy0ZuOK3N2vJlx58+LRQyY3Xm0ZsgjZg+oPQLi7dUcNXi0LOJw1pgNtB7XG6CBy+U75SYfPTSQAgZTNUDnQHt67wnbZyvwLgKiMN3oCZB3C76tdewpLFgIP2C88rbi4Y+QT3+8S5USMICZXWj1pkEDeUU3lOYGB3alSoEiMIjgX4WlgNF2EibIwQIXauWXSRg2SAOHIU5IIIMoZkhhWiJaiFVbKo6AQEgQXrTAazO1JhkBrBG3Y2Y6EsUhaGn95hprSN0oWpFE7rhkeaQBchGOEWnwEmc0uKWZj0LeuNV3W4Y2lZHFlQCSRjTIl8uZ+kG5HU/3sRlnTG2ytyadytnD3HrmuRcSn+0h1dycexIK1KCjYaCnjCCVqOFFJTZ5GkUUjESWaUIKU2lgCmAKKQIUjHapXRKE+t2og1VgankNYnohqKJ2CmKplso6GKz7WYCgqxeuyoF8u9IQAgA7",msg:null,msgText:"<em>Loading the next set of posts...</em>",selector:null,speed:"fast",start:i},state:{isDuringAjax:!1,isInvalidPage:!1,isDestroyed:!1,isDone:!1,isPaused:!1,currPage:1},debug:!1,behavior:i,binder:e(t),nextSelector:"div.navigation a:first",navSelector:"div.navigation",contentSelector:null,extraScrollPx:150,itemSelector:"div.post",animate:!1,pathParse:i,dataType:"html",appendCallback:!0,bufferPx:40,errorCallback:function(){},infid:0,pixelsFromNavToBottom:i,path:i,prefill:!1,maxPage:i},e.infinitescroll.prototype={_binding:function(t){var e=this,n=e.options;return n.v="2.0b2.120520",n.behavior&&this["_binding_"+n.behavior]!==i?(this["_binding_"+n.behavior].call(this),void 0):"bind"!==t&&"unbind"!==t?(this._debug("Binding value  "+t+" not valid"),!1):("unbind"===t?this.options.binder.unbind("smartscroll.infscr."+e.options.infid):this.options.binder[t]("smartscroll.infscr."+e.options.infid,function(){e.scroll()}),this._debug("Binding",t),void 0)},_create:function(n,s){var o=e.extend(!0,{},e.infinitescroll.defaults,n);this.options=o;var a=e(t),r=this;if(!r._validate(n))return!1;var l=e(o.nextSelector).attr("href");if(!l)return this._debug("Navigation selector not found"),!1;o.path=o.path||this._determinepath(l),o.contentSelector=o.contentSelector||this.element,o.loading.selector=o.loading.selector||o.contentSelector,o.loading.msg=o.loading.msg||e('<div id="infscr-loading"><img alt="Loading..." src="'+o.loading.img+'" /><div>'+o.loading.msgText+"</div></div>"),(new Image).src=o.loading.img,o.pixelsFromNavToBottom===i&&(o.pixelsFromNavToBottom=e(document).height()-e(o.navSelector).offset().top);var h=this;return o.loading.start=o.loading.start||function(){e(o.navSelector).hide(),o.loading.msg.appendTo(o.loading.selector).show(o.loading.speed,e.proxy(function(){this.beginAjax(o)},h))},o.loading.finished=o.loading.finished||function(){o.loading.msg.fadeOut(o.loading.speed)},o.callback=function(t,n,r){o.behavior&&t["_callback_"+o.behavior]!==i&&t["_callback_"+o.behavior].call(e(o.contentSelector)[0],n,r),s&&s.call(e(o.contentSelector)[0],n,o,r),o.prefill&&a.bind("resize.infinite-scroll",t._prefill)},n.debug&&(!Function.prototype.bind||"object"!=typeof console&&"function"!=typeof console||"object"!=typeof console.log||["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(t){console[t]=this.call(console[t],console)},Function.prototype.bind)),this._setup(),o.prefill&&this._prefill(),!0},_prefill:function(){function i(){return s.height()<=o.height()}var n=this,s=e(document),o=e(t);this._prefill=function(){i()&&n.scroll(),o.bind("resize.infinite-scroll",function(){i()&&(o.unbind("resize.infinite-scroll"),n.scroll())})},this._prefill()},_debug:function(){!0===this.options.debug&&("undefined"!=typeof console&&"function"==typeof console.log?1===Array.prototype.slice.call(arguments).length&&"string"==typeof Array.prototype.slice.call(arguments)[0]?console.log(Array.prototype.slice.call(arguments).toString()):console.log(Array.prototype.slice.call(arguments)):Function.prototype.bind||"undefined"==typeof console||"object"!=typeof console.log||Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments)))},_determinepath:function(t){var e=this.options;if(e.behavior&&this["_determinepath_"+e.behavior]!==i)return this["_determinepath_"+e.behavior].call(this,t);if(e.pathParse)return this._debug("pathParse manual"),e.pathParse(t,this.options.state.currPage+1);if(t.match(/^(.*?)\b2\b(.*?$)/))t=t.match(/^(.*?)\b2\b(.*?$)/).slice(1);else if(t.match(/^(.*?)2(.*?$)/)){if(t.match(/^(.*?page=)2(\/.*|$)/))return t=t.match(/^(.*?page=)2(\/.*|$)/).slice(1);t=t.match(/^(.*?)2(.*?$)/).slice(1)}else{if(t.match(/^(.*?page=)1(\/.*|$)/))return t=t.match(/^(.*?page=)1(\/.*|$)/).slice(1);this._debug("Sorry, we couldn't parse your Next (Previous Posts) URL. Verify your the css selector points to the correct A tag. If you still get this error: yell, scream, and kindly ask for help at infinite-scroll.com."),e.state.isInvalidPage=!0}return this._debug("determinePath",t),t},_error:function(t){var e=this.options;return e.behavior&&this["_error_"+e.behavior]!==i?(this["_error_"+e.behavior].call(this,t),void 0):("destroy"!==t&&"end"!==t&&(t="unknown"),this._debug("Error",t),"end"===t&&this._showdonemsg(),e.state.isDone=!0,e.state.currPage=1,e.state.isPaused=!1,this._binding("unbind"),void 0)},_loadcallback:function(n,s,o){var a,r=this.options,l=this.options.callback,h=r.state.isDone?"done":r.appendCallback?"append":"no-append";if(r.behavior&&this["_loadcallback_"+r.behavior]!==i)return this["_loadcallback_"+r.behavior].call(this,n,s),void 0;switch(h){case"done":return this._showdonemsg(),!1;case"no-append":"html"===r.dataType&&(s="<div>"+s+"</div>",s=e(s).find(r.itemSelector));break;case"append":var c=n.children();if(0===c.length)return this._error("end");for(a=document.createDocumentFragment();n[0].firstChild;)a.appendChild(n[0].firstChild);this._debug("contentSelector",e(r.contentSelector)[0]),e(r.contentSelector)[0].appendChild(a),s=c.get()}if(r.loading.finished.call(e(r.contentSelector)[0],r),r.animate){var u=e(t).scrollTop()+e("#infscr-loading").height()+r.extraScrollPx+"px";e("html,body").animate({scrollTop:u},800,function(){r.state.isDuringAjax=!1})}r.animate||(r.state.isDuringAjax=!1),l(this,s,o),r.prefill&&this._prefill()},_nearbottom:function(){var n=this.options,s=0+e(document).height()-n.binder.scrollTop()-e(t).height();return n.behavior&&this["_nearbottom_"+n.behavior]!==i?this["_nearbottom_"+n.behavior].call(this):(this._debug("math:",s,n.pixelsFromNavToBottom),s-n.bufferPx<n.pixelsFromNavToBottom)},_pausing:function(t){var e=this.options;if(e.behavior&&this["_pausing_"+e.behavior]!==i)return this["_pausing_"+e.behavior].call(this,t),void 0;switch("pause"!==t&&"resume"!==t&&null!==t&&this._debug("Invalid argument. Toggling pause value instead"),t=!t||"pause"!==t&&"resume"!==t?"toggle":t){case"pause":e.state.isPaused=!0;break;case"resume":e.state.isPaused=!1;break;case"toggle":e.state.isPaused=!e.state.isPaused}return this._debug("Paused",e.state.isPaused),!1},_setup:function(){var t=this.options;return t.behavior&&this["_setup_"+t.behavior]!==i?(this["_setup_"+t.behavior].call(this),void 0):(this._binding("bind"),!1)},_showdonemsg:function(){var t=this.options;return t.behavior&&this["_showdonemsg_"+t.behavior]!==i?(this["_showdonemsg_"+t.behavior].call(this),void 0):(t.loading.msg.find("img").hide().parent().find("div").html(t.loading.finishedMsg).animate({opacity:1},2e3,function(){e(this).parent().fadeOut(t.loading.speed)}),t.errorCallback.call(e(t.contentSelector)[0],"done"),void 0)},_validate:function(t){for(var i in t)if(i.indexOf&&i.indexOf("Selector")>-1&&0===e(t[i]).length)return this._debug("Your "+i+" found no elements."),!1;return!0},bind:function(){this._binding("bind")},destroy:function(){return this.options.state.isDestroyed=!0,this.options.loading.finished(),this._error("destroy")},pause:function(){this._pausing("pause")},resume:function(){this._pausing("resume")},beginAjax:function(t){var n,s,o,a,r=this,l=t.path;if(t.state.currPage++,t.maxPage!=i&&t.state.currPage>t.maxPage)return this.destroy(),void 0;switch(n=e(t.contentSelector).is("table")?e("<tbody/>"):e("<div/>"),s="function"==typeof l?l(t.state.currPage):l.join(t.state.currPage),r._debug("heading into ajax",s),o="html"===t.dataType||"json"===t.dataType?t.dataType:"html+callback",t.appendCallback&&"html"===t.dataType&&(o+="+callback"),o){case"html+callback":r._debug("Using HTML via .load() method"),n.load(s+" "+t.itemSelector,i,function(t){r._loadcallback(n,t,s)});break;case"html":r._debug("Using "+o.toUpperCase()+" via $.ajax() method"),e.ajax({url:s,dataType:t.dataType,complete:function(t,e){a="undefined"!=typeof t.isResolved?t.isResolved():"success"===e||"notmodified"===e,a?r._loadcallback(n,t.responseText,s):r._error("end")}});break;case"json":r._debug("Using "+o.toUpperCase()+" via $.ajax() method"),e.ajax({dataType:"json",type:"GET",url:s,success:function(e,o,l){if(a="undefined"!=typeof l.isResolved?l.isResolved():"success"===o||"notmodified"===o,t.appendCallback)if(t.template!==i){var h=t.template(e);n.append(h),a?r._loadcallback(n,h):r._error("end")}else r._debug("template must be defined."),r._error("end");else a?r._loadcallback(n,e,s):r._error("end")},error:function(){r._debug("JSON ajax request failed."),r._error("end")}})}},retrieve:function(t){t=t||null;var n=this,s=n.options;return s.behavior&&this["retrieve_"+s.behavior]!==i?(this["retrieve_"+s.behavior].call(this,t),void 0):s.state.isDestroyed?(this._debug("Instance is destroyed"),!1):(s.state.isDuringAjax=!0,s.loading.start.call(e(s.contentSelector)[0],s),void 0)},scroll:function(){var t=this.options,e=t.state;return t.behavior&&this["scroll_"+t.behavior]!==i?(this["scroll_"+t.behavior].call(this),void 0):(e.isDuringAjax||e.isInvalidPage||e.isDone||e.isDestroyed||e.isPaused||this._nearbottom()&&this.retrieve(),void 0)},toggle:function(){this._pausing()},unbind:function(){this._binding("unbind")},update:function(t){e.isPlainObject(t)&&(this.options=e.extend(!0,this.options,t))}},e.fn.infinitescroll=function(t,i){var n=typeof t;switch(n){case"string":var s=Array.prototype.slice.call(arguments,1);this.each(function(){var i=e.data(this,"infinitescroll");return i?e.isFunction(i[t])&&"_"!==t.charAt(0)?(i[t].apply(i,s),void 0):!1:!1});break;case"object":this.each(function(){var n=e.data(this,"infinitescroll");n?n.update(t):(n=new e.infinitescroll(t,i,this),n.failed||e.data(this,"infinitescroll",n))})}return this};var n,s=e.event;s.special.smartscroll={setup:function(){e(this).bind("scroll",s.special.smartscroll.handler)},teardown:function(){e(this).unbind("scroll",s.special.smartscroll.handler)},handler:function(t,i){var s=this,o=arguments;t.type="smartscroll",n&&clearTimeout(n),n=setTimeout(function(){e(s).trigger("smartscroll",o)},"execAsap"===i?0:100)}},e.fn.smartscroll=function(t){return t?this.bind("smartscroll",t):this.trigger("smartscroll",["execAsap"])}}(window,jQuery),// Copyright (c) 2011 Vesa Vnsk, released under the MIT License.
function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};!function(e){return e.inlineFootnote=function(i,n){return this.el=e(i),this.el.data("inlineFootnote",this),this.initialize=function(){return this.options=e.extend({},e.inlineFootnote.defaultOptions,n),this.footnoteId=this.el.attr("href").match(/#(.*)/)[1],this.footnoteId?(this.el.mouseenter(this.openBox),e("body").mousemove(this.closeBox)):void 0},this.openBox=t(function(){var t,i;return this.box?void 0:(t=e("[id='"+this.footnoteId+"']").children().not(this.options.hideFromContent),i=this.el.offset(),this.box=e("<div />",{id:this.options.boxId,html:t.clone(),css:{position:"absolute",top:i.top,left:i.left+this.el.outerWidth()}}).appendTo("body"),this.positionBox())},this),this.closeBox=t(function(e){if(this.box){if(this.isHoveringFootnote(e))return clearTimeout(this.closeTimeout),this.closeTimeout=null;if(!this.closeTimeout)return this.closeTimeout=setTimeout(t(function(){return this.box.remove(),this.box=null},this),this.options.hideDelay)}},this),this.isHoveringFootnote=function(t){return this.box.is(t.target)||e(t.target).closest(this.box).length>0||t.target===this.el[0]},this.positionBox=function(){var t,i,n,s,o;return t=parseInt(this.box.css("padding-left"))+parseInt(this.box.css("padding-right")),s=this.el.offset().left,o=e(window).width(),o/2>s?(i=s+20,n=o-i-t-2*this.options.boxMargin,n>this.options.maximumBoxWidth&&(n=this.options.maximumBoxWidth)):(n=s-t-2*this.options.boxMargin,n>this.options.maximumBoxWidth&&(n=this.options.maximumBoxWidth),i=s-n-2*this.options.boxMargin),this.box.css({width:n,left:i})},this.initialize()},e.inlineFootnote.defaultOptions={boxMargin:20,hideDelay:200,hideFromContent:"[rev=footnote]",maximumBoxWidth:500,boxId:"footnote_box"},e.fn.inlineFootnote=function(t){return this.each(function(){return new e.inlineFootnote(this,t)})}}(jQuery)}.call(this),/*************************************************!
*
*   project:    liteAccordion - a horizontal accordion plugin for jQuery
*   author:     Nicola Hibbert
*   url:        http://nicolahibbert.com/liteaccordion-v2/
*   demo:       http://www.nicolahibbert.com/demo/liteAccordion/
*
*   Version:    2.0.2
*   Copyright:  (c) 2010-2011 Nicola Hibbert
*   Licence:    MIT
*
**************************************************/
function(t){var e=function(e,i){var n={containerWidth:960,containerHeight:320,headerWidth:48,activateOn:"click",firstSlide:1,slideSpeed:800,onTriggerSlide:function(){},onSlideAnimComplete:function(){},autoPlay:!1,pauseOnHover:!1,cycleSpeed:6e3,easing:"swing",theme:"basic",rounded:!1,enumerateSlides:!1,linkable:!1},s=t.extend({},n,i),o=e.children("ol").children("li"),a=o.children(":first-child"),r=o.length,l=s.containerWidth-r*s.headerWidth,h={play:function(t){var e=c.nextSlide(t&&t);c.playing||(c.playing=setInterval(function(){a.eq(e()).trigger("click.liteAccordion")},s.cycleSpeed))},stop:function(){clearInterval(c.playing),c.playing=0},next:function(){h.stop(),a.eq(c.currentSlide===r-1?0:c.currentSlide+1).trigger("click.liteAccordion")},prev:function(){h.stop(),a.eq(c.currentSlide-1).trigger("click.liteAccordion")},destroy:function(){h.stop(),t(window).unbind(".liteAccordion"),e.attr("style","").removeClass("accordion basic dark light stitch").removeData("liteAccordion").unbind(".liteAccordion").find("li > :first-child").unbind(".liteAccordion").filter(".selected").removeClass("selected").end().find("b").remove(),o.removeClass("slide").children().attr("style","")},debug:function(){return{elem:e,defaults:n,settings:s,methods:h,core:c}}},c={setStyles:function(){e.width(s.containerWidth).height(s.containerHeight).addClass("accordion").addClass(s.rounded&&"rounded").addClass(s.theme),o.addClass("slide").children(":first-child").width(s.containerHeight).height(s.headerWidth).eq(s.firstSlide-1).addClass("selected"),a.each(function(e){var i=t(this),n=e*s.headerWidth,o=a.first().next(),r=parseInt(o.css("marginLeft"),10)||parseInt(o.css("marginRight"),10)||0;e>=s.firstSlide&&(n+=l),i.css("left",n).next().width(l-r).css({left:n,paddingLeft:s.headerWidth}),s.enumerateSlides&&i.append("<b>"+(e+1)+"</b>")})},bindEvents:function(){"click"===s.activateOn?a.bind("click.liteAccordion",c.triggerSlide):"mouseover"===s.activateOn&&a.bind({"mouseover.liteAccordion":c.triggerSlide,"click.liteAccordion":c.triggerSlide}),s.pauseOnHover&&s.autoPlay&&e.bind("mouseover.liteAccordion",function(){c.playing&&h.stop()}).bind("mouseout.liteAccordion",function(){!c.playing&&h.play(c.currentSlide)})},linkable:function(){var e=function(){var i=[];return o.each(function(){t(this).attr("name")&&i.push(t(this).attr("name").toLowerCase())}),e=i}(),i=function(i){var n;("load"!==i.type||window.location.hash)&&("hashchange"===i.type&&c.playing||(n=t.inArray(window.location.hash.slice(1).toLowerCase(),e),n>-1&&n<e.length&&a.eq(n).trigger("click.liteAccordion")))};t(window).bind({"hashchange.liteAccordion":i,"load.liteAccordion":i})},currentSlide:s.firstSlide-1,nextSlide:function(t){var e=t+1||c.currentSlide+1;return function(){return e++%r}},playing:0,animSlideGroup:function(e,i,n){var a=n?":lt("+(e+1)+")":":gt("+e+")";o.filter(a).each(function(){var e=t(this),a=o.index(e);e.children().stop(!0).animate({left:(n?0:l)+a*s.headerWidth},s.slideSpeed,s.easing,function(){c.slideAnimCompleteFlag||(s.onSlideAnimComplete.call(i),c.slideAnimCompleteFlag=!0)})})},slideAnimCompleteFlag:!1,triggerSlide:function(e){var i=t(this),n=a.index(i),o=i.next();c.currentSlide=n,c.slideAnimCompleteFlag=!1,a.removeClass("selected").filter(i).addClass("selected"),e.originalEvent&&s.autoPlay&&(h.stop(),h.play(n)),s.linkable&&!c.playing&&(window.location.hash=i.parent().attr("name")),s.onTriggerSlide.call(o),c.animSlideGroup(n,o,!0),c.animSlideGroup(n,o)},ieClass:function(){var i=+t.browser.version.charAt(0);7>i&&h.destroy(),(7===i||8===i)&&o.each(function(e){t(this).addClass("slide-"+e)}),e.addClass("ie ie"+i)},init:function(){t.browser.msie&&c.ieClass(),c.setStyles(),c.bindEvents(),s.cycleSpeed<s.slideSpeed&&(s.cycleSpeed=s.slideSpeed),s.linkable&&"onhashchange"in window&&c.linkable(),s.autoPlay&&h.play()}};return c.init(),h};t.fn.liteAccordion=function(t){var i=this,n=i.data("liteAccordion");return"object"!=typeof t&&t?"string"==typeof t&&n[t]?"debug"===t?n[t].call(i):(n[t].call(i),i):void 0:i.each(function(){var s;n||(s=new e(i,t),i.data("liteAccordion",s))})}}(jQuery),function(t){function e(t){return"object"==typeof t?t:{top:t,left:t}}var i=t.scrollTo=function(e,i,n){t(window).scrollTo(e,i,n)};i.defaults={axis:"xy",duration:parseFloat(t.fn.jquery)>=1.3?0:1,limit:!0},i.window=function(){return t(window)._scrollable()},t.fn._scrollable=function(){return this.map(function(){var e=this,i=!e.nodeName||-1!=t.inArray(e.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!i)return e;var n=(e.contentWindow||e).document||e.ownerDocument||e;return/webkit/i.test(navigator.userAgent)||"BackCompat"==n.compatMode?n.body:n.documentElement})},t.fn.scrollTo=function(n,s,o){return"object"==typeof s&&(o=s,s=0),"function"==typeof o&&(o={onAfter:o}),"max"==n&&(n=9e9),o=t.extend({},i.defaults,o),s=s||o.duration,o.queue=o.queue&&o.axis.length>1,o.queue&&(s/=2),o.offset=e(o.offset),o.over=e(o.over),this._scrollable().each(function(){function a(t){h.animate(u,s,o.easing,t&&function(){t.call(this,n,o)})}if(n){var r,l=this,h=t(l),c=n,u={},d=h.is("html,body");switch(typeof c){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(c)){c=e(c);break}if(c=t(c,this),!c.length)return;case"object":(c.is||c.style)&&(r=(c=t(c)).offset())}t.each(o.axis.split(""),function(t,e){var n="x"==e?"Left":"Top",s=n.toLowerCase(),p="scroll"+n,f=l[p],m=i.max(l,e);if(r)u[p]=r[s]+(d?0:f-h.offset()[s]),o.margin&&(u[p]-=parseInt(c.css("margin"+n))||0,u[p]-=parseInt(c.css("border"+n+"Width"))||0),u[p]+=o.offset[s]||0,o.over[s]&&(u[p]+=c["x"==e?"width":"height"]()*o.over[s]);else{var g=c[s];u[p]=g.slice&&"%"==g.slice(-1)?parseFloat(g)/100*m:g}o.limit&&/^\d+$/.test(u[p])&&(u[p]=u[p]<=0?0:Math.min(u[p],m)),!t&&o.queue&&(f!=u[p]&&a(o.onAfterFirst),delete u[p])}),a(o.onAfter)}}).end()},i.max=function(e,i){var n="x"==i?"Width":"Height",s="scroll"+n;if(!t(e).is("html,body"))return e[s]-t(e)[n.toLowerCase()]();var o="client"+n,a=e.ownerDocument.documentElement,r=e.ownerDocument.body;return Math.max(a[s],r[s])-Math.min(a[o],r[o])}}(jQuery),function(t,e,i){var n=function(n,s){this.elem=n,this.$elem=t(n),this.options=s,this.metadata=this.$elem.data("plugin-options"),this.$nav=this.$elem.find("a"),this.$win=t(e),this.sections={},this.didScroll=!1,this.$doc=t(i),this.docHeight=this.$doc.height()};n.prototype={defaults:{currentClass:"current",changeHash:!1,easing:"swing",filter:"",scrollSpeed:750,scrollOffset:0,scrollThreshold:.5,begin:!1,end:!1,scrollChange:!1},init:function(){var e=this;return e.config=t.extend({},e.defaults,e.options,e.metadata),""!==e.config.filter&&(e.$nav=e.$nav.filter(e.config.filter)),e.$nav.on("click.onePageNav",t.proxy(e.handleClick,e)),e.getPositions(),e.bindInterval(),e.$win.on("resize.onePageNav",t.proxy(e.getPositions,e)),this},adjustNav:function(t,e){t.$elem.find("."+t.config.currentClass).removeClass(t.config.currentClass),e.addClass(t.config.currentClass)},bindInterval:function(){var t,e=this;e.$win.on("scroll.onePageNav",function(){e.didScroll=!0}),e.t=setInterval(function(){t=e.$doc.height(),e.didScroll&&(e.didScroll=!1,e.scrollChange()),t!==e.docHeight&&(e.docHeight=t,e.getPositions())},250)},getHash:function(t){return t.attr("href").split("#")[1]},getPositions:function(){var e,i,n,s=this;s.$nav.each(function(){e=s.getHash(t(this)),n=t("#"+e),n.length&&(i=n.offset().top,s.sections[e]=Math.round(i)-s.config.scrollOffset)})},getSection:function(t){var e=null,i=Math.round(this.$win.height()*this.config.scrollThreshold);for(var n in this.sections)this.sections[n]-i<t&&(e=n);return e},handleClick:function(i){var n=this,s=t(i.currentTarget),o=s.parent(),a="#"+n.getHash(s);o.hasClass(n.config.currentClass)||(n.config.begin&&n.config.begin(),n.adjustNav(n,o),n.unbindInterval(),t.scrollTo(a,n.config.scrollSpeed,{axis:"y",easing:n.config.easing,offset:{top:-n.config.scrollOffset},onAfter:function(){n.config.changeHash&&(e.location.hash=a),n.bindInterval(),n.config.end&&n.config.end()}})),i.preventDefault()},scrollChange:function(){var t,e=this.$win.scrollTop(),i=this.getSection(e);null!==i&&(t=this.$elem.find('a[href$="#'+i+'"]').parent(),t.hasClass(this.config.currentClass)||(this.adjustNav(this,t),this.config.scrollChange&&this.config.scrollChange(t)))},unbindInterval:function(){clearInterval(this.t),this.$win.unbind("scroll.onePageNav")}},n.defaults=n.prototype.defaults,t.fn.onePageNav=function(t){return this.each(function(){new n(this,t).init()})}}(jQuery,window,document),function(t){function e(e,n,s){var o=this;return this.on("click.pjax",e,function(e){s=t.extend({},d(n,s)),s.container||(s.container=t(this).attr("data-pjax")||o),i(e,s)})}function i(e,i,n){n=d(i,n);var o,a=e.currentTarget,r=t(a);if(t.nodeName(a,"A"))o=a;else{if(o=r.attr("data-href"),!o)throw"$.fn.pjax or $.pjax.click requires an anchor element or an element with data-href attribute";o=u(o)}if(!(e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.isDefaultPrevented()||location.protocol!==o.protocol||location.hostname!==o.hostname||o.hash&&o.href.replace(o.hash,"")===location.href.replace(location.hash,"")||o.href===location.href+"#")){var l={url:o.href,container:r.attr("data-pjax"),target:a,fragment:null},h=t.extend({},l,n),c=t.Event("pjax:click");r.trigger(c,[h]),c.isDefaultPrevented()||(s(h),e.preventDefault())}}function n(e,i,n){n=d(i,n);var o=e.currentTarget;if("FORM"!==o.tagName.toUpperCase())throw"$.pjax.submit requires a form element";var a={type:o.method.toUpperCase(),url:o.action,data:t(o).serializeArray(),container:t(o).attr("data-pjax"),target:o,fragment:null};s(t.extend({},a,n)),e.preventDefault()}function s(e){function i(e,i){var n=t.Event(e,{relatedTarget:o});return l.trigger(n,i),!n.isDefaultPrevented()}e=t.extend(!0,{},t.ajaxSettings,s.defaults,e),t.isFunction(e.url)&&(e.url=e.url());var n,o=e.target,r=u(e.url).hash,l=e.context=p(e.container);e.data||(e.data={}),e.data._pjax=l.selector;var d;e.beforeSend=function(t,n){return"GET"!==n.type&&(n.timeout=0),t.setRequestHeader("X-PJAX",l.selector),t.setRequestHeader("X-PJAX-Container",l.selector),i("pjax:beforeSend",[t,n,e])?(n.timeout>0&&(d=setTimeout(function(){i("pjax:timeout",[t,e])&&t.abort("timeout")},n.timeout),n.timeout=0),e.requestUrl=u(n.url).href,void 0):!1},e.complete=function(s,o){d&&clearTimeout(d),e.request_time=t.now()-n,i("pjax:complete",[s,o,e]),i("pjax:end",[s,e])},e.error=function(t,n,s){var o=y("",t,e),r=i("pjax:error",[t,n,s,e]);r&&"GET"==e.type&&"abort"!==n&&a(o.url)},e.success=function(n,o,c){var d=e.version;s.state,"function"==typeof d&&(d=d());var p=c.getResponseHeader("X-PJAX-Version"),f=y(n,c,e);if(d&&p&&d!==p)return a(f.url),void 0;if(!f.contents)return a(f.url),void 0;if(p&&!d&&(t.pjax.defaults.version=p),s.state={id:e.id||h(),url:f.url,title:f.title,meta:f.meta,container:l.selector,fragment:e.fragment,timeout:e.timeout},(e.push||e.replace)&&window.history.replaceState(s.state,f.title,f.url),f.title&&(document.title=f.title),v(f.meta),l.html(f.contents),_(f.scripts),"number"==typeof e.scrollTo&&t(window).scrollTop(e.scrollTo),""!==r){var m=u(f.url);m.hash=r,s.state.url=m.href,window.history.replaceState(s.state,f.title,m.href);var g=t(m.hash);g.length&&t(window).scrollTop(g.offset().top)}i("pjax:success",[n,o,c,e])},s.state||(s.state={id:h(),url:window.location.href,title:document.title,meta:g("head"),container:l.selector,fragment:e.fragment,timeout:e.timeout},window.history.replaceState(s.state,document.title));var f=s.xhr;f&&f.readyState<4&&(f.onreadystatechange=t.noop,f.abort()),s.options=e;var f=s.xhr=t.ajax(e);return f.readyState>0&&(e.push&&!e.replace&&(b(s.state.id,l.clone().contents()),window.history.pushState(null,"",c(e.requestUrl))),n=t.now(),i("pjax:start",[f,e]),i("pjax:send",[f,e])),s.xhr}function o(e,i){var n={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return s(t.extend(n,d(e,i)))}function a(t){window.history.replaceState(null,"","#"),window.location.replace(t)}function r(e){var i=e.state;if(i&&i.container){if(S&&C==i.url)return;var n=t(i.container);if(n.length){var o,r=E[i.id];s.state&&(o=s.state.id<i.id?"forward":"back",w(o,s.state.id,n.clone().contents()));var l=t.Event("pjax:popstate",{state:i,direction:o});n.trigger(l);var h={id:i.id,url:i.url,container:n,meta:i.meta,push:!1,fragment:i.fragment,timeout:i.timeout,scrollTo:!1};r?(n.trigger("pjax:start",[null,h]),i.title&&(document.title=i.title),n.html(r),v(i.meta),s.state=i,n.trigger("pjax:end",[null,h])):s(h),n[0].offsetHeight}else a(location.href)}S=!1}function l(e){var i=t.isFunction(e.url)?e.url():e.url,n=e.type?e.type.toUpperCase():"GET",s=t("<form>",{method:"GET"===n?"GET":"POST",action:i,style:"display:none"});"GET"!==n&&"POST"!==n&&s.append(t("<input>",{type:"hidden",name:"_method",value:n.toLowerCase()}));var o=e.data;if("string"==typeof o)t.each(o.split("&"),function(e,i){var n=i.split("=");s.append(t("<input>",{type:"hidden",name:n[0],value:n[1]}))});else if("object"==typeof o)for(key in o)s.append(t("<input>",{type:"hidden",name:key,value:o[key]}));t(document.body).append(s),s.submit()}function h(){return(new Date).getTime()}function c(t){return t.replace(/\?_pjax=[^&]+&?/,"?").replace(/_pjax=[^&]+&?/,"").replace(/[\?&]$/,"")}function u(t){var e=document.createElement("a");return e.href=t,e}function d(e,i){return e&&i?i.container=e:i=t.isPlainObject(e)?e:{container:e},i.container&&(i.container=p(i.container)),i}function p(e){if(e=t(e),e.length){if(""!==e.selector&&e.context===document)return e;if(e.attr("id"))return t("#"+e.attr("id"));throw"cant get selector for pjax container!"}throw"no pjax container for "+e.selector}function f(t,e){return t.filter(e).add(t.find(e))}function m(e){return t.parseHTML(e,document,!0)}function g(e){function i(e,i,n){return n in e?t.isArray(e[n])?e[n][e[n].length]=i:e[n]=[e[n],i]:e[n]=i,i}var n={},s={itemprop:"meta",property:"meta",name:"meta",rel:"link"},o={rel:"<stylesheet<prefetch<"};return t.each(s,function(s,a,r,l){r="link"==a?"href":"content",l=o[s],f(t(e),a+"["+s+"]").each(function(e,o,h){o=t(o),h=o.attr(s),(!l||l.indexOf(h)<0)&&i(n,a+">"+s+">"+h,o.attr(r))})}),n}function v(e,i){if(e){i||(i=t("head:first"));var n={},s=t([]);return t.each(e,function(e,i){t.each(t.isArray(i)?i:[i],function(t,i){t=n[i]||(n[i]=[]),t[t.length]=e})}),t.each(n,function(e,n){e=e.split(/>/);var o=e[0],a=e[1],r=e[2],l="link"==o?"href":"content",h=i.find(o+"["+a+'="'+r+'"]');t.each(n,function(e,i){n[e]=t("<"+o+" />").attr(a,r).attr(l,i).get(0)}),s=s.add(n),h.length?(h.last().after(n),h.remove()):i.append(n)}),i.find("meta.pjax,link.pjax").remove(),s.addClass("pjax"),s}}function y(e,i,n){var s,o,a,r,l={};if(l.url=c(i.getResponseHeader("X-PJAX-URL")||n.requestUrl),(s=/<html/i.test(e))?(o=t(m(e.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0])),a=t(m(e.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0])),r=o.add(a)):a=r=t(m(e)),0===a.length)return l;if(l.title=f(r,"title").last().text(),n.html=r,n.fragment||(n.fragment=i.getResponseHeader("X-PJAX-Container")),n.fragment){if("body"===n.fragment)var h=a;else var h=f(a,n.fragment).first();h.length&&(l.contents=h.contents(),l.title||(l.title=h.attr("title")||h.data("title")))}else l.contents=a;if(l.contents&&(l.contents=l.contents.not("title"),l.contents.find("title").remove(),l.scripts=f(l.contents,"script[src]").remove(),l.contents=l.contents.not(l.scripts)),o&&o.length){var u=g(o),d=f(o,"script").remove(),p=d.not("[src]");p&&p.length&&(d=d.not(p),l.contents=p.add(l.contents)),d&&d.length&&(l.scripts=d.add(l.scripts)),t.isEmptyObject(u)||(l.meta=u)}return l.title&&(l.title=t.trim(l.title)),l}function _(e){if(e){var i=t("script[src]");e.each(function(){var e=this.src,n=i.filter(function(){return this.src===e});if(!n.length){var s=document.createElement("script");s.type=t(this).attr("type"),s.src=t(this).attr("src"),document.head.appendChild(s)}})}}function b(t,e){for(E[t]=e,M.push(t);P.length;)delete E[P.shift()];for(;M.length>s.defaults.maxCacheLength;)delete E[M.shift()]}function w(t,e,i){var n,s;E[e]=i,"forward"===t?(n=M,s=P):(n=P,s=M),n.push(e),(e=s.pop())&&delete E[e]}function x(){return t("meta").filter(function(){var e=t(this).attr("http-equiv");return e&&"X-PJAX-VERSION"===e.toUpperCase()}).attr("content")}function k(){t.fn.pjax=e,t.pjax=s,t.pjax.enable=t.noop,t.pjax.disable=T,t.pjax.click=i,t.pjax.submit=n,t.pjax.reload=o,t.pjax.defaults={timeout:3e3,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:x},t(window).on("popstate.pjax",r)}function T(){t.fn.pjax=function(){return this},t.pjax=l,t.pjax.enable=k,t.pjax.disable=t.noop,t.pjax.click=t.noop,t.pjax.submit=t.noop,t.pjax.reload=function(){window.location.reload()},t(window).off("popstate.pjax",r)}var S=!0,C=window.location.href,D=window.history.state;D&&D.container&&(s.state=D),"state"in window.history&&(S=!1);var E={},P=[],M=[];t.inArray("state",t.event.props)<0&&t.event.props.push("state"),t.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]|WebApps\/.+CFNetwork)/),t.support.pjax?k():T()}(jQuery),BestInPlaceEditor.prototype={activate:function(){var t="";t=this.isNil?"":this.original_content?this.original_content:this.element.html();var e=this.isNil?"-":this.element.html();this.oldValue=e,this.display_value=t,jQuery(this.activator).unbind("click",this.clickHandler),this.activateForm(),this.element.trigger(jQuery.Event("best_in_place:activate"))},abort:function(){this.isNil?this.element.html(this.nil):this.element.html(this.oldValue),jQuery(this.activator).bind("click",{editor:this},this.clickHandler),this.element.trigger(jQuery.Event("best_in_place:abort")),this.element.trigger(jQuery.Event("best_in_place:deactivate"))},abortIfConfirm:function(){confirm("Are you sure you want to discard your changes?")&&this.abort()},update:function(){var t=this;if(this.formType in{input:1,textarea:1}&&this.getValue()==this.oldValue)return this.abort(),!0;if(this.isNil=!1,t.ajax({type:"post",dataType:"text",data:t.requestData(),success:function(e){t.loadSuccessCallback(e)},error:function(e,i){t.loadErrorCallback(e,i)}}),"select"==this.formType){var e=this.getValue();jQuery.each(this.values,function(i,n){e==n[0]&&t.element.html(n[1])})}else"checkbox"==this.formType?t.element.html(this.getValue()?this.values[1]:this.values[0]):t.element.html(""!=this.getValue()?this.getValue():this.nil);t.element.trigger(jQuery.Event("best_in_place:update"))},activateForm:function(){alert("The form was not properly initialized. activateForm is unbound")},initOptions:function(){var t=this;t.element.parents().each(function(){t.url=t.url||jQuery(this).attr("data-url"),t.collection=t.collection||jQuery(this).attr("data-collection"),t.formType=t.formType||jQuery(this).attr("data-type"),t.objectName=t.objectName||jQuery(this).attr("data-object"),t.attributeName=t.attributeName||jQuery(this).attr("data-attribute"),t.activator=t.activator||jQuery(this).attr("data-activator"),t.okButton=t.okButton||jQuery(this).attr("data-ok-button"),t.cancelButton=t.cancelButton||jQuery(this).attr("data-cancel-button"),t.nil=t.nil||jQuery(this).attr("data-nil"),t.inner_class=t.inner_class||jQuery(this).attr("data-inner-class"),t.html_attrs=t.html_attrs||jQuery(this).attr("data-html-attrs"),t.original_content=t.original_content||jQuery(this).attr("data-original-content")}),t.element.parents().each(function(){var e=this.id.match(/^(\w+)_(\d+)$/i);e&&(t.objectName=t.objectName||e[1])}),t.url=t.element.attr("data-url")||t.url||document.location.pathname,t.collection=t.element.attr("data-collection")||t.collection,t.formType=t.element.attr("data-type")||t.formtype||"input",t.objectName=t.element.attr("data-object")||t.objectName,t.attributeName=t.element.attr("data-attribute")||t.attributeName,t.activator=t.element.attr("data-activator")||t.element,t.okButton=t.element.attr("data-ok-button")||t.okButton,t.cancelButton=t.element.attr("data-cancel-button")||t.cancelButton,t.nil=t.element.attr("data-nil")||t.nil||"-",t.inner_class=t.element.attr("data-inner-class")||t.inner_class||null,t.html_attrs=t.element.attr("data-html-attrs")||t.html_attrs,t.original_content=t.element.attr("data-original-content")||t.original_content,t.sanitize=t.element.attr("data-sanitize")?"true"==t.element.attr("data-sanitize"):!0,"select"!=t.formType&&"checkbox"!=t.formType||null===t.collection||(t.values=jQuery.parseJSON(t.collection))},bindForm:function(){this.activateForm=BestInPlaceEditor.forms[this.formType].activateForm,this.getValue=BestInPlaceEditor.forms[this.formType].getValue},initNil:function(){""==this.element.html()&&(this.isNil=!0,this.element.html(this.nil))},getValue:function(){alert("The form was not properly initialized. getValue is unbound")},sanitizeValue:function(t){if(this.sanitize){var e=document.createElement("DIV");e.innerHTML=t,t=jQuery.trim(e.textContent||e.innerText).replace(/"/g,"&quot;")}return jQuery.trim(t)},requestData:function(){csrf_token=jQuery("meta[name=csrf-token]").attr("content"),csrf_param=jQuery("meta[name=csrf-param]").attr("content");var t="_method=put";return t+="&"+this.objectName+"["+this.attributeName+"]="+encodeURIComponent(this.getValue()),void 0!==csrf_param&&void 0!==csrf_token&&(t+="&"+csrf_param+"="+encodeURIComponent(csrf_token)),t},ajax:function(t){return t.url=this.url,t.beforeSend=function(t){t.setRequestHeader("Accept","application/json")},jQuery.ajax(t)},loadSuccessCallback:function(t){var e=jQuery.parseJSON(jQuery.trim(t));null!=e&&e.hasOwnProperty("display_as")&&(this.element.attr("data-original-content",this.element.html()),this.original_content=this.element.html(),this.element.html(e.display_as)),this.element.trigger(jQuery.Event("ajax:success"),t),jQuery(this.activator).bind("click",{editor:this},this.clickHandler),this.element.trigger(jQuery.Event("best_in_place:deactivate"))},loadErrorCallback:function(t){this.element.html(this.oldValue),jQuery.each(jQuery.parseJSON(t.responseText),function(t,e){"object"==typeof e&&(e=t+" "+e.toString());var i=jQuery("<span class='flash-error'></span>").html(e);i.purr()}),this.element.trigger(jQuery.Event("ajax:error")),jQuery(this.activator).bind("click",{editor:this},this.clickHandler),this.element.trigger(jQuery.Event("best_in_place:deactivate"))},clickHandler:function(t){t.preventDefault(),t.data.editor.activate()},setHtmlAttributes:function(){var t=this.element.find(this.formType),e=jQuery.parseJSON(this.html_attrs);for(var i in e)t.attr(i,e[i])}},BestInPlaceEditor.forms={input:{activateForm:function(){var t='<form class="form_in_place" action="javascript:void(0)" style="display:inline;">';t+='<input type="text" name="'+this.attributeName+'" value="'+this.sanitizeValue(this.display_value)+'"',null!=this.inner_class&&(t+=' class="'+this.inner_class+'"'),t+=">",this.okButton&&(t+='<input type="submit" value="'+this.okButton+'" />'),this.cancelButton&&(t+='<input type="button" value="'+this.cancelButton+'" />'),t+="</form>",this.element.html(t),this.setHtmlAttributes(),this.element.find("input[type='text']")[0].select(),this.element.find("form").bind("submit",{editor:this},BestInPlaceEditor.forms.input.submitHandler),this.cancelButton&&this.element.find("input[type='button']").bind("click",{editor:this},BestInPlaceEditor.forms.input.cancelButtonHandler),this.element.find("input[type='text']").bind("blur",{editor:this},BestInPlaceEditor.forms.input.inputBlurHandler),this.element.find("input[type='text']").bind("keyup",{editor:this},BestInPlaceEditor.forms.input.keyupHandler),this.blurTimer=null,this.userClicked=!1},getValue:function(){return this.sanitizeValue(this.element.find("input").val())},inputBlurHandler:function(t){t.data.editor.okButton?t.data.editor.blurTimer=setTimeout(function(){t.data.editor.userClicked||t.data.editor.abort()},500):t.data.editor.cancelButton?t.data.editor.blurTimer=setTimeout(function(){t.data.editor.userClicked||t.data.editor.update()},500):t.data.editor.update()},submitHandler:function(t){t.data.editor.userClicked=!0,clearTimeout(t.data.editor.blurTimer),t.data.editor.update()},cancelButtonHandler:function(t){t.data.editor.userClicked=!0,clearTimeout(t.data.editor.blurTimer),t.data.editor.abort(),t.stopPropagation()},keyupHandler:function(t){27==t.keyCode&&t.data.editor.abort()}},date:{activateForm:function(){var t=this,e='<form class="form_in_place" action="javascript:void(0)" style="display:inline;">';e+='<input type="text" name="'+this.attributeName+'" value="'+this.sanitizeValue(this.display_value)+'"',null!=this.inner_class&&(e+=' class="'+this.inner_class+'"'),e+="></form>",this.element.html(e),this.setHtmlAttributes(),this.element.find("input")[0].select(),this.element.find("form").bind("submit",{editor:this},BestInPlaceEditor.forms.input.submitHandler),this.element.find("input").bind("keyup",{editor:this},BestInPlaceEditor.forms.input.keyupHandler),this.element.find("input").datepicker({onClose:function(){t.update()}}).datepicker("show")},getValue:function(){return this.sanitizeValue(this.element.find("input").val())},submitHandler:function(t){t.data.editor.update()},keyupHandler:function(t){27==t.keyCode&&t.data.editor.abort()}},select:{activateForm:function(){var t="<form action='javascript:void(0)' style='display:inline;'><select>",e="",i=this.oldValue;jQuery.each(this.values,function(n,s){e=s[1]==i?"selected='selected'":"",t+="<option value='"+s[0]+"' "+e+">"+s[1]+"</option>"}),t+="</select></form>",this.element.html(t),this.setHtmlAttributes(),this.element.find("select").bind("change",{editor:this},BestInPlaceEditor.forms.select.blurHandler),this.element.find("select").bind("blur",{editor:this},BestInPlaceEditor.forms.select.blurHandler),this.element.find("select").bind("keyup",{editor:this},BestInPlaceEditor.forms.select.keyupHandler),this.element.find("select")[0].focus()},getValue:function(){return this.sanitizeValue(this.element.find("select").val())},blurHandler:function(t){t.data.editor.update()},keyupHandler:function(t){27==t.keyCode&&t.data.editor.abort()}},checkbox:{activateForm:function(){var t=Boolean(this.oldValue!=this.values[1]),e=t?this.values[1]:this.values[0];this.element.html(e),this.setHtmlAttributes(),this.update()},getValue:function(){return Boolean(this.element.html()==this.values[1])}},textarea:{activateForm:function(){width=this.element.css("width"),height=this.element.css("height");var t='<form action="javascript:void(0)" style="display:inline;"><textarea>';t+=this.sanitizeValue(this.display_value),t+="</textarea>",this.okButton&&(t+='<input type="submit" value="'+this.okButton+'" />'),this.cancelButton&&(t+='<input type="button" value="'+this.cancelButton+'" />'),t+="</form>",this.element.html(t),this.setHtmlAttributes(),jQuery(this.element.find("textarea")[0]).css({"min-width":width,"min-height":height}),jQuery(this.element.find("textarea")[0]).elastic(),this.element.find("textarea")[0].focus(),this.element.find("form").bind("submit",{editor:this},BestInPlaceEditor.forms.textarea.submitHandler),this.cancelButton&&this.element.find("input[type='button']").bind("click",{editor:this},BestInPlaceEditor.forms.textarea.cancelButtonHandler),this.element.find("textarea").bind("blur",{editor:this},BestInPlaceEditor.forms.textarea.blurHandler),this.element.find("textarea").bind("keyup",{editor:this},BestInPlaceEditor.forms.textarea.keyupHandler),this.blurTimer=null,this.userClicked=!1},getValue:function(){return this.sanitizeValue(this.element.find("textarea").val())},blurHandler:function(t){t.data.editor.okButton?t.data.editor.blurTimer=setTimeout(function(){t.data.editor.userClicked||t.data.editor.abortIfConfirm()},500):t.data.editor.cancelButton?t.data.editor.blurTimer=setTimeout(function(){t.data.editor.userClicked||t.data.editor.update()},500):t.data.editor.update()},submitHandler:function(t){t.data.editor.userClicked=!0,clearTimeout(t.data.editor.blurTimer),t.data.editor.update()},cancelButtonHandler:function(t){t.data.editor.userClicked=!0,clearTimeout(t.data.editor.blurTimer),t.data.editor.abortIfConfirm(),t.stopPropagation()},keyupHandler:function(t){27==t.keyCode&&t.data.editor.abortIfConfirm()}}},jQuery.fn.best_in_place=function(){function t(t){return t.data("bestInPlaceEditor")?void 0:(t.data("bestInPlaceEditor",new BestInPlaceEditor(t)),!0)}return jQuery(this.context).delegate(this.selector,"click",function(){var e=jQuery(this);t(e)&&e.click()}),this.each(function(){t(jQuery(this))}),this},function(t){t.fn.extend({elastic:function(){var e=["paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","lineHeight","fontFamily","width","fontWeight"];return this.each(function(){function i(t,e){curratedHeight=Math.floor(parseInt(t,10)),s.height()!=curratedHeight&&s.css({height:curratedHeight+"px",overflow:e})}function n(){var t=s.val().replace(/&/g,"&amp;").replace(/  /g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />"),e=o.html().replace(/<br>/gi,"<br />");if(t+"&nbsp;"!=e&&(o.html(t+"&nbsp;"),Math.abs(o.height()+a-s.height())>3)){var n=o.height()+a;n>=l?i(l,"auto"):r>=n?i(r,"hidden"):i(n,"hidden")}}if("textarea"!=this.type)return!1;var s=t(this),o=t("<div />").css({position:"absolute",display:"none","word-wrap":"break-word"}),a=parseInt(s.css("line-height"),10)||parseInt(s.css("font-size"),"10"),r=parseInt(s.css("height"),10)||3*a,l=parseInt(s.css("max-height"),10)||Number.MAX_VALUE,h=0;0>l&&(l=Number.MAX_VALUE),o.appendTo(s.parent());for(var h=e.length;h--;)o.css(e[h].toString(),s.css(e[h].toString()));s.css({overflow:"hidden"}),s.bind("keyup change cut paste",function(){n()}),s.bind("blur",function(){o.height()<l&&(o.height()>r?s.height(o.height()):s.height(r))}),s.live("input paste",function(){setTimeout(n,250)}),n()})}})}(jQuery),/**
 * jquery.purr.js
 * Copyright (c) 2008 Net Perspective (net-perspective.com)
 * Licensed under the MIT License (http://www.opensource.org/licenses/mit-license.php)
 *
 * @author R.A. Ray
 * @projectDescription  jQuery plugin for dynamically displaying unobtrusive messages in the browser. Mimics the behavior of the MacOS program "Growl."
 * @version 0.1.0
 *
 * @requires jquery.js (tested with 1.2.6)
 *
 * @param fadeInSpeed           int - Duration of fade in animation in miliseconds
 *                          default: 500
 *  @param fadeOutSpeed         int - Duration of fade out animationin miliseconds
                            default: 500
 *  @param removeTimer          int - Timeout, in miliseconds, before notice is removed once it is the top non-sticky notice in the list
                            default: 4000
 *  @param isSticky             bool - Whether the notice should fade out on its own or wait to be manually closed
                            default: false
 *  @param usingTransparentPNG  bool - Whether or not the notice is using transparent .png images in its styling
                            default: false
 */
function(t){t.purr=function(e,i){function n(){var n=document.createElement("a");if(t(n).attr({className:"close",href:"#close"}).appendTo(e).click(function(){return s(),!1}),t(document).keyup(function(t){27==t.keyCode&&s()}),e.appendTo(o).hide(),jQuery.browser.msie&&i.usingTransparentPNG?e.show():e.fadeIn(i.fadeInSpeed),!i.isSticky)var a=setInterval(function(){0==e.prevAll(".purr").length&&(clearInterval(a),setTimeout(function(){s()},i.removeTimer))},200)}function s(){jQuery.browser.msie&&i.usingTransparentPNG?e.css({opacity:0}).animate({height:"0px"},{duration:i.fadeOutSpeed,complete:function(){e.remove()}}):e.animate({opacity:"0"},{duration:i.fadeOutSpeed,complete:function(){e.animate({height:"0px"},{duration:i.fadeOutSpeed,complete:function(){e.remove()}})}})}e=t(e),e.addClass("purr");var o=document.getElementById("purr-container");o||(o='<div id="purr-container"></div>'),o=t(o),t("body").append(o),n()},t.fn.purr=function(e){return e=e||{},e.fadeInSpeed=e.fadeInSpeed||500,e.fadeOutSpeed=e.fadeOutSpeed||500,e.removeTimer=e.removeTimer||4e3,e.isSticky=e.isSticky||!1,e.usingTransparentPNG=e.usingTransparentPNG||!1,this.each(function(){new t.purr(this,e)}),this}}(jQuery),function(t){t.fn.lightbox_me=function(e){return this.each(function(){function i(){var e=l[0].style;a.destroyOnClose?l.add(r).remove():l.add(r).hide(),a.parentLightbox&&a.parentLightbox.fadeIn(200),h.remove(),l.undelegate(a.closeSelector,"click"),t(window).unbind("reposition",s),t(window).unbind("reposition",o),t(window).unbind("scroll",o),t(window).unbind("keyup.lightbox_me"),c&&e.removeExpression("top"),a.onClose()}function n(t){(27==t.keyCode||27==t.DOM_VK_ESCAPE&&0==t.which)&&a.closeEsc&&i()}function s(){t(window).height()<t(document).height()?(r.css({height:t(document).height()+"px"}),h.css({height:t(document).height()+"px"})):(r.css({height:"100%"}),c&&(t("html,body").css("height","100%"),h.css("height","100%")))}function o(){var e=l[0].style;if(l.css({left:"50%",marginLeft:-1*(l.outerWidth()/2),zIndex:a.zIndex+3}),l.height()+80>=t(window).height()&&("absolute"!=l.css("position")||c)){var i=t(document).scrollTop()+40;l.css({position:"absolute",top:i+"px",marginTop:0}),c&&e.removeExpression("top")}else if(l.height()+80<t(window).height())if(c)if(e.position="absolute",a.centered)e.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),e.marginTop=0;else{var n=a.modalCSS&&a.modalCSS.top?parseInt(a.modalCSS.top):0;e.setExpression("top","((blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+n+') + "px"')}else a.centered?l.css({position:"fixed",top:"50%",marginTop:-1*(l.outerHeight()/2)}):l.css({position:"fixed"}).css(a.modalCSS)}var a=t.extend({},t.fn.lightbox_me.defaults,e),r=t(),l=t(this),h=t('<iframe id="foo" style="z-index: '+(a.zIndex+1)+';border: none; margin: 0; padding: 0; position: absolute; width: 100%; height: 100%; top: 0; left: 0; filter: mask();"/>'),c=!1;if(a.showOverlay){var u=t(".js_lb_overlay:visible");r=u.length>0?t('<div class="lb_overlay_clear js_lb_overlay"/>'):t('<div class="'+a.classPrefix+'_overlay js_lb_overlay"/>')}if(c){var d=/^https/i.test(window.location.href||"")?"javascript:false":"about:blank";h.attr("src",d),t("body").append(h)}t("body").append(l.hide()).append(r),a.showOverlay&&(s(),r.css({position:"absolute",width:"100%",top:0,left:0,right:0,bottom:0,zIndex:a.zIndex+2,display:"none"}),r.hasClass("lb_overlay_clear")||r.css(a.overlayCSS)),a.showOverlay?r.fadeIn(a.overlaySpeed,function(){o(),l[a.appearEffect](a.lightboxSpeed,function(){s(),o(),a.onLoad()})}):(o(),l[a.appearEffect](a.lightboxSpeed,function(){a.onLoad()})),a.parentLightbox&&a.parentLightbox.fadeOut(200),t(window).resize(s).resize(o).scroll(o),t(window).bind("keyup.lightbox_me",n),a.closeClick&&r.click(function(t){i(),t.preventDefault}),l.delegate(a.closeSelector,"click",function(t){i(),t.preventDefault()}),l.bind("close",i),l.bind("reposition",o)})},t.fn.lightbox_me.defaults={appearEffect:"fadeIn",appearEase:"",overlaySpeed:250,lightboxSpeed:300,closeSelector:".close",closeClick:!0,closeEsc:!0,destroyOnClose:!1,showOverlay:!0,parentLightbox:!1,onLoad:function(){},onClose:function(){},classPrefix:"lb",zIndex:999,centered:!1,modalCSS:{top:"40px"},overlayCSS:{background:"black",opacity:.3}}}(jQuery),/**
 * @version  OpenSeadragon 0.9.90
 *
 * @fileOverview 
 * <h2>
 * <strong>
 * OpenSeadragon - Javascript Deep Zooming
 * </strong>
 * </h2> 
 * <p>
 * OpenSeadragon is provides an html interface for creating 
 * deep zoom user interfaces.  The simplest examples include deep 
 * zoom for large resolution images, and complex examples include
 * zoomable map interfaces driven by SVG files.
 * </p>
 * 
 * @author <br/>(c) 2011, 2012 Christopher Thatcher 
 * @author <br/>(c) 2010 OpenSeadragon Team 
 * @author <br/>(c) 2010 CodePlex Foundation 
 * 
 * <p>
 * <strong>Original license preserved below: </strong><br/>
 * <pre>
 * ----------------------------------------------------------------------------
 * 
 *  License: New BSD License (BSD)
 *  Copyright (c) 2010, OpenSeadragon
 *  All rights reserved.
 * 
 *  Redistribution and use in source and binary forms, with or without 
 *  modification, are permitted provided that the following conditions are met:
 *  
 *  * Redistributions of source code must retain the above copyright notice, this 
 *    list of conditions and the following disclaimer.
 *  
 *  * Redistributions in binary form must reproduce the above copyright notice, 
 *    this list of conditions and the following disclaimer in the documentation 
 *    and/or other materials provided with the distribution.
 * 
 *  * Neither the name of OpenSeadragon nor the names of its contributors may be 
 *    used to endorse or promote products derived from this software without 
 *    specific prior written permission.
 * 
 *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" 
 *  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE 
 *  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE 
 *  ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE 
 *  LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR 
 *  CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF 
 *  SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS 
 *  INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN 
 *  CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) 
 *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE 
 *  POSSIBILITY OF SUCH DAMAGE.
 * 
 * ---------------------------------------------------------------------------
 * </pre>
 * </p>
 * <p>
 * <strong> Work done by Chris Thatcher adds an MIT license </strong><br/>
 * <pre>
 * ----------------------------------------------------------------------------
 * (c) Christopher Thatcher 2011, 2012. All rights reserved.
 * 
 * Licensed with the MIT License
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * ---------------------------------------------------------------------------
 * </pre>
 * </p>
 **/
OpenSeadragon=window.OpenSeadragon||function(t){return new OpenSeadragon.Viewer(t)},function(t){var e={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},i=Object.prototype.toString,n=Object.prototype.hasOwnProperty;Array.prototype.push,Array.prototype.slice,String.prototype.trim,Array.prototype.indexOf,t.isFunction=function(e){return"function"===t.type(e)},t.isArray=Array.isArray||function(e){return"array"===t.type(e)},t.isWindow=function(t){return t&&"object"==typeof t&&"setInterval"in t},t.type=function(t){return null==t?String(t):e[i.call(t)]||"object"},t.isPlainObject=function(e){if(!e||"object"!==OpenSeadragon.type(e)||e.nodeType||t.isWindow(e))return!1;if(e.constructor&&!n.call(e,"constructor")&&!n.call(e.constructor.prototype,"isPrototypeOf"))return!1;var i;for(i in e);return void 0===i||n.call(e,i)},t.isEmptyObject=function(t){for(var e in t)return!1;return!0}}(OpenSeadragon),function(t){function e(t,e){return e&&t!=document.body?document.body:t.offsetParent}function n(e,i){var n,o,a=null;if(!e)throw new Error(t.getString("Errors.Security"));if(200!==e.status&&0!==e.status)throw n=e.status,o=404==n?"Not Found":e.statusText,new Error(t.getString("Errors.Status",n,o));return e.responseXML&&e.responseXML.documentElement?a=e.responseXML:e.responseText&&(a=t.parseXml(e.responseText)),s(a,i)}function s(e,i){if(!e||!e.documentElement)throw new Error(t.getString("Errors.Xml"));var n=e.documentElement,s=n.tagName;if("Image"==s)try{return o(n,i)}catch(a){throw a instanceof Error?a:new Error(t.getString("Errors.Dzi"))}else{if("Collection"==s)throw new Error(t.getString("Errors.Dzc"));if("Error"==s)return r(n)}throw new Error(t.getString("Errors.Dzi"))}function o(e,i){var n,s,o,a=e.getAttribute("Format"),r=e.getElementsByTagName("Size")[0],l=e.getElementsByTagName("DisplayRect"),h=parseInt(r.getAttribute("Width")),c=parseInt(r.getAttribute("Height")),u=parseInt(e.getAttribute("TileSize")),d=parseInt(e.getAttribute("Overlap")),p=[];if(!imageFormatSupported(a))throw new Error(t.getString("Errors.ImageFormat",a.toUpperCase()));for(o=0;o<l.length;o++)n=l[o],s=n.getElementsByTagName("Rect")[0],p.push(new t.DisplayRect(parseInt(s.getAttribute("X")),parseInt(s.getAttribute("Y")),parseInt(s.getAttribute("Width")),parseInt(s.getAttribute("Height")),0,parseInt(n.getAttribute("MaxLevel"))));return new t.DziTileSource(h,c,u,d,i,a,p)}function a(e,i){var n,s,o=e.Format,a=e.Size,r=e.DisplayRect||[],l=parseInt(a.Width),h=parseInt(a.Height),c=parseInt(e.TileSize),u=parseInt(e.Overlap),d=[];if(!imageFormatSupported(o))throw new Error(t.getString("Errors.ImageFormat",o.toUpperCase()));for(s=0;s<r.length;s++)n=r[s].Rect,d.push(new t.DisplayRect(parseInt(n.X),parseInt(n.Y),parseInt(n.Width),parseInt(n.Height),0,parseInt(n.MaxLevel)));return new t.DziTileSource(l,h,c,u,i,o,d)}function r(t){var e=t.getElementsByTagName("Message")[0],i=e.firstChild.nodeValue;throw new Error(i)}t.extend=function(){var t,e,i,n,s,o,a=arguments[0]||{},r=arguments.length,l=!1,h=1;for("boolean"==typeof a&&(l=a,a=arguments[1]||{},h=2),"object"==typeof a||OpenSeadragon.isFunction(a)||(a={}),r===h&&(a=this,--h);r>h;h++)if(null!=(t=arguments[h]))for(e in t)i=a[e],n=t[e],a!==n&&(l&&n&&(OpenSeadragon.isPlainObject(n)||(s=OpenSeadragon.isArray(n)))?(s?(s=!1,o=i&&OpenSeadragon.isArray(i)?i:[]):o=i&&OpenSeadragon.isPlainObject(i)?i:{},a[e]=OpenSeadragon.extend(l,o,n)):void 0!==n&&(a[e]=n));return a},t.extend(t,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,animationTime:1.5,blendTime:.1,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,wrapHorizontal:!1,wrapVertical:!1,panHorizontal:!0,panVertical:!0,visibilityRatio:.5,springStiffness:5,clickTimeThreshold:300,clickDistThreshold:5,zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:2,showNavigationControl:!0,showSequenceControl:!0,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,preserveViewport:!1,defaultZoomLevel:0,showNavigator:!0,navigatorElement:null,navigatorHeight:null,navigatorWidth:null,navigatorPosition:null,navigatorSizeRatio:.2,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,onPageChange:null,minPixelRatio:.5,imageLoaderLimit:0,maxImageCacheCount:200,minZoomImageRatio:.8,maxZoomPixelRatio:2,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:"#437AB2"},SIGNAL:"----seadragon----",delegate:function(t,e){return function(){return void 0===arguments&&(arguments=[]),e.apply(t,arguments)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5},getElement:function(t){return"string"==typeof t&&(t=document.getElementById(t)),t},getElementPosition:function(i){var n,s,o=new t.Point;for(i=t.getElement(i),n="fixed"==t.getElementStyle(i).position,s=e(i,n);s;)o.x+=i.offsetLeft,o.y+=i.offsetTop,n&&(o=o.plus(t.getPageScroll())),i=s,n="fixed"==t.getElementStyle(i).position,s=e(i,n);return o},getElementSize:function(e){return e=t.getElement(e),new t.Point(e.clientWidth,e.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(e){return e=t.getElement(e),e.currentStyle}:function(e){return e=t.getElement(e),window.getComputedStyle(e,"")},getEvent:function(e){return t.getEvent=e?function(t){return t}:function(){return window.event},t.getEvent(e)},getMousePosition:function(e){if("number"==typeof e.pageX)t.getMousePosition=function(e){var i=new t.Point;return e=t.getEvent(e),i.x=e.pageX,i.y=e.pageY,i};else{if("number"!=typeof e.clientX)throw new Error("Unknown event mouse position, no known technique.");t.getMousePosition=function(e){var i=new t.Point;return e=t.getEvent(e),i.x=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i.y=e.clientY+document.body.scrollTop+document.documentElement.scrollTop,i}}return t.getMousePosition(e)},getPageScroll:function(){var e=document.documentElement||{},i=document.body||{};return t.getPageScroll="number"==typeof window.pageXOffset?function(){return new t.Point(window.pageXOffset,window.pageYOffset)}:i.scrollLeft||i.scrollTop?function(){return new t.Point(document.body.scrollLeft,document.body.scrollTop)}:e.scrollLeft||e.scrollTop?function(){return new t.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)}:function(){return new t.Point(0,0)},t.getPageScroll()},getWindowSize:function(){var e=document.documentElement||{},i=document.body||{};if("number"==typeof window.innerWidth)t.getWindowSize=function(){return new t.Point(window.innerWidth,window.innerHeight)};else if(e.clientWidth||e.clientHeight)t.getWindowSize=function(){return new t.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else{if(!i.clientWidth&&!i.clientHeight)throw new Error("Unknown window size, no known technique.");t.getWindowSize=function(){return new t.Point(document.body.clientWidth,document.body.clientHeight)}}return t.getWindowSize()},makeCenteredNode:function(e){var i,n,s=t.makeNeutralElement("div"),o=[];for(e=t.getElement(e),o.push('<div style="display:table; height:100%; width:100%;'),o.push("border:none; margin:0px; padding:0px;"),o.push('#position:relative; overflow:hidden; text-align:left;">'),o.push('<div style="#position:absolute; #top:50%; width:100%; '),o.push("border:none; margin:0px; padding:0px;"),o.push('display:table-cell; vertical-align:middle;">'),o.push('<div style="#position:relative; #top:-50%; width:100%; '),o.push("border:none; margin:0px; padding:0px;"),o.push('text-align:center;"></div></div></div>'),s.innerHTML=o.join(""),s=s.firstChild,i=s,n=s.getElementsByTagName("div");n.length>0;)i=n[0],n=i.getElementsByTagName("div");return i.appendChild(e),s},makeNeutralElement:function(t){var e=document.createElement(t),i=e.style;return i.background="transparent none",i.border="none",i.margin="0px",i.padding="0px",i.position="static",e},makeTransparentImage:function(e){return t.makeTransparentImage=function(e){var i=t.makeNeutralElement("img");return i.src=e,i},t.Browser.vendor==t.BROWSERS.IE&&t.Browser.version<7&&(t.makeTransparentImage=function(e){var i=t.makeNeutralElement("img"),n=null;return n=t.makeNeutralElement("span"),n.style.display="inline-block",i.onload=function(){n.style.width=n.style.width||i.width+"px",n.style.height=n.style.height||i.height+"px",i.onload=null,i=null},i.src=e,n.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"', sizingMethod='scale')",n}),t.makeTransparentImage(e)},setElementOpacity:function(e,i,n){var s,o;if(e=t.getElement(e),n&&!t.Browser.alpha&&(i=Math.round(i)),e.style.opacity=1>i?i:"",1==i)return prevFilter=e.style.filter||"",e.style.filter=prevFilter.replace(/alpha\(.*?\)/g,""),void 0;s=Math.round(100*i),o=" alpha(opacity="+s+") ";try{e.filters&&e.filters.alpha?e.filters.alpha.opacity=s:e.style.filter+=o}catch(a){e.style.filter+=o}},addEvent:function(e,i,n,s){if(e=t.getElement(e),e.addEventListener)t.addEvent=function(e,i,n,s){e=t.getElement(e),e.addEventListener(i,n,s)};else{if(!e.attachEvent)throw new Error("Unable to attach event handler, no known technique.");t.addEvent=function(e,i,n,s){e=t.getElement(e),e.attachEvent("on"+i,n),s&&e.setCapture&&e.setCapture()}}return t.addEvent(e,i,n,s)},removeEvent:function(e,i,n,s){if(e=t.getElement(e),e.removeEventListener)t.removeEvent=function(e,i,n,s){e=t.getElement(e),e.removeEventListener(i,n,s)};else{if(!e.detachEvent)throw new Error("Unable to detach event handler, no known technique.");t.removeEvent=function(e,i,n,s){e=t.getElement(e),e.detachEvent("on"+i,n),s&&e.releaseCapture&&e.releaseCapture()}}return t.removeEvent(e,i,n,s)},cancelEvent:function(e){e=t.getEvent(e),t.cancelEvent=e.preventDefault?function(t){t.preventDefault()}:function(e){e=t.getEvent(e),e.cancel=!0,e.returnValue=!1},t.cancelEvent(e)},stopEvent:function(e){e=t.getEvent(e),t.stopEvent=e.stopPropagation?function(t){t.stopPropagation()}:function(e){e=t.getEvent(e),e.cancelBubble=!0},t.stopEvent(e)},createCallback:function(t,e){var i,n=[];for(i=2;i<arguments.length;i++)n.push(arguments[i]);return function(){var i,s=n.concat([]);for(i=0;i<arguments.length;i++)s.push(arguments[i]);return e.apply(t,s)}},getUrlParameter:function(t){var e=c[t];return e?e:null},createAjaxRequest:function(){var e;if(window.ActiveXObject)for(i=0;i<l.length;i++)try{e=new ActiveXObject(l[i]),t.createAjaxRequest=function(){return new ActiveXObject(l[i])};break}catch(n){continue}else window.XMLHttpRequest&&(t.createAjaxRequest=function(){return new XMLHttpRequest},e=new XMLHttpRequest);if(!e)throw new Error("Browser doesn't support XMLHttpRequest.");return e},makeAjaxRequest:function(e,i){var n,s=!0,o=t.createAjaxRequest();t.isPlainObject(e)?n.async=n.async||s:n={url:e,async:t.isFunction(i),success:i,error:null},n.async&&(o.onreadystatechange=function(){4==o.readyState&&(o.onreadystatechange=new function(){},n.success(o))});try{o.open("GET",n.url,n.async),o.send(null)}catch(a){t.console.log("%s while making AJAX request: %s",a.name,a.message),o.onreadystatechange=null,o=null,n.error&&t.isFunction(n.error)&&n.error(o)}return!n.async&&t.isFunction(n.success)&&n.success(o),n.async?null:o},jsonp:function(e){var i,n=e.url,s=document.head||document.getElementsByTagName("head")[0]||document.documentElement,o=e.callbackName||"openseadragon"+ +new Date,a=window[o],r="$1"+o+"$2",l=e.param||"callback",h=e.callback;n=n.replace(/(\=)\?(&|$)|\?\?/i,r),n+=(/\?/.test(n)?"&":"?")+l+"="+o,window[o]=function(e){if(a)window[o]=a;else try{delete window[o]}catch(i){}h&&t.isFunction(h)&&h(e)},i=document.createElement("script"),(void 0!==e.async||!1!==e.async)&&(i.async="async"),e.scriptCharset&&(i.charset=e.scriptCharset),i.src=n,i.onload=i.onreadystatechange=function(t,e){(e||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,s&&i.parentNode&&s.removeChild(i),i=void 0)},s.insertBefore(i,s.firstChild)},createFromDZI:function(e,i,o){function r(t,e){try{return t(e,u)}catch(i){if(p)return null;throw i}}var l,h,c,u,d,p="function"==typeof i,f="<"!=e.substring(0,1)&&"{"!=e.substring(0,1)?e:null,m=f?null:e,g=null;return o?u=o+"/_files/":f&&(l=f.split("/"),h=l[l.length-1],h.match(/_dzi\.js$/)&&(h=h.replace("_dzi.js",".js")),c=h.lastIndexOf("."),c>-1&&(l[l.length-1]=h.slice(0,c)),u=l.join("/")+"_files/"),p?(m?window.setTimeout(function(){var e=r(s,t.parseXml(xmlString));i(e,g)},1):f.match(/_dzi\.js$/)?(d=f.split("/").pop().replace(".js",""),t.jsonp({url:f,callbackName:d,callback:function(t){var e=r(a,t.Image);i(e)}})):t.makeAjaxRequest(f,function(t){var e=r(n,t);i(e,g)}),null):m?r(s,t.parseXml(m)):r(n,t.makeAjaxRequest(f))},parseXml:function(e){if(window.ActiveXObject)t.parseXml=function(t){var e=null;return e=new ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.loadXML(t),e};else{if(!window.DOMParser)throw new Error("Browser doesn't support XML DOM.");t.parseXml=function(t){var e,i=null;return e=new DOMParser,i=e.parseFromString(t,"text/xml")}}return t.parseXml(e)},imageFormatSupported:function(t){return t=t?t:"",!!h[t.toLowerCase()]}}),t.Browser={vendor:t.BROWSERS.UNKNOWN,version:0,alpha:!0};var l=["Msxml2.XMLHTTP","Msxml3.XMLHTTP","Microsoft.XMLHTTP"],h={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},c={};!function(){var e=(navigator.appName,navigator.appVersion),i=navigator.userAgent;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&(t.Browser.vendor=t.BROWSERS.IE,t.Browser.version=parseFloat(i.substring(i.indexOf("MSIE")+5,i.indexOf(";",i.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(i.indexOf("Firefox")>=0?(t.Browser.vendor=t.BROWSERS.FIREFOX,t.Browser.version=parseFloat(i.substring(i.indexOf("Firefox")+8))):i.indexOf("Safari")>=0&&(t.Browser.vendor=i.indexOf("Chrome")>=0?t.BROWSERS.CHROME:t.BROWSERS.SAFARI,t.Browser.version=parseFloat(i.substring(i.substring(0,i.indexOf("Safari")).lastIndexOf("/")+1,i.indexOf("Safari")))));break;case"Opera":t.Browser.vendor=t.BROWSERS.OPERA,t.Browser.version=parseFloat(e)}var n,s,o,a=window.location.search.substring(1),r=a.split("&");for(o=0;o<r.length;o++)n=r[o],s=n.indexOf("="),s>0&&(c[n.substring(0,s)]=decodeURIComponent(n.substring(s+1)));t.Browser.alpha=!(t.Browser.vendor==t.BROWSERS.IE&&t.Browser.version<9||t.Browser.vendor==t.BROWSERS.CHROME&&t.Browser.version<2)}();var u=function(){};t.console=window.console||{log:u,debug:u,info:u,warn:u,error:u}}(OpenSeadragon),function(t){t.EventHandler=function(){this.events={}},t.EventHandler.prototype={addHandler:function(e,i){var n=this.events[e];n||(this.events[e]=n=[]),i&&t.isFunction(i)&&(n[n.length]=i)},removeHandler:function(t){var e=this.events[t];!e},getHandler:function(t){var e=this.events[t];return e&&e.length?(e=1===e.length?[e[0]]:Array.apply(null,e),function(t,i){var n,s=e.length;for(n=0;s>n;n++)e[n]&&e[n](t,i)}):null},raiseEvent:function(t,e){var i=this.getHandler(t);i&&(e||(e=new Object),i(this,e))}}}(OpenSeadragon),function(t){function e(e){var i,n,s=["mouseover","mouseout","mousedown","mouseup","click","DOMMouseScroll","mousewheel","touchstart","touchmove","touchend","keypress","focus","blur"],o=L[e.hash];if(!o.tracking){for(n=0;n<s.length;n++)i=s[n],t.addEvent(e.element,i,o[i],!1);o.tracking=!0,I[e.hash]=e}}function i(e){var i,n,s=["mouseover","mouseout","mousedown","mouseup","click","DOMMouseScroll","mousewheel","touchstart","touchmove","touchend","keypress","focus","blur"],a=L[e.hash];if(a.tracking){for(n=0;n<s.length;n++)i=s[n],t.removeEvent(e.element,i,a[i],!1);o(e),a.tracking=!1,delete I[e.hash]}}function n(t){return L[t.hash].insideElement}function s(e){var i=L[e.hash];i.capturing||(t.Browser.vendor==t.BROWSERS.IE&&t.Browser.version<9?(t.removeEvent(e.element,"mouseup",i.mouseup,!1),t.addEvent(e.element,"mouseup",i.mouseupie,!0),t.addEvent(e.element,"mousemove",i.mousemoveie,!0)):(t.addEvent(window,"mouseup",i.mouseupwindow,!0),t.addEvent(window,"mousemove",i.mousemove,!0)),i.capturing=!0)}function o(e){var i=L[e.hash];i.capturing&&(t.Browser.vendor==t.BROWSERS.IE&&t.Browser.version<9?(t.removeEvent(e.element,"mousemove",i.mousemoveie,!0),t.removeEvent(e.element,"mouseup",i.mouseupie,!0),t.addEvent(e.element,"mouseup",i.mouseup,!1)):(t.removeEvent(window,"mousemove",i.mousemove,!0),t.removeEvent(window,"mouseup",i.mouseupwindow,!0)),i.capturing=!1)}function a(t,e,i){var n;for(n in I)I.hasOwnProperty(n)&&t.hash!=n&&e(I[n],i)}function r(e,i){var n;e.focusHandler&&(n=e.focusHandler(e,i),n===!1&&t.cancelEvent(i))}function l(e,i){var n;e.blurHandler&&(n=e.blurHandler(e,i),n===!1&&t.cancelEvent(i))}function h(e,i){var n;e.keyHandler&&(n=e.keyHandler(e,i.keyCode?i.keyCode:i.charCode,i.shiftKey),n===!1&&t.cancelEvent(i))}function c(e,i){var n,i=t.getEvent(i),s=L[e.hash];t.Browser.vendor==t.BROWSERS.IE&&t.Browser.version<9&&s.capturing&&!C(i.srcElement,e.element)&&a(e,c,i);var o=i.target?i.target:i.srcElement,r=i.relatedTarget?i.relatedTarget:i.fromElement;C(e.element,o)&&!C(e.element,r)&&(s.insideElement=!0,e.enterHandler&&(n=e.enterHandler(e,S(i,e.element),s.buttonDown,P),n===!1&&t.cancelEvent(i)))}function u(e,i){var n,i=t.getEvent(i),s=L[e.hash];t.Browser.vendor==t.BROWSERS.IE&&t.Browser.version<9&&s.capturing&&!C(i.srcElement,e.element)&&a(e,u,i);var o=i.target?i.target:i.srcElement,r=i.relatedTarget?i.relatedTarget:i.toElement;C(e.element,o)&&!C(e.element,r)&&(s.insideElement=!1,e.exitHandler&&(n=e.exitHandler(e,S(i,e.element),s.buttonDown,P),n===!1&&t.cancelEvent(i)))}function d(e,i){var n,i=t.getEvent(i),o=L[e.hash];2!=i.button&&(o.buttonDown=!0,o.lastPoint=T(i),o.lastMouseDownPoint=o.lastPoint,o.lastMouseDownTime=+new Date,e.pressHandler&&(n=e.pressHandler(e,S(i,e.element)),n===!1&&t.cancelEvent(i)),(e.pressHandler||e.dragHandler)&&t.cancelEvent(i),t.Browser.vendor==t.BROWSERS.IE&&t.Browser.version<9&&M?t.Browser.vendor==t.BROWSERS.IE&&t.Browser.version<9&&A.push(e):(s(e),M=!0,A=[e]))}function p(t,e){var i,n;1==e.touches.length&&1==e.targetTouches.length&&1==e.changedTouches.length&&(L[t.hash].lastTouch=e.touches[0],c(t,e.changedTouches[0]),d(t,e.touches[0])),2==e.touches.length&&(i=T(e.touches[0]),n=T(e.touches[1]),L[t.hash].lastPinchDelta=Math.abs(i.x-n.x)+Math.abs(i.y-n.y)),e.preventDefault()}function f(e,i){var n,i=t.getEvent(i),s=L[e.hash],o=s.buttonDown,a=s.insideElement;2!=i.button&&(s.buttonDown=!1,e.releaseHandler&&(n=e.releaseHandler(e,S(i,e.element),o,a),n===!1&&t.cancelEvent(i)),o&&a&&b(e,i))}function m(t,e){0==e.touches.length&&0==e.targetTouches.length&&1==e.changedTouches.length&&(L[t.hash].lastTouch=null,f(t,e.changedTouches[0]),u(t,e.changedTouches[0])),2==e.touches.length+e.changedTouches.length&&(L[t.hash].lastPinchDelta=null),e.preventDefault()}function g(e,i){var s,a,i=t.getEvent(i);if(2!=i.button){for(a=0;a<A.length;a++)s=A[a],n(s)||f(s,i);o(e),M=!1,i.srcElement.fireEvent("on"+i.type,document.createEventObject(i)),t.stopEvent(i)}}function v(t,e){L[t.hash].insideElement||f(t,e),o(t)}function y(e,i){e.clickHandler&&t.cancelEvent(i)}function _(e,i){var n,s=0;i||(i=window.event),i.wheelDelta?(s=i.wheelDelta,window.opera&&(s=-s)):i.detail&&(s=-i.detail),s=s>0?1:-1,e.scrollHandler&&Modernizr.touch&&e.scrollHandler&&(n=e.scrollHandler(e,S(i,e.element),s,i.shiftKey),n===!1&&t.cancelEvent(i))}function b(e,i){var n,i=t.getEvent(i),s=L[e.hash];if(2!=i.button){var o=+new Date-s.lastMouseDownTime,a=T(i),r=s.lastMouseDownPoint.distanceTo(a),l=o<=e.clickTimeThreshold&&r<=e.clickDistThreshold;e.clickHandler&&(n=e.clickHandler(e,S(i,e.element),l,i.shiftKey),n===!1&&t.cancelEvent(i))}}function w(e,i){var n,i=t.getEvent(i),s=L[e.hash],o=T(i),a=o.minus(s.lastPoint);s.lastPoint=o,e.dragHandler&&(n=e.dragHandler(e,S(i,e.element),a,i.shiftKey),n===!1&&t.cancelEvent(i))}function x(t,e){var i,n,s;1===e.touches.length&&1===e.targetTouches.length&&1===e.changedTouches.length&&L[t.hash].lastTouch===e.touches[0]?w(t,e.touches[0]):2===e.touches.length&&(i=T(e.touches[0]),n=T(e.touches[1]),s=Math.abs(i.x-n.x)+Math.abs(i.y-n.y),Math.abs(L[t.hash].lastPinchDelta-s)>75&&(_(t,{shift:!1,pageX:(e.touches[0].pageX+e.touches[1].pageX)/2,pageY:(e.touches[0].pageY+e.touches[1].pageY)/2,detail:L[t.hash].lastPinchDelta>s?1:-1}),L[t.hash].lastPinchDelta=s)),e.preventDefault()}function k(e,i){var n;for(n=0;n<A.length;n++)w(A[n],i);t.stopEvent(i)}function T(e){return t.getMousePosition(e)}function S(e,i){var n=t.getMousePosition(e),s=t.getElementPosition(i);return n.minus(s)}function C(t,e){for(var i=document.body;e&&t!=e&&i!=e;)try{e=e.parentNode}catch(n){return!1}return t==e}function D(){P=!0}function E(){P=!1}var P=!1,M=!1,I={},A=[],L={};t.MouseTracker=function(e){var i=arguments;t.isPlainObject(e)||(e={element:i[0],clickTimeThreshold:i[1],clickDistThreshold:i[2]}),this.hash=Math.random(),this.element=t.getElement(e.element),this.clickTimeThreshold=e.clickTimeThreshold,this.clickDistThreshold=e.clickDistThreshold,this.enterHandler=e.enterHandler||null,this.exitHandler=e.exitHandler||null,this.pressHandler=e.pressHandler||null,this.releaseHandler=e.releaseHandler||null,this.scrollHandler=e.scrollHandler||null,this.clickHandler=e.clickHandler||null,this.dragHandler=e.dragHandler||null,this.keyHandler=e.keyHandler||null,this.focusHandler=e.focusHandler||null,this.blurHandler=e.blurHandler||null;var n=this;L[this.hash]={mouseover:function(t){c(n,t)},mouseout:function(t){u(n,t)},mousedown:function(t){d(n,t)},mouseup:function(t){f(n,t)},click:function(t){y(n,t)},DOMMouseScroll:function(t){_(n,t)},mousewheel:function(t){_(n,t)},mouseupie:function(t){g(n,t)},mousemoveie:function(t){k(n,t)},mouseupwindow:function(t){v(n,t)},mousemove:function(t){w(n,t)},touchstart:function(t){p(n,t)},touchmove:function(t){x(n,t)},touchend:function(t){m(n,t)},keypress:function(t){h(n,t)},focus:function(t){r(n,t)},blur:function(t){l(n,t)},tracking:!1,capturing:!1,buttonDown:!1,insideElement:!1,lastPoint:null,lastMouseDownTime:null,lastMouseDownPoint:null,lastPinchDelta:0}},t.MouseTracker.prototype={isTracking:function(){return L[this.hash].tracking},setTracking:function(t){return t?e(this):i(this),this},enterHandler:function(){},exitHandler:function(){},pressHandler:function(){},releaseHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dragHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}},function(){t.Browser.vendor==t.BROWSERS.IE&&t.Browser.version<9?(t.addEvent(document,"mousedown",D,!1),t.addEvent(document,"mouseup",E,!1)):(t.addEvent(window,"mousedown",D,!0),t.addEvent(window,"mouseup",E,!0))}()}(OpenSeadragon),function(t){t.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4},t.Control=function(e,i,n){this.element=e,this.anchor=i,this.container=n,this.wrapper=t.makeNeutralElement("span"),this.wrapper.style.display="inline-block",this.wrapper.appendChild(this.element),this.anchor==t.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%"),this.anchor==t.ControlAnchor.TOP_RIGHT||this.anchor==t.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper)},t.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.container.removeChild(this.wrapper)},isVisible:function(){return"none"!=this.wrapper.style.display},setVisible:function(t){this.wrapper.style.display=t?"inline-block":"none"},setOpacity:function(e){this.element[t.SIGNAL]&&t.Browser.vendor==t.BROWSERS.IE?t.setElementOpacity(this.element,e,!0):t.setElementOpacity(this.wrapper,e,!0)}}}(OpenSeadragon),function(t){function e(t,e){var i,n=t.controls;for(i=n.length-1;i>=0;i--)if(n[i].element==e)return i;return-1}t.ControlDock=function(e){var i,n,s=["topleft","topright","bottomright","bottomleft"];for(t.extend(!0,this,{id:"controldock-"+ +new Date+"-"+Math.floor(1e6*Math.random()),container:t.makeNeutralElement("form"),controls:[]},e),this.element&&(this.element=t.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),n=0;n<s.length;n++)i=s[n],this.controls[i]=t.makeNeutralElement("div"),this.controls[i].style.position="absolute",i.match("left")&&(this.controls[i].style.left="0px"),i.match("right")&&(this.controls[i].style.right="0px"),i.match("top")&&(this.controls[i].style.top="0px"),i.match("bottom")&&(this.controls[i].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},t.ControlDock.prototype={addControl:function(i,n){var i=t.getElement(i),s=null;if(!(e(this,i)>=0)){switch(n){case t.ControlAnchor.TOP_RIGHT:s=this.controls.topright,i.style.position="relative",i.style.paddingRight="0px",i.style.paddingTop="0px";break;case t.ControlAnchor.BOTTOM_RIGHT:s=this.controls.bottomright,i.style.position="relative",i.style.paddingRight="0px",i.style.paddingBottom="0px";break;case t.ControlAnchor.BOTTOM_LEFT:s=this.controls.bottomleft,i.style.position="relative",i.style.paddingLeft="0px",i.style.paddingBottom="0px";break;case t.ControlAnchor.TOP_LEFT:s=this.controls.topleft,i.style.position="relative",i.style.paddingLeft="0px",i.style.paddingTop="0px";break;case t.ControlAnchor.NONE:default:s=this.container,i.style.margin="0px",i.style.padding="0px"}this.controls.push(new t.Control(i,n,s)),i.style.display="inline-block"}},removeControl:function(i){var i=t.getElement(i),n=e(this,i);return n>=0&&(this.controls[n].destroy(),this.controls.splice(n,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var t;for(t=this.controls.length-1;t>=0;t--)if(this.controls[t].isVisible())return!0;return!1},setControlsEnabled:function(t){var e;for(e=this.controls.length-1;e>=0;e--)this.controls[e].setVisible(t);return this}}}(OpenSeadragon),function(t){function e(t,e,i){var n,s,o;return M[t.hash].animating?window.setTimeout(function(){e(t)},1):(n=+new Date,i=i?i:n,s=i+1e3/60,o=Math.max(1,s-n),window.setTimeout(function(){e(t)},o))}function i(t){window.setTimeout(function(){s(t)},20)}function n(t){t.autoHideControls&&(t.controlsShouldFade=!0,t.controlsFadeBeginTime=+new Date+t.controlsFadeDelay,window.setTimeout(function(){i(t)},t.controlsFadeDelay))}function s(t){var e,n,s,o;if(t.controlsShouldFade){for(e=(new Date).getTime(),n=e-t.controlsFadeBeginTime,s=1-n/t.controlsFadeLength,s=Math.min(1,s),s=Math.max(0,s),o=t.controls.length-1;o>=0;o--)t.controls[o].setOpacity(s);s>0&&i(t)}}function o(t){var e;for(t.controlsShouldFade=!1,e=t.controls.length-1;e>=0;e--)t.controls[e].setOpacity(1)}function a(){o(this)}function r(){n(this)}function l(t,e,i,n){var s;this.viewport&&i&&(zoomPerClick=this.zoomPerClick,s=n?1/zoomPerClick:zoomPerClick,this.viewport.zoomBy(s,this.viewport.pointFromPixel(e,!0)),this.viewport.applyConstraints())}function h(t,e,i){this.viewport&&(this.panHorizontal||(i.x=0),this.panVertical||(i.y=0),this.viewport.panBy(this.viewport.deltaPointsFromPixels(i.negate())))}function c(t,e,i){i&&this.viewport&&this.viewport.applyConstraints()}function u(t,e,i){var n;return this.viewport&&(n=Math.pow(this.zoomPerScroll,i),this.viewport.zoomBy(n,this.viewport.pointFromPixel(e,!0)),this.viewport.applyConstraints()),!1}function d(t,e,i){i||(M[this.hash].mouseInside=!1,M[this.hash].animating||n(this))}function p(t,e,i,s){s||(M[this.hash].mouseInside=!1,M[this.hash].animating||n(this))}function f(){M[this.hash].mouseInside=!0,o(this)}function m(t){var i;t.source&&(i=+new Date,g(t),e(t,arguments.callee,i))}function g(e){var i,s;e.source&&(i=t.getElementSize(e.container),i.equals(M[e.hash].prevContainerSize)||(e.viewport.resize(i,!0),M[e.hash].prevContainerSize=i,e.raiseEvent("resize")),s=e.viewport.update(),e.referenceStrip&&(s=e.referenceStrip.update(e.viewport)||s),!M[e.hash].animating&&s&&(e.raiseEvent("animationstart"),o(e)),s?(e.drawer.update(),e.navigator&&e.navigator.update(e.viewport),e.raiseEvent("animation")):(M[e.hash].forceRedraw||e.drawer.needsUpdate())&&(e.drawer.update(),e.navigator&&e.navigator.update(e.viewport),M[e.hash].forceRedraw=!1),M[e.hash].animating&&!s&&(e.raiseEvent("animationfinish"),M[e.hash].mouseInside||n(e)),M[e.hash].animating=s)}function v(t,e){return t?t+e:e}function y(){M[this.hash].lastZoomTime=+new Date,M[this.hash].zoomFactor=this.zoomPerSecond,M[this.hash].zooming=!0,w(this)}function _(){M[this.hash].lastZoomTime=+new Date,M[this.hash].zoomFactor=1/this.zoomPerSecond,M[this.hash].zooming=!0,w(this)}function b(){M[this.hash].zooming=!1}function w(e){window.setTimeout(t.delegate(e,x),10)}function x(){var t,e;M[this.hash].zooming&&this.viewport&&(t=+new Date,e=t-M[this.hash].lastZoomTime,adjustedFactor=Math.pow(M[this.hash].zoomFactor,e/1e3),this.viewport.zoomBy(adjustedFactor),this.viewport.applyConstraints(),M[this.hash].lastZoomTime=t,w(this))}function k(){this.viewport&&(M[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function T(){this.viewport&&(M[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function S(){this.buttons.emulateEnter(),this.buttons.emulateExit()}function C(){this.viewport&&this.viewport.goHome()}function D(){this.setFullPage(!this.isFullPage()),this.buttons&&this.buttons.emulateExit(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function E(){var t=M[this.hash].sequence-1;this.goToPage(t)}function P(){var t=M[this.hash].sequence+1;this.goToPage(t)}var M={},I={};t.Viewer=function(e){var i,s=arguments,o=this;t.isPlainObject(e)||(e={id:s[0],xmlPath:s.length>1?s[1]:void 0,prefixUrl:s.length>2?s[2]:void 0,controls:s.length>3?s[3]:void 0,overlays:s.length>4?s[4]:void 0,overlayControls:s.length>5?s[5]:void 0}),e.config&&(t.extend(!0,e,e.config),delete e.config),t.extend(!0,this,{id:e.id,hash:e.id,element:null,canvas:null,container:null,overlays:[],overlayControls:[],previousBody:[],customControls:[],source:null,drawer:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},t.DEFAULT_SETTINGS,e),M[this.hash]={fsBoundsDelta:new t.Point(1,1),prevContainerSize:null,lastOpenStartTime:0,lastOpenEndTime:0,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,sequenced:!1,sequence:0},t.EventHandler.call(this),t.ControlDock.call(this,e);var a;for(this.xmlPath&&(this.tileSources=[this.xmlPath]),this.tileSources&&(t.isArray(this.tileSources)?(this.tileSources.length>1&&(M[this.hash].sequenced=!0),a=this.tileSources[0]):a=this.tileSources,this.openTileSource(a)),this.element=this.element||document.getElementById(this.id),this.canvas=t.makeNeutralElement("div"),function(t){t.width="100%",t.height="100%",t.overflow="hidden",t.position="absolute",t.top="0px",t.left="0px"}(this.canvas.style),function(t){t.width="100%",t.height="100%",t.position="relative",t.overflow="hidden",t.left="0px",t.top="0px",t.textAlign="left"}(this.container.style),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new t.MouseTracker({element:this.canvas,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,clickHandler:t.delegate(this,l),dragHandler:t.delegate(this,h),releaseHandler:t.delegate(this,c),scrollHandler:t.delegate(this,u)}).setTracking(this.mouseNavEnabled?!0:!1),this.outerTracker=new t.MouseTracker({element:this.container,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:t.delegate(this,f),exitHandler:t.delegate(this,d),releaseHandler:t.delegate(this,p)}).setTracking(this.mouseNavEnabled?!0:!1),this.toolbar&&(this.toolbar=new t.ControlDock({element:this.toolbar})),this.bindStandardControls(),this.bindSequenceControls(),i=0;i<this.customControls.length;i++)this.addControl(this.customControls[i].id,this.customControls[i].anchor);
window.setTimeout(function(){n(o)},1)},t.extend(t.Viewer.prototype,t.EventHandler.prototype,t.ControlDock.prototype,{isOpen:function(){return!!this.source},openDzi:function(e){var i=this;return t.createFromDZI(e,function(t){i.open(t)},this.tileHost),this},openTileSource:function(e){var i,n,s,o,a=this;return setTimeout(function(){"string"==t.type(e)?e=new t.TileSource(e,function(t){a.open(t)}):t.isPlainObject(e)?t.isFunction(e.getTileUrl)?(i=new t.TileSource(e),i.getTileUrl=e.getTileUrl,a.open(i)):(s=t.TileSource.determineType(a,e),o=s.prototype.configure.apply(a,[e]),n=new s(o),a.open(n)):a.open(e)},1),this},open:function(i){var n,s,o=this;for(this.source&&this.close(),M[this.hash].lastOpenStartTime=+new Date,window.setTimeout(function(){M[o.hash].lastOpenStartTime>M[o.hash].lastOpenEndTime&&M[o.hash].setMessage(t.getString("Messages.Loading"))},2e3),M[this.hash].lastOpenEndTime=+new Date,this.canvas.innerHTML="",M[this.hash].prevContainerSize=t.getElementSize(this.container),this.collectionMode?(this.source=new t.TileSourceCollection({rows:this.collectionRows,layout:this.collectionLayout,tileSize:this.collectionTileSize,tileSources:this.tileSources,tileMargin:this.collectionTileMargin}),this.viewport=this.viewport?this.viewport:new t.Viewport({collectionMode:!0,collectionTileSource:this.source,containerSize:M[this.hash].prevContainerSize,contentSize:this.source.dimensions,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:1,maxZoomPixelRatio:1})):(i&&(this.source=i),this.viewport=this.viewport?this.viewport:new t.Viewport({containerSize:M[this.hash].prevContainerSize,contentSize:this.source.dimensions,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical})),this.preserveVewport?this.viewport.resetContentSize(this.source.dimensions):(this.defaultZoomLevel||this.collectionMode)&&(this.collectionMode||this.viewport.zoomTo(this.defaultZoomLevel,this.viewport.getCenter(),!0)),this.drawer=new t.Drawer({source:this.source,viewport:this.viewport,element:this.canvas,overlays:this.overlays,maxImageCacheCount:this.maxImageCacheCount,imageLoaderLimit:this.imageLoaderLimit,minZoomImageRatio:this.minZoomImageRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,immediateRender:this.immediateRender,blendTime:this.blendTime,alwaysBlend:this.alwaysBlend,minPixelRatio:this.minPixelRatio,debugMode:this.debugMode,debugGridColor:this.debugGridColor}),this.showNavigator&&!this.navigator&&(this.navigator=new t.Navigator({id:this.navigatorElement,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,height:this.navigatorHeight,width:this.navigatorWidth,tileSources:this.tileSources,tileHost:this.tileHost,prefixUrl:this.prefixUrl,overlays:this.overlays,viewer:this})),this.showReferenceStrip&&!this.referenceStrip&&(this.referenceStrip=new t.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,tileHost:this.tileHost,prefixUrl:this.prefixUrl,overlays:this.overlays,viewer:this})),M[this.hash].animating=!1,M[this.hash].forceRedraw=!0,e(this,m),s=0;s<this.overlayControls.length;s++)n=this.overlayControls[s],null!=n.point?this.drawer.addOverlay(n.id,new t.Point(n.point.X,n.point.Y),t.OverlayPlacement.TOP_LEFT):this.drawer.addOverlay(n.id,new t.Rect(n.rect.Point.X,n.rect.Point.Y,n.rect.Width,n.rect.Height),n.placement);return I[this.hash]=this,this.raiseEvent("open"),this.navigator&&this.navigator.open(i),this},close:function(){return this.source=null,this.drawer=null,this.viewport=this.preserveViewport?this.viewport:null,this.canvas.innerHTML="",I[this.hash]=null,delete I[this.hash],this},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(t){return this.innerTracker.setTracking(t),this},areControlsEnabled:function(){var t,e=this.controls.length;for(t=0;t<this.controls.length;t++)e=e&&this.controls[t].isVisibile();return e},setControlsEnabled:function(t){t?o(this):n(this)},isFullPage:function(){return this.element.parentNode==document.body},setFullPage:function(e){var i,n,s,o,a,r,l=document.body,h=l.style,c=document.documentElement.style,u=(this.element.style,this.canvas.style);if(e!=this.isFullPage()){if(e){for(this.bodyOverflow=h.overflow,this.docOverflow=c.overflow,h.overflow="hidden",c.overflow="hidden",this.bodyWidth=h.width,this.bodyHeight=h.height,h.width="100%",h.height="100%",u.backgroundColor="black",u.color="white",this.previousBody=[],M[this.hash].prevElementParent=this.element.parentNode,M[this.hash].prevNextSibling=this.element.prevNextSibling,M[this.hash].prevElementSize=t.getElementSize(this.element),a=l.childNodes.length,r=0;a>r;r++)this.previousBody.push(l.childNodes[0]),l.removeChild(l.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,l.appendChild(this.toolbar.element),this.toolbar.element.setAttribute("class",this.toolbar.element.className+" fullpage")),l.appendChild(this.element),this.element.style.height=this.toolbar&&this.toolbar.element?t.getWindowSize().y-t.getElementSize(this.toolbar.element).y+"px":t.getWindowSize().y+"px",this.element.style.width=t.getWindowSize().x+"px",t.delegate(this,f)()}else{for(h.overflow=this.bodyOverflow,c.overflow=this.docOverflow,h.width=this.bodyWidth,h.height=this.bodyHeight,u.backgroundColor="",u.color="",l.removeChild(this.element),a=this.previousBody.length,r=0;a>r;r++)l.appendChild(this.previousBody.shift());M[this.hash].prevElementParent.insertBefore(this.element,M[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(l.removeChild(this.toolbar.element),this.toolbar.element.setAttribute("class",this.toolbar.element.className.replace("fullpage","")),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.height=M[this.hash].prevElementSize.y+"px",this.element.style.width=M[this.hash].prevElementSize.x+"px",t.delegate(this,d)()}if(this.viewport){if(i=this.viewport.getBounds(),this.viewport.resize(M[this.hash].prevContainerSize),n=this.viewport.getBounds(),e)M[this.hash].fsBoundsDelta=new t.Point(n.width/i.width,n.height/i.height);else{this.viewport.update(),this.viewport.zoomBy(Math.max(M[this.hash].fsBoundsDelta.x,M[this.hash].fsBoundsDelta.y),null,!0);for(o in I)s=I[o],s!==this&&s!=this.navigator&&(s.open(s.source),s.navigator&&s.navigator.open(s.source))}M[this.hash].forceRedraw=!0,this.raiseEvent("resize",this),g(this)}return this}},isVisible:function(){return"hidden"!=this.container.style.visibility},setVisible:function(t){return this.container.style.visibility=t?"":"hidden",this},bindSequenceControls:function(){var e=t.delegate(this,a),i=t.delegate(this,r),n=t.delegate(this,P),s=t.delegate(this,E),o=this.navImages,l=!0;this.showSequenceControl&&M[this.hash].sequenced&&((this.previousButton||this.nextButton)&&(l=!1),this.previousButton=new t.Button({element:this.previousButton?t.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.PreviousPage"),srcRest:v(this.prefixUrl,o.previous.REST),srcGroup:v(this.prefixUrl,o.previous.GROUP),srcHover:v(this.prefixUrl,o.previous.HOVER),srcDown:v(this.prefixUrl,o.previous.DOWN),onRelease:s,onFocus:e,onBlur:i}),this.nextButton=new t.Button({element:this.nextButton?t.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.NextPage"),srcRest:v(this.prefixUrl,o.next.REST),srcGroup:v(this.prefixUrl,o.next.GROUP),srcHover:v(this.prefixUrl,o.next.HOVER),srcDown:v(this.prefixUrl,o.next.DOWN),onRelease:n,onFocus:e,onBlur:i}),this.previousButton.disable(),l&&(this.paging=new t.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,t.ControlAnchor.BOTTOM_RIGHT):this.addControl(this.pagingControl,t.ControlAnchor.TOP_LEFT)))},bindStandardControls:function(){var e=t.delegate(this,y),i=t.delegate(this,b),n=t.delegate(this,k),s=t.delegate(this,_),o=t.delegate(this,T),l=t.delegate(this,C),h=t.delegate(this,D),c=t.delegate(this,a),u=t.delegate(this,r),d=this.navImages,p=[],f=!0;this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton)&&(f=!1),p.push(this.zoomInButton=new t.Button({element:this.zoomInButton?t.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.ZoomIn"),srcRest:v(this.prefixUrl,d.zoomIn.REST),srcGroup:v(this.prefixUrl,d.zoomIn.GROUP),srcHover:v(this.prefixUrl,d.zoomIn.HOVER),srcDown:v(this.prefixUrl,d.zoomIn.DOWN),onPress:e,onRelease:i,onClick:n,onEnter:e,onExit:i,onFocus:c,onBlur:u})),p.push(this.zoomOutButton=new t.Button({element:this.zoomOutButton?t.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.ZoomOut"),srcRest:v(this.prefixUrl,d.zoomOut.REST),srcGroup:v(this.prefixUrl,d.zoomOut.GROUP),srcHover:v(this.prefixUrl,d.zoomOut.HOVER),srcDown:v(this.prefixUrl,d.zoomOut.DOWN),onPress:s,onRelease:i,onClick:o,onEnter:s,onExit:i,onFocus:c,onBlur:u})),p.push(this.homeButton=new t.Button({element:this.homeButton?t.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.Home"),srcRest:v(this.prefixUrl,d.home.REST),srcGroup:v(this.prefixUrl,d.home.GROUP),srcHover:v(this.prefixUrl,d.home.HOVER),srcDown:v(this.prefixUrl,d.home.DOWN),onRelease:l,onFocus:c,onBlur:u})),p.push(this.fullPageButton=new t.Button({element:this.fullPageButton?t.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.FullPage"),srcRest:v(this.prefixUrl,d.fullpage.REST),srcGroup:v(this.prefixUrl,d.fullpage.GROUP),srcHover:v(this.prefixUrl,d.fullpage.HOVER),srcDown:v(this.prefixUrl,d.fullpage.DOWN),onRelease:h,onFocus:c,onBlur:u})),f&&(this.buttons=new t.ButtonGroup({buttons:p,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttons.element,this.addHandler("open",t.delegate(this,S)),this.toolbar?this.toolbar.addControl(this.navControl,t.ControlAnchor.TOP_LEFT):this.addControl(this.navControl,t.ControlAnchor.TOP_LEFT)))},goToPage:function(e){this.tileSources.length>e&&(M[this.hash].sequence=e,this.nextButton&&(this.tileSources.length-1===e?this.nextButton.disable():this.nextButton.enable()),this.previousButton&&(e>0?this.previousButton.enable():this.previousButton.disable()),this.openTileSource(this.tileSources[e])),t.isFunction(this.onPageChange)&&this.onPageChange({page:e,viewer:this}),this.referenceStrip&&this.referenceStrip.setFocus(e)}})}(OpenSeadragon),function(t){function e(){this.displayRegion.focus()}function i(t,e,i){this.viewer.viewport&&(this.panHorizontal||(i.x=0),this.panVertical||(i.y=0),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(i)))}function n(t,e,i){i&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function s(t,e,i){var n;return this.viewer.viewport&&(n=Math.pow(this.zoomPerScroll,i),this.viewer.viewport.zoomBy(n,this.viewport.getCenter()),this.viewer.viewport.applyConstraints()),!1}t.Navigator=function(o){var a=this,r=o.viewer,l=t.getElementSize(r.element);o.id||(o.id="navigator-"+ +new Date,this.element=t.makeNeutralElement("div"),this.element.id=o.id,this.element.className="navigator"),o=t.extend(!0,{navigatorSizeRatio:t.DEFAULT_SETTINGS.navigatorSizeRatio},o,{element:this.element,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1}),o.minPixelRatio=this.minPixelRatio=r.minPixelRatio,function(t){t.marginTop="0px",t.marginRight="0px",t.marginBottom="0px",t.marginLeft="0px",t.border="2px solid #555",t.background="#000",t.opacity=.8,t.overflow="hidden"}(this.element.style),this.displayRegion=t.makeNeutralElement("textarea"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(t){t.position="relative",t.top="0px",t.left="0px",t.fontSize="0px",t.overflow="hidden",t.border="2px solid #900",t.background="transparent",t.float="left",t.cssFloat="left",t.styleFloat="left",t.zIndex=999999999,t.cursor="default"}(this.displayRegion.style),this.element.innerTracker=new t.MouseTracker({element:this.element,scrollHandler:function(){return!1}}).setTracking(!0),this.displayRegion.innerTracker=new t.MouseTracker({element:this.displayRegion,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,clickHandler:t.delegate(this,e),dragHandler:t.delegate(this,i),releaseHandler:t.delegate(this,n),scrollHandler:t.delegate(this,s),focusHandler:function(){var e=t.getElementPosition(a.viewer.element);window.scrollTo(0,e.y),a.viewer.setControlsEnabled(!0),function(t){t.border="2px solid #437AB2"}(this.element.style)},blurHandler:function(){a.viewer.setControlsEnabled(!1),function(t){t.border="2px solid #900"}(this.element.style)},keyHandler:function(e,i,n){switch(i){case 61:return a.viewer.viewport.zoomBy(1.1),a.viewer.viewport.applyConstraints(),!1;case 45:return a.viewer.viewport.zoomBy(.9),a.viewer.viewport.applyConstraints(),!1;case 48:return a.viewer.viewport.goHome(),a.viewer.viewport.applyConstraints(),!1;case 119:case 87:case 38:return n?a.viewer.viewport.zoomBy(1.1):a.viewer.viewport.panBy(new t.Point(0,-.05)),a.viewer.viewport.applyConstraints(),!1;case 115:case 83:case 40:return n?a.viewer.viewport.zoomBy(.9):a.viewer.viewport.panBy(new t.Point(0,.05)),a.viewer.viewport.applyConstraints(),!1;case 97:case 37:return a.viewer.viewport.panBy(new t.Point(-.05,0)),a.viewer.viewport.applyConstraints(),!1;case 100:case 39:return a.viewer.viewport.panBy(new t.Point(.05,0)),a.viewer.viewport.applyConstraints(),!1;default:return!0}}}).setTracking(!0),r.addControl(this.element,t.ControlAnchor.TOP_RIGHT),o.width&&o.height?(this.element.style.width=o.width+"px",this.element.style.height=o.height+"px"):(this.element.style.width=l.x*o.navigatorSizeRatio+"px",this.element.style.height=l.y*o.navigatorSizeRatio+"px"),t.Viewer.apply(this,[o]),this.element.getElementsByTagName("form")[0].appendChild(this.displayRegion)},t.extend(t.Navigator.prototype,t.EventHandler.prototype,t.Viewer.prototype,{update:function(t){var e,i,n;t&&this.viewport&&(e=t.getBounds(!0),i=this.viewport.pixelFromPoint(e.getTopLeft()),n=this.viewport.pixelFromPoint(e.getBottomRight()),function(t){t.top=i.y+"px",t.left=i.x+"px";var e=Math.abs(i.x-n.x)-3,s=Math.abs(i.y-n.y)-3;t.width=Math.max(e,0)+"px",t.height=Math.max(s,0)+"px"}(this.displayRegion.style))}})}(OpenSeadragon),function(t){var e={Errors:{Failure:"Sorry, but Seadragon Ajax can't run on your browser!\nPlease try using IE 7 or Firefox 3.\n",Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Empty:"You asked us to open nothing, so we did just that.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",Unknown:"Whoops, something inexplicably went wrong. Sorry!"},Messages:{Loading:"Loading..."},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page"}};t.extend(t,{getString:function(t){var i,n=t.split("."),s=null,o=arguments;for(i=0;i<n.length;i++)s=e[n[i]]||{};return"string"!=typeof s&&(s=""),s.replace(/\{\d+\}/g,function(t){var e=parseInt(t.match(/\d+/))+1;return e<o.length?o[e]:""})},setString:function(e,i){var n,s=e.split("."),o=t.Strings;for(n=0;n<s.length-1;n++)o[s[n]]||(o[s[n]]={}),o=o[s[n]];o[s[n]]=i}})}(OpenSeadragon),function(t){t.Point=function(t,e){this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0},t.Point.prototype={plus:function(e){return new t.Point(this.x+e.x,this.y+e.y)},minus:function(e){return new t.Point(this.x-e.x,this.y-e.y)},times:function(e){return new t.Point(this.x*e,this.y*e)},divide:function(e){return new t.Point(this.x/e,this.y/e)},negate:function(){return new t.Point(-this.x,-this.y)},distanceTo:function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},apply:function(e){return new t.Point(e(this.x),e(this.y))},equals:function(e){return e instanceof t.Point&&this.x===e.x&&this.y===e.y},toString:function(){return"("+Math.round(this.x)+","+Math.round(this.y)+")"}}}(OpenSeadragon),function($){function processResponse(xhr){var responseText=xhr.responseText,status=xhr.status,statusText,data;if(!xhr)throw new Error($.getString("Errors.Security"));if(200!==xhr.status&&0!==xhr.status)throw status=xhr.status,statusText=404==status?"Not Found":xhr.statusText,new Error($.getString("Errors.Status",status,statusText));if(responseText.match(/\s*<.*/))try{data=xhr.responseXML&&xhr.responseXML.documentElement?xhr.responseXML:$.parseXml(responseText)}catch(e){data=xhr.responseText}else data=responseText.match(/\s*[\{\[].*/)?eval(responseText):responseText;return data}$.TileSource=function(t){var e,i,n=null,s=arguments;for(e=$.isPlainObject(t)?t:{width:s[0],height:s[1],tileSize:s[2],tileOverlap:s[3],minlevel:s[4],maxLevel:s[5]},$.EventHandler.call(this),$.extend(!0,this,e),i=0;i<arguments.length;i++)if($.isFunction(arguments[i])){n=arguments[i],this.addHandler("ready",function(t,e){n(e)});break}"string"==$.type(arguments[0])?(this.aspectRatio=1,this.dimensions=new $.Point(10,10),this.tileSize=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(arguments[0])):(this.ready=!0,this.aspectRatio=e.width&&e.height?e.width/e.height:1,this.dimensions=new $.Point(e.width,e.height),this.tileSize=e.tileSize?e.tileSize:0,this.tileOverlap=e.tileOverlap?e.tileOverlap:0,this.minLevel=e.minLevel?e.minLevel:0,this.maxLevel=void 0!==e.maxLevel&&null!==e.maxLevel?e.maxLevel:e.width&&e.height?Math.ceil(Math.log(Math.max(e.width,e.height))/Math.log(2)):0,n&&$.isFunction(n)&&n(this))},$.TileSource.prototype={getLevelScale:function(t){return 1/(1<<this.maxLevel-t)},getNumTiles:function(t){var e=this.getLevelScale(t),i=Math.ceil(e*this.dimensions.x/this.tileSize),n=Math.ceil(e*this.dimensions.y/this.tileSize);return new $.Point(i,n)},getPixelRatio:function(t){var e=this.dimensions.times(this.getLevelScale(t)),i=1/e.x,n=1/e.y;return new $.Point(i,n)},getTileAtPoint:function(t,e){var i=e.times(this.dimensions.x).times(this.getLevelScale(t)),n=Math.floor(i.x/this.tileSize),s=Math.floor(i.y/this.tileSize);return new $.Point(n,s)},getTileBounds:function(t,e,i){var n=this.dimensions.times(this.getLevelScale(t)),s=0===e?0:this.tileSize*e-this.tileOverlap,o=0===i?0:this.tileSize*i-this.tileOverlap,a=this.tileSize+(0===e?1:2)*this.tileOverlap,r=this.tileSize+(0===i?1:2)*this.tileOverlap,l=1/n.x;return a=Math.min(a,n.x-s),r=Math.min(r,n.y-o),new $.Rect(s*l,o*l,a*l,r*l)},getImageInfo:function(t){var e,i,n,s,o,a,r,l=this,t=t;t&&(o=t.split("/"),a=o[o.length-1],r=a.lastIndexOf("."),r>-1&&(o[o.length-1]=a.slice(0,r))),i=function(e){var i=$.TileSource.determineType(l,e,t);s=i.prototype.configure.apply(l,[e,t]),n=new i(s),l.ready=!0,l.raiseEvent("ready",n)},t.match(/\.js$/)?(e=t.split("/").pop().replace(".js",""),$.jsonp({url:t,async:!1,callbackName:e,callback:i})):$.makeAjaxRequest(t,function(t){var e=processResponse(t);i(e)})},supports:function(){return!1},configure:function(){throw new Error("Method not implemented.")},getTileUrl:function(){throw new Error("Method not implemented.")},tileExists:function(t,e,i){var n=this.getNumTiles(t);return t>=this.minLevel&&t<=this.maxLevel&&e>=0&&i>=0&&e<n.x&&i<n.y}},$.extend(!0,$.TileSource.prototype,$.EventHandler.prototype),$.TileSource.determineType=function(t,e,i){var n;for(n in OpenSeadragon)if(n.match(/.+TileSource$/)&&$.isFunction(OpenSeadragon[n])&&$.isFunction(OpenSeadragon[n].prototype.supports)&&OpenSeadragon[n].prototype.supports.call(t,e,i))return OpenSeadragon[n]}}(OpenSeadragon),function(t){function e(e,n){if(!n||!n.documentElement)throw new Error(t.getString("Errors.Xml"));var s,o,a,r,l,h=n.documentElement,c=h.tagName,u=null,d=[];if("Image"==c)try{if(r=h.getElementsByTagName("Size")[0],u={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Format:h.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(h.getAttribute("Overlap")),TileSize:parseInt(h.getAttribute("TileSize")),Size:{Height:parseInt(r.getAttribute("Height")),Width:parseInt(r.getAttribute("Width"))}}},!t.imageFormatSupported(u.Image.Format))throw new Error(t.getString("Errors.ImageFormat",u.Image.Format.toUpperCase()));for(s=h.getElementsByTagName("DisplayRect"),l=0;l<s.length;l++)o=s[l],a=o.getElementsByTagName("Rect")[0],d.push({Rect:{X:parseInt(a.getAttribute("X")),Y:parseInt(a.getAttribute("Y")),Width:parseInt(a.getAttribute("Width")),Height:parseInt(a.getAttribute("Height")),MinLevel:0,MaxLevel:parseInt(o.getAttribute("MaxLevel"))}});return d.length&&(u.Image.DisplayRect=d),i(e,u)}catch(p){throw p instanceof Error?p:new Error(t.getString("Errors.Dzi"))}else{if("Collection"==c)throw new Error(t.getString("Errors.Dzc"));if("Error"==c)return processDZIError(h)}throw new Error(t.getString("Errors.Dzi"))}function i(e,i){var n,s,o=i.Image,a=o.Url,r=o.Format,l=o.Size,h=o.DisplayRect||[],c=parseInt(l.Width),u=parseInt(l.Height),d=parseInt(o.TileSize),p=parseInt(o.Overlap),f=[];for(s=0;s<h.length;s++)n=h[s].Rect,f.push(new t.DisplayRect(parseInt(n.X),parseInt(n.Y),parseInt(n.Width),parseInt(n.Height),0,parseInt(n.MaxLevel)));return{width:c,height:u,tileSize:d,tileOverlap:p,minLevel:null,maxLevel:null,tilesUrl:a,fileFormat:r,displayRects:f}}t.DziTileSource=function(e){var i,n,s,o;if(o=t.isPlainObject(e)?e:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6]},this._levelRects={},this.tilesUrl=o.tilesUrl,this.fileFormat=o.fileFormat,this.displayRects=o.displayRects,this.displayRects)for(i=this.displayRects.length-1;i>=0;i--)for(n=this.displayRects[i],s=n.minLevel;s<=n.maxLevel;s++)this._levelRects[s]||(this._levelRects[s]=[]),this._levelRects[s].push(n);t.TileSource.apply(this,[o])},t.extend(t.DziTileSource.prototype,t.TileSource.prototype,{supports:function(t){var e;return t.Image?e=t.Image.xmlns:t.documentElement&&"Image"==t.documentElement.tagName&&(e=t.documentElement.namespaceURI),"http://schemas.microsoft.com/deepzoom/2008"==e||"http://schemas.microsoft.com/deepzoom/2009"==e},configure:function(n,s){var o,a,r,l,h;return l=t.isPlainObject(n)?i(this,n):e(this,n),s&&!l.tilesUrl&&("http"!=s.substring(0,4)&&(h=location.protocol+"//"+location.host),o=s.split("/"),a=o.pop(),a=a.substring(0,a.indexOf(".")),o="/"+o.join("/")+"/"+a+"_files/",r=o,h&&(r=h+r),l.tilesUrl=r),l},getTileUrl:function(t,e,i){return[this.tilesUrl,t,"/",e,"_",i,".",this.fileFormat].join("")},tileExists:function(t,e,i){var n,s,o,a,r,l,h,c=this._levelRects[t];if(!c||!c.length)return!0;for(h=c.length-1;h>=0;h--)if(n=c[h],!(t<n.minLevel||t>n.maxLevel)&&(s=this.getLevelScale(t),o=n.x*s,a=n.y*s,r=o+n.width*s,l=a+n.height*s,o=Math.floor(o/this.tileSize),a=Math.floor(a/this.tileSize),r=Math.ceil(r/this.tileSize),l=Math.ceil(l/this.tileSize),e>=o&&r>e&&i>=a&&l>i))return!0;return!1}})}(OpenSeadragon),function(t){function e(t){var e,i,n=[];for(i=0;i<t.length;i++)e=t[i],e.height&&e.width&&e.url&&(e.url.toLowerCase().match(/^.*\.(png|jpg|jpeg|gif)$/)||e.mimetype&&e.mimetype.toLowerCase().match(/^.*\/(png|jpg|jpeg|gif)$/))&&n.push({url:e.url,width:Number(e.width),height:Number(e.height)});return n.sort(function(t,e){return t.height-e.height})}function i(e,i){if(!i||!i.documentElement)throw new Error(t.getString("Errors.Xml"));var s,o,a=i.documentElement,r=a.tagName,l=null,h=[];if("image"==r)try{for(l={type:a.getAttribute("type"),levels:[]},h=a.getElementsByTagName("level"),o=0;o<h.length;o++)s=h[o],l.levels.push({url:s.getAttribute("url"),width:parseInt(s.getAttribute("width")),height:parseInt(s.getAttribute("height"))});return n(e,l)}catch(c){throw c instanceof Error?c:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if("collection"==r)throw new Error("Legacy Image Pyramid Collections not yet supported.");if("error"==r)throw new Error("Error: "+i)}throw new Error("Unknown element "+r)}function n(t,e){return e.levels}t.LegacyTileSource=function(i){var n,s,o;t.isArray(i)&&(n={type:"legacy-image-pyramid",levels:i}),n.levels=e(n.levels),s=n.levels[n.levels.length-1].width,o=n.levels[n.levels.length-1].height,t.extend(!0,n,{width:s,height:o,tileSize:Math.max(o,s),tileOverlap:0,minLevel:0,maxLevel:n.levels.length-1}),t.TileSource.apply(this,[n]),this.levels=n.levels},t.extend(t.LegacyTileSource.prototype,t.TileSource.prototype,{supports:function(t){return t.type&&"legacy-image-pyramid"==t.type||t.documentElement&&"legacy-image-pyramid"==t.documentElement.getAttribute("type")},configure:function(e){var s;return s=t.isPlainObject(e)?n(this,e):i(this,e)},getLevelScale:function(t){var e=0/0;return t>=this.minLevel&&t<=this.maxLevel&&(e=this.levels[t].width/this.levels[this.maxLevel].width),e},getNumTiles:function(e){var i=this.getLevelScale(e);return i?new t.Point(1,1):new t.Point(0,0)},getTileAtPoint:function(){return new t.Point(0,0)},getTileUrl:function(t){var e=null;return t>=this.minLevel&&t<=this.maxLevel&&(e=this.levels[t].url),e}})}(OpenSeadragon),function(t){t.TileSourceCollection=function(e){options=t.isPlainObject(e)?e:{tileSize:arguments[0],tileSources:arguments[1],rows:arguments[2],layout:arguments[3]},options.layout||(options.layout="horizontal");var i=0,n=1,s=Math.ceil(options.tileSources.length/options.rows),o=s>=options.rows?s:options.rows;for("horizontal"==options.layout?(options.width=options.tileSize*s,options.height=options.tileSize*options.rows):(options.height=(options.tileSize+2*options.tileMargin)*s,options.width=(options.tileSize+2*options.tileMargin)*options.rows),options.tileOverlap=-options.tileMargin,options.tilesPerRow=s;n<options.tileSize*o;)n=2*n,i++;options.minLevel=i,t.TileSource.apply(this,[options])},t.extend(t.TileSourceCollection.prototype,t.TileSource.prototype,{getTileBounds:function(e,i,n){var s=this.dimensions.times(this.getLevelScale(e)),o=this.tileSize*i-this.tileOverlap,a=this.tileSize*n-this.tileOverlap,r=this.tileSize+1*this.tileOverlap,l=this.tileSize+1*this.tileOverlap,h=1/s.x;return r=Math.min(r,s.x-o),l=Math.min(l,s.y-a),new t.Rect(o*h,a*h,r*h,l*h)},configure:function(){},getTileUrl:function(){return null}})}(OpenSeadragon),function(t){function e(t){window.setTimeout(function(){i(t)},20)}function i(i){var n,s,o;i.shouldFade&&(n=+new Date,s=n-i.fadeBeginTime,o=1-s/i.fadeLength,o=Math.min(1,o),o=Math.max(0,o),i.imgGroup&&t.setElementOpacity(i.imgGroup,o,!0),o>0&&e(i))}function n(t){t.shouldFade=!0,t.fadeBeginTime=+new Date+t.fadeDelay,window.setTimeout(function(){e(t)},t.fadeDelay)}function s(e){e.shouldFade=!1,e.imgGroup&&t.setElementOpacity(e.imgGroup,1,!0)}function o(e,i){e.element.disabled||(i>=t.ButtonState.GROUP&&e.currentState==t.ButtonState.REST&&(s(e),e.currentState=t.ButtonState.GROUP),i>=t.ButtonState.HOVER&&e.currentState==t.ButtonState.GROUP&&(e.imgHover&&(e.imgHover.style.visibility=""),e.currentState=t.ButtonState.HOVER),i>=t.ButtonState.DOWN&&e.currentState==t.ButtonState.HOVER&&(e.imgDown&&(e.imgDown.style.visibility=""),e.currentState=t.ButtonState.DOWN))}function a(e,i){e.element.disabled||(i<=t.ButtonState.HOVER&&e.currentState==t.ButtonState.DOWN&&(e.imgDown&&(e.imgDown.style.visibility="hidden"),e.currentState=t.ButtonState.HOVER),i<=t.ButtonState.GROUP&&e.currentState==t.ButtonState.HOVER&&(e.imgHover&&(e.imgHover.style.visibility="hidden"),e.currentState=t.ButtonState.GROUP),i<=t.ButtonState.REST&&e.currentState==t.ButtonState.GROUP&&(n(e),e.currentState=t.ButtonState.REST))}t.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},t.Button=function(e){var i=this;t.EventHandler.call(this),t.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:t.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:t.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null},e),this.element=e.element||t.makeNeutralElement("button"),this.element.href=this.element.href||"#",e.element||(this.imgRest=t.makeTransparentImage(this.srcRest),this.imgGroup=t.makeTransparentImage(this.srcGroup),this.imgHover=t.makeTransparentImage(this.srcHover),this.imgDown=t.makeTransparentImage(this.srcDown),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",t.Browser.vendor==t.BROWSERS.FIREFOX&&t.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="")),this.addHandler("onPress",this.onPress),this.addHandler("onRelease",this.onRelease),this.addHandler("onClick",this.onClick),this.addHandler("onEnter",this.onEnter),this.addHandler("onExit",this.onExit),this.addHandler("onFocus",this.onFocus),this.addHandler("onBlur",this.onBlur),this.currentState=t.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new t.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(e,n,s,a){s?(o(i,t.ButtonState.DOWN),i.raiseEvent("onEnter",i)):a||o(i,t.ButtonState.HOVER)},focusHandler:function(t,e,n,s){this.enterHandler(t,e,n,s),i.raiseEvent("onFocus",i)},exitHandler:function(e,n,s){a(i,t.ButtonState.GROUP),s&&i.raiseEvent("onExit",i)},blurHandler:function(t,e,n,s){this.exitHandler(t,e,n,s),i.raiseEvent("onBlur",i)},pressHandler:function(){o(i,t.ButtonState.DOWN),i.raiseEvent("onPress",i)},releaseHandler:function(e,n,s,r){s&&r?(a(i,t.ButtonState.HOVER),i.raiseEvent("onRelease",i)):s?a(i,t.ButtonState.GROUP):o(i,t.ButtonState.HOVER)},clickHandler:function(t,e,n){n&&i.raiseEvent("onClick",i)},keyHandler:function(t,e){return 13===e?(i.raiseEvent("onClick",i),i.raiseEvent("onRelease",i),!1):!0}}).setTracking(!0),a(this,t.ButtonState.REST)},t.extend(t.Button.prototype,t.EventHandler.prototype,{notifyGroupEnter:function(){o(this,t.ButtonState.GROUP)},notifyGroupExit:function(){a(this,t.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,t.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,t.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()}})}(OpenSeadragon),function(t){t.ButtonGroup=function(e){t.extend(!0,this,{buttons:[],clickTimeThreshold:t.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:t.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},e);var i,n=this.buttons.concat([]),s=this;if(this.element=e.element||t.makeNeutralElement("fieldgroup"),!e.group)for(this.label=t.makeNeutralElement("label"),this.element.style.display="inline-block",this.element.appendChild(this.label),i=0;i<n.length;i++)this.element.appendChild(n[i].element);this.tracker=new t.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(){var t;for(t=0;t<s.buttons.length;t++)s.buttons[t].notifyGroupEnter()},exitHandler:function(){var t,e=arguments.length>2?arguments[2]:null;if(!e)for(t=0;t<s.buttons.length;t++)s.buttons[t].notifyGroupExit()},releaseHandler:function(){var t,e=arguments.length>3?arguments[3]:null;if(!e)for(t=0;t<s.buttons.length;t++)s.buttons[t].notifyGroupExit()
}}).setTracking(!0)},t.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler()},emulateExit:function(){this.tracker.exitHandler()}}}(OpenSeadragon),function(t){t.Rect=function(t,e,i,n){this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0,this.width="number"==typeof i?i:0,this.height="number"==typeof n?n:0},t.Rect.prototype={getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new t.Point(this.x,this.y)},getBottomRight:function(){return new t.Point(this.x+this.width,this.y+this.height)},getCenter:function(){return new t.Point(this.x+this.width/2,this.y+this.height/2)},getSize:function(){return new t.Point(this.width,this.height)},equals:function(e){return e instanceof t.Rect&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height},toString:function(){return"["+Math.round(100*this.x)+","+Math.round(100*this.y)+","+Math.round(100*this.width)+"x"+Math.round(100*this.height)+"]"}}}(OpenSeadragon),function(t){function e(e,i,s){var o=Number(this.element.style.marginLeft.replace("px","")),a=Number(this.element.style.marginTop.replace("px","")),r=Number(this.element.style.width.replace("px","")),l=Number(this.element.style.height.replace("px","")),h=t.getElementSize(this.viewer.canvas);return this.dragging=!0,this.element&&("horizontal"==this.scroll?-s.x>0?o>-(r-h.x)&&(this.element.style.marginLeft=o+2*s.x+"px",n(this,h.x,o+2*s.x)):-s.x<0&&0>o&&(this.element.style.marginLeft=o+2*s.x+"px",n(this,h.x,o+2*s.x)):-s.y>0?a>-(l-h.y)&&(this.element.style.marginTop=a+2*s.y+"px",n(this,h.y,a+2*s.y)):-s.y<0&&0>a&&(this.element.style.marginTop=a+2*s.y+"px",n(this,h.y,a+2*s.y))),!1}function i(e,i,s){var o=Number(this.element.style.marginLeft.replace("px","")),a=Number(this.element.style.marginTop.replace("px","")),r=Number(this.element.style.width.replace("px","")),l=Number(this.element.style.height.replace("px","")),h=t.getElementSize(this.viewer.canvas);return this.element&&("horizontal"==this.scroll?s>0?o>-(r-h.x)&&(this.element.style.marginLeft=o-60*s+"px",n(this,h.x,o-60*s)):0>s&&0>o&&(this.element.style.marginLeft=o-60*s+"px",n(this,h.x,o-60*s)):0>s?a>h.y-l&&(this.element.style.marginTop=a+60*s+"px",n(this,h.y,a+60*s)):s>0&&0>a&&(this.element.style.marginTop=a+60*s+"px",n(this,h.y,a+60*s))),!1}function n(e,i,n){var s,o,a,r,l;for(s="horizontal"==e.scroll?e.panelWidth:e.panelHeight,o=Math.ceil(i/s)+5,a=Math.ceil((Math.abs(n)+i)/s)+1,o=a-o,o=0>o?0:o,l=o;a>l&&l<e.panels.length;l++)element=e.panels[l],element.activePanel||(r=new t.Viewer({id:element.id,tileSources:[e.viewer.tileSources[l]],element:element,navigatorSizeRatio:e.sizeRatio,minPixelRatio:e.minPixelRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1}),r.displayRegion=t.makeNeutralElement("textarea"),r.displayRegion.id=element.id+"-displayregion",r.displayRegion.className="displayregion",function(t){t.position="relative",t.top="0px",t.left="0px",t.fontSize="0px",t.overflow="hidden",t.float="left",t.cssFloat="left",t.styleFloat="left",t.zIndex=999999999,t.cursor="default",t.width=e.panelWidth-4+"px",t.height=e.panelHeight-4+"px"}(r.displayRegion.style),r.displayRegion.innerTracker=new t.MouseTracker({element:r.displayRegion}),element.getElementsByTagName("form")[0].appendChild(r.displayRegion),element.activePanel=!0)}function s(t){return"horizontal"==this.scroll?t.element.style.marginBottom="0px":t.element.style.marginLeft="0px",!1}function o(e){return t.getElementSize(this.viewer.element),"horizontal"==this.scroll?e.element.style.marginBottom="-"+t.getElementSize(e.element).y/2+"px":e.element.style.marginLeft="-"+t.getElementSize(e.element).x/2+"px",!1}function a(t,e){switch(e){case 61:return i.call(this,this.tracker,null,1,null),!1;case 45:return i.call(this,this.tracker,null,-1,null),!1;case 48:case 119:case 87:case 38:return i.call(this,this.tracker,null,1,null),!1;case 115:case 83:case 40:return i.call(this,this.tracker,null,-1,null),!1;case 97:case 37:return i.call(this,this.tracker,null,-1,null),!1;case 100:case 39:return i.call(this,this.tracker,null,1,null),!1;default:return!0}}var r={};t.ReferenceStrip=function(l){var h,c,u=this,d=l.viewer,p=t.getElementSize(d.element);for(l.id||(l.id="referencestrip-"+ +new Date,this.element=t.makeNeutralElement("div"),this.element.id=l.id,this.element.className="referencestrip"),l=t.extend(!0,{sizeRatio:t.DEFAULT_SETTINGS.referenceStripSizeRatio,position:t.DEFAULT_SETTINGS.referenceStripPosition,scroll:t.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:t.DEFAULT_SETTINGS.clickTimeThreshold},l,{element:this.element,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1}),t.extend(this,l),r[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,function(t){t.marginTop="0px",t.marginRight="0px",t.marginBottom="0px",t.marginLeft="0px",t.left="0px",t.bottom="0px",t.border="0px",t.background="#000",t.position="relative"}(this.element.style),t.setElementOpacity(this.element,.8),this.viewer=d,this.innerTracker=new t.MouseTracker({element:this.element,dragHandler:t.delegate(this,e),scrollHandler:t.delegate(this,i),enterHandler:t.delegate(this,s),exitHandler:t.delegate(this,o),keyHandler:t.delegate(this,a)}).setTracking(!0),l.width&&l.height?(this.element.style.width=l.width+"px",this.element.style.height=l.height+"px",d.addControl(this.element,t.ControlAnchor.BOTTOM_LEFT)):"horizontal"==l.scroll?(this.element.style.width=p.x*l.sizeRatio*d.tileSources.length+12*d.tileSources.length+"px",this.element.style.height=p.y*l.sizeRatio+"px",d.addControl(this.element,t.ControlAnchor.BOTTOM_LEFT)):(this.element.style.height=p.y*l.sizeRatio*d.tileSources.length+12*d.tileSources.length+"px",this.element.style.width=p.x*l.sizeRatio+"px",d.addControl(this.element,t.ControlAnchor.TOP_LEFT)),this.panelWidth=p.x*this.sizeRatio+8,this.panelHeight=p.y*this.sizeRatio+8,this.panels=[],c=0;c<d.tileSources.length;c++)h=t.makeNeutralElement("div"),h.id=this.element.id+"-"+c,function(t){t.width=u.panelWidth+"px",t.height=u.panelHeight+"px",t.display="inline",t.float="left",t.cssFloat="left",t.styleFloat="left",t.padding="2px"}(h.style),h.innerTracker=new t.MouseTracker({element:h,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,pressHandler:function(t){t.dragging=+new Date},releaseHandler:function(t,e,i,n){var s=t.element.id,o=Number(s.split("-")[2]),a=+new Date;i&&n&&t.dragging&&a-t.dragging<t.clickTimeThreshold&&(t.dragging=null,d.goToPage(o))}}).setTracking(!0),this.element.appendChild(h),h.activePanel=!1,this.panels.push(h);n(this,"vertical"==this.scroll?p.y:p.y,0),this.setFocus(0)},t.extend(t.ReferenceStrip.prototype,t.EventHandler.prototype,t.Viewer.prototype,{setFocus:function(e){var i,o=t.getElement(this.element.id+"-"+e),a=t.getElementSize(this.viewer.canvas),r=Number(this.element.style.width.replace("px","")),l=Number(this.element.style.height.replace("px","")),h=-Number(this.element.style.marginLeft.replace("px","")),c=-Number(this.element.style.marginTop.replace("px",""));this.currentSelected!==o&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=o,this.currentSelected.style.background="#999","horizontal"==this.scroll?(i=Number(e)*(this.panelWidth+3),i>h+a.x-this.panelWidth?(i=Math.min(i,r-a.x),this.element.style.marginLeft=-i+"px",n(this,a.x,-i)):h>i&&(i=Math.max(0,i-a.x/2),this.element.style.marginLeft=-i+"px",n(this,a.x,-i))):(i=Number(e)*(this.panelHeight+3),i>c+a.y-this.panelHeight?(i=Math.min(i,l-a.y),this.element.style.marginTop=-i+"px",n(this,a.y,-i)):c>i&&(i=Math.max(0,i-a.y/2),this.element.style.marginTop=-i+"px",n(this,a.y,-i))),this.currentPage=e,t.getElement(o.id+"-displayregion").focus(),s.call(this,this.innerTracker))},update:function(){return r[this.id].animating?(t.console.log("image reference strip update"),!0):!1}})}(OpenSeadragon),function(t){t.DisplayRect=function(e,i,n,s,o,a){t.Rect.apply(this,[e,i,n,s]),this.minLevel=o,this.maxLevel=a},t.extend(t.DisplayRect.prototype,t.Rect.prototype)}(OpenSeadragon),function(t){function e(t,e){return(1-Math.exp(t*-e))/(1-Math.exp(-t))}t.Spring=function(e){var i=arguments;"object"!=typeof e&&(e={initial:i.length&&"number"==typeof i[0]?i[0]:0,springStiffness:i.length>1?i[1].springStiffness:5,animationTime:i.length>1?i[1].animationTime:1.5}),t.extend(!0,this,e),this.current={value:"number"==typeof this.initial?this.initial:0,time:(new Date).getTime()},this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time}},t.Spring.prototype={resetTo:function(t){this.target.value=t,this.target.time=this.current.time,this.start.value=this.target.value,this.start.time=this.target.time},springTo:function(t){this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=t,this.target.time=this.start.time+1e3*this.animationTime},shiftBy:function(t){this.start.value+=t,this.target.value+=t},update:function(){this.current.time=(new Date).getTime(),this.current.value=this.current.time>=this.target.time?this.target.value:this.start.value+(this.target.value-this.start.value)*e(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time))}}}(OpenSeadragon),function(t){t.Tile=function(t,e,i,n,s,o){this.level=t,this.x=e,this.y=i,this.bounds=n,this.exists=s,this.url=o,this.loaded=!1,this.loading=!1,this.element=null,this.image=null,this.style=null,this.position=null,this.size=null,this.blendStart=null,this.opacity=null,this.distance=null,this.visibility=null,this.beingDrawn=!1,this.lastTouchTime=0},t.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},drawHTML:function(e){var i=this.position.apply(Math.floor),n=this.size.apply(Math.ceil);return this.loaded&&this.image?(this.element||(this.element=t.makeNeutralElement("img"),this.element.src=this.url,this.style=this.element.style,this.style.position="absolute",this.style.msInterpolationMode="nearest-neighbor"),this.element.parentNode!=e&&e.appendChild(this.element),this.element.style.left=i.x+"px",this.element.style.top=i.y+"px",this.element.style.width=n.x+"px",this.element.style.height=n.y+"px",t.setElementOpacity(this.element,this.opacity),void 0):(t.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString()),void 0)},drawCanvas:function(e){var i=this.position,n=this.size;return this.loaded&&this.image?(e.globalAlpha=this.opacity,e.drawImage(this.image,i.x,i.y,n.x,n.y),void 0):(t.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString()),void 0)},unload:function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.image=null,this.loaded=!1,this.loading=!1}}}(OpenSeadragon),function(t){t.OverlayPlacement={CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8},t.Overlay=function(e,i,n){this.element=e,this.scales=i instanceof t.Rect,this.bounds=new t.Rect(i.x,i.y,i.width,i.height),this.position=new t.Point(i.x,i.y),this.size=new t.Point(i.width,i.height),this.style=e.style,this.placement=i instanceof t.Point?n:t.OverlayPlacement.TOP_LEFT},t.Overlay.prototype={adjust:function(e,i){switch(this.placement){case t.OverlayPlacement.TOP_LEFT:break;case t.OverlayPlacement.TOP:e.x-=i.x/2;break;case t.OverlayPlacement.TOP_RIGHT:e.x-=i.x;break;case t.OverlayPlacement.RIGHT:e.x-=i.x,e.y-=i.y/2;break;case t.OverlayPlacement.BOTTOM_RIGHT:e.x-=i.x,e.y-=i.y;break;case t.OverlayPlacement.BOTTOM:e.x-=i.x/2,e.y-=i.y;break;case t.OverlayPlacement.BOTTOM_LEFT:e.y-=i.y;break;case t.OverlayPlacement.LEFT:e.y-=i.y/2;break;case t.OverlayPlacement.CENTER:default:e.x-=i.x/2,e.y-=i.y/2}},destroy:function(){var t=this.element,e=this.style;t.parentNode&&t.parentNode.removeChild(t),e.top="",e.left="",e.position="",this.scales&&(e.width="",e.height="")},drawHTML:function(e){var i,n,s=this.element,o=this.style,a=this.scales;s.parentNode!=e&&e.appendChild(s),a||(this.size=t.getElementSize(s)),i=this.position,n=this.size,this.adjust(i,n),i=i.apply(Math.floor),n=n.apply(Math.ceil),o.left=i.x+"px",o.top=i.y+"px",o.position="absolute",a&&(o.width=n.x+"px",o.height=n.y+"px")},update:function(e,i){this.scales=e instanceof t.Rect,this.bounds=new t.Rect(e.x,e.y,e.width,e.height),this.placement=e instanceof t.Point?i:t.OverlayPlacement.TOP_LEFT}}}(OpenSeadragon),function(t){function e(t){t.updateAgain=!1;for(var e,n,s,a,r,l,h,u,d=null,p=!1,f=+new Date,m=t.viewport.getContainerSize(),g=t.viewport.getBounds(!0),y=g.getTopLeft(),b=g.getBottomRight(),w=t.viewport.deltaPixelsFromPoints(t.source.getPixelRatio(0),!0).x,x=Math.max(t.source.minLevel,Math.floor(Math.log(t.minZoomImageRatio)/Math.log(2))),k=Math.min(Math.abs(t.source.maxLevel),Math.abs(Math.floor(Math.log(w/t.minPixelRatio)/Math.log(2))));t.lastDrawn.length>0;)e=t.lastDrawn.pop(),e.beingDrawn=!1;if(t.canvas.innerHTML="",C&&(t.canvas.width=m.x,t.canvas.height=m.y,t.context.clearRect(0,0,m.x,m.y)),!(!t.wrapHorizontal&&(b.x<0||y.x>1)||!t.wrapVertical&&(b.y<0||y.y>t.normHeight))){for(t.wrapHorizontal||(y.x=Math.max(y.x,0),b.x=Math.min(b.x,1)),t.wrapVertical||(y.y=Math.max(y.y,0),b.y=Math.min(b.y,t.normHeight)),x=Math.min(x,k),n=k;n>=x;n--){if(s=t.viewport.deltaPixelsFromPoints(t.source.getPixelRatio(n),!0).x,!p&&s>=t.minPixelRatio||n==x)drawLevel=!0,p=!0;else if(!p)continue;if(a=t.viewport.deltaPixelsFromPoints(t.source.getPixelRatio(n),!1).x,r=t.viewport.deltaPixelsFromPoints(t.source.getPixelRatio(0),!1).x,l=t.immediateRender?1:r,h=Math.min(1,(s-.5)/.5),u=l/Math.abs(l-a),d=i(t,p,n,h,u,y,b,f,d),c(t.coverage,n))break}_(t,t.lastDrawn),v(t.viewport,t.overlays,t.container),d&&(o(t,d,f),t.updateAgain=!0)}}function i(t,e,i,s,o,a,r,l,h){var c,u,d,f,m,g=t.viewport.pixelFromPoint(t.viewport.getCenter());for(d=t.source.getTileAtPoint(i,a),f=t.source.getTileAtPoint(i,r),m=t.source.getNumTiles(i),p(t.coverage,i),t.wrapHorizontal||(f.x=Math.min(f.x,m.x-1)),t.wrapVertical||(f.y=Math.min(f.y,m.y-1)),c=d.x;c<=f.x;c++)for(u=d.y;u<=f.y;u++)h=n(t,drawLevel,e,c,u,i,s,o,g,m,l,h);return h}function n(t,e,i,n,o,a,h,c,p,f,g,v){var y=s(n,o,a,t.source,t.tilesMatrix,g,f,t.normHeight),_=e;return d(t.coverage,a,n,o,!1),y.exists?(i&&!_&&(u(t.coverage,a,n,o)?d(t.coverage,a,n,o,!0):_=!0),_?(r(y,t.source.tileOverlap,t.viewport,p,c),y.loaded?t.updateAgain=l(t,y,n,o,a,h,g):y.loading||(v=m(v,y)),v):v):v}function s(e,i,n,s,o,a,r,l){var h,c,u,d,p,f;return o[n]||(o[n]={}),o[n][e]||(o[n][e]={}),o[n][e][i]||(h=(r.x+e%r.x)%r.x,c=(r.y+i%r.y)%r.y,u=s.getTileBounds(n,h,c),d=s.tileExists(n,h,c),p=s.getTileUrl(n,h,c),u.x+=1*(e-h)/r.x,u.y+=l*(i-c)/r.y,o[n][e][i]=new t.Tile(n,e,i,u,d,p)),f=o[n][e][i],f.lastTouchTime=a,f}function o(t,e,i){e.loading=t.loadImage(e.url,function(n){a(t,e,i,n)})}function a(e,i,n,s){var o,a,r,l,h,c,u,d,p,f;if(i.loading=!1,e.midUpdate)return t.console.warn("Tile load callback in middle of drawing routine."),void 0;if(!s)return t.console.log("Tile %s failed to load: %s",i,i.url),i.exists=!1,void 0;if(n<e.lastResetTime)return t.console.log("Ignoring tile %s loaded before reset: %s",i,i.url),void 0;if(i.loaded=!0,i.image=s,o=e.tilesLoaded.length,e.tilesLoaded.length>=e.maxImageCacheCount){for(a=Math.ceil(Math.log(e.source.tileSize)/Math.log(2)),r=null,c=-1,f=e.tilesLoaded.length-1;f>=0;f--)u=e.tilesLoaded[f],u.level<=e.cutoff||u.beingDrawn||(r?(d=u.lastTouchTime,l=r.lastTouchTime,p=u.level,h=r.level,(l>d||d==l&&p>h)&&(r=u,c=f)):(r=u,c=f));r&&c>=0&&(r.unload(),o=c)}e.tilesLoaded[o]=i,e.updateAgain=!0}function r(e,i,n,s,o){var a=e.bounds.getTopLeft(),r=e.bounds.getSize(),l=n.pixelFromPoint(a,!0),h=n.pixelFromPoint(a,!1),c=n.deltaPixelsFromPoints(r,!0),u=n.deltaPixelsFromPoints(r,!1),d=h.plus(u.divide(2)),p=s.distanceTo(d);i||(c=c.plus(new t.Point(1,1))),e.position=l,e.size=c,e.distance=p,e.visibility=o}function l(t,e,i,n,s,o,a){var r,l,h=1e3*t.blendTime;if(e.blendStart||(e.blendStart=a),r=a-e.blendStart,l=Math.min(1,r/h),t.alwaysBlend&&(l*=o),e.opacity=l,t.lastDrawn.push(e),1==l)d(t.coverage,s,i,n,!0);else if(h>r)return!0;return!1}function h(t){t.tilesMatrix={},t.tilesLoaded=[]}function c(t,e,i,n){var s,o,a,r;if(!t[e])return!1;if(void 0===i||void 0===n){s=t[e];for(a in s)if(s.hasOwnProperty(a)){o=s[a];for(r in o)if(o.hasOwnProperty(r)&&!o[r])return!1}return!0}return void 0===t[e][i]||void 0===t[e][i][n]||t[e][i][n]===!0}function u(t,e,i,n){return void 0===i||void 0===n?c(t,e+1):c(t,e+1,2*i,2*n)&&c(t,e+1,2*i,2*n+1)&&c(t,e+1,2*i+1,2*n)&&c(t,e+1,2*i+1,2*n+1)}function d(e,i,n,s,o){return e[i]?(e[i][n]||(e[i][n]={}),e[i][n][s]=o,void 0):(t.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",i),void 0)}function p(t,e){t[e]={}}function f(t,e){var i;for(i=t.length-1;i>=0;i--)if(t[i].element==e)return i;return-1}function m(t,e){return t?e.visibility>t.visibility?e:e.visibility==t.visibility&&e.distance<t.distance?e:t:e}function g(t,e,i,n){t.onload=null,t.onabort=null,t.onerror=null,n&&window.clearTimeout(n),window.setTimeout(function(){e(t.src,i?t:null)},1)}function v(t,e,i){var n,s=e.length;for(n=0;s>n;n++)y(t,e[n],i)}function y(t,e,i){e.position=t.pixelFromPoint(e.bounds.getTopLeft(),!0),e.size=t.deltaPixelsFromPoints(e.bounds.getSize(),!0),e.drawHTML(i)}function _(e,i){var n,s,o,a,r,l,h,c;for(n=i.length-1;n>=0;n--){if(s=i[n],e.debugMode)try{b(e,s,i.length,n)}catch(u){t.console.error(u)}e.viewport.collectionMode?(o=s.x+"/"+s.y,r=e.viewport,c=r.collectionTileSource,e.collectionOverlays[o]?(a=e.collectionOverlays[o],a.viewport&&(a.viewport.resize(s.size,!0),a.viewport.goHome(!0))):(l="horizontal"==c.layout?s.x+s.y*c.tilesPerRow:s.y+s.x*c.tilesPerRow,h=l<c.tileSources.length?c.tileSources[l]:null,h&&(e.collectionOverlays[o]=a=new t.Viewer({element:t.makeNeutralElement("div"),mouseNavEnabled:!1,showNavigator:!1,showSequenceControl:!1,showNavigationControl:!1,tileSources:[h]}),function(t){t["-webkit-box-reflect"]="below 0px -webkit-gradient(linear,left top,left bottom,from(transparent),color-stop(60%,transparent),to(rgba(255,255,255,0.4)))",t.border="1px solid rgba(255,255,255,0.2)"}(a.element.style),e.addOverlay(a.element,s.bounds)))):(C?s.drawCanvas(e.context):s.drawHTML(e.canvas),s.beingDrawn=!0)}}function b(t,e,i,n){C&&(t.context.lineWidth=2,t.context.font="small-caps bold 12px ariel",t.context.strokeStyle=t.debugGridColor,t.context.fillStyle=t.debugGridColor,t.context.strokeRect(e.position.x,e.position.y,e.size.x,e.size.y),0==e.x&&0==e.y&&(t.context.fillText("Zoom: "+t.viewport.getZoom(),e.position.x,e.position.y-30),t.context.fillText("Pan: "+t.viewport.getBounds().toString(),e.position.x,e.position.y-20)),t.context.fillText("Level: "+e.level,e.position.x+10,e.position.y+20),t.context.fillText("Column: "+e.x,e.position.x+10,e.position.y+30),t.context.fillText("Row: "+e.y,e.position.x+10,e.position.y+40),t.context.fillText("Order: "+n+" of "+i,e.position.x+10,e.position.y+50),t.context.fillText("Size: "+e.size.toString(),e.position.x+10,e.position.y+60),t.context.fillText("Position: "+e.position.toString(),e.position.x+10,e.position.y+70))}var w=5e3,x=t.getWindowSize(),k=t.Browser.vendor,T=t.Browser.version,S=k==t.BROWSERS.FIREFOX||k==t.BROWSERS.OPERA||k==t.BROWSERS.SAFARI&&T>=4||k==t.BROWSERS.CHROME&&T>=2||k==t.BROWSERS.IE&&T>=9,C=S&&!(x.x<=400||x.y<=400)&&!navigator.appVersion.match("Mobile")&&t.isFunction(document.createElement("canvas").getContext);t.Drawer=function(e){var i,n=arguments;for(t.isPlainObject(e)||(e={source:n[0],viewport:n[1],element:n[2]}),t.extend(!0,this,{downloading:0,tilesMatrix:{},tilesLoaded:[],coverage:{},lastDrawn:[],lastResetTime:0,midUpdate:!1,updateAgain:!0,overlays:[],collectionOverlays:{},maxImageCacheCount:t.DEFAULT_SETTINGS.maxImageCacheCount,imageLoaderLimit:t.DEFAULT_SETTINGS.imageLoaderLimit,minZoomImageRatio:t.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:t.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:t.DEFAULT_SETTINGS.wrapVertical,immediateRender:t.DEFAULT_SETTINGS.immediateRender,blendTime:t.DEFAULT_SETTINGS.blendTime,alwaysBlend:t.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:t.DEFAULT_SETTINGS.minPixelRatio,debugMode:t.DEFAULT_SETTINGS.debugMode},e),this.container=t.getElement(this.element),this.canvas=t.makeNeutralElement(C?"canvas":"div"),this.context=C?this.canvas.getContext("2d"):null,this.normHeight=this.source.dimensions.y/this.source.dimensions.x,this.element=this.container,this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",this.container.style.textAlign="left",this.container.appendChild(this.canvas),i=0;i<this.overlays.length;i++)t.isPlainObject(this.overlays[i])?!function(e,n){var s=document.createElement("a"),o=new t.Rect(n.x,n.y,n.width,n.height),a=Math.floor(1e7*Math.random());s.href="#/overlay/"+a,s.id=a,s.className=n.className?n.className:"openseadragon-overlay",e.overlays[i]=new t.Overlay(s,o)}(this,this.overlays[i]):t.isFunction(this.overlays[i])},t.Drawer.prototype={addOverlay:function(e,i,n){e=t.getElement(e),f(this.overlays,e)>=0||(this.overlays.push(new t.Overlay(e,i,n)),this.updateAgain=!0)},updateOverlay:function(e,i,n){var s;e=t.getElement(e),s=f(this.overlays,e),s>=0&&(this.overlays[s].update(i,n),this.updateAgain=!0)},removeOverlay:function(e){var i;e=t.getElement(e),i=f(this.overlays,e),i>=0&&(this.overlays[i].destroy(),this.overlays.splice(i,1),this.updateAgain=!0)},clearOverlays:function(){for(;this.overlays.length>0;)this.overlays.pop().destroy(),this.updateAgain=!0},needsUpdate:function(){return this.updateAgain},numTilesLoaded:function(){return this.tilesLoaded.length},reset:function(){h(this),this.lastResetTime=+new Date,this.updateAgain=!0},update:function(){this.midUpdate=!0,e(this),this.midUpdate=!1},loadImage:function(e,i){var n,s,o,a=this,r=!1;return(!this.imageLoaderLimit||this.downloading<this.imageLoaderLimit)&&(this.downloading++,n=new Image,o=function(n,s){if(a.downloading--,"function"==typeof i)try{i(s)}catch(o){t.console.error("%s while executing %s callback: %s",o.name,e,o.message,o)}},n.onload=function(){g(n,o,!0,s)},n.onabort=n.onerror=function(){g(n,o,!1,s)},s=window.setTimeout(function(){g(n,o,!1,s)},w),r=!0,n.src=e),r}}}(OpenSeadragon),function(t){t.Viewport=function(e){var i=arguments;i.length&&i[0]instanceof t.Point&&(e={containerSize:i[0],contentSize:i[1],config:i[2]}),e.config&&(t.extend(!0,e,e.config),delete e.config),t.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,springStiffness:t.DEFAULT_SETTINGS.springStiffness,animationTime:t.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:t.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:t.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:t.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:t.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:t.DEFAULT_SETTINGS.wrapVertical},e),this.centerSpringX=new t.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new t.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new t.Spring({initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.resetContentSize(this.contentSize),this.goHome(!0),this.update()},t.Viewport.prototype={resetContentSize:function(e){this.contentSize=e,this.contentAspectX=this.contentSize.x/this.contentSize.y,this.contentAspectY=this.contentSize.y/this.contentSize.x,this.fitWidthBounds=new t.Rect(0,0,1,this.contentAspectX),this.fitHeightBounds=new t.Rect(0,0,1,this.contentAspectY),this.homeBounds=this.fitHeightBounds},getHomeZoom:function(){var t=this.contentAspectX/this.getAspectRatio();return t>=1?1:t},getMinZoom:function(){var t=this.getHomeZoom(),e=this.minZoomImageRatio*t;return Math.min(e,t)},getMaxZoom:function(){var t=this.contentSize.x*this.maxZoomPixelRatio/this.containerSize.x;return Math.max(t,this.getHomeZoom())},getAspectRatio:function(){return this.containerSize.x/this.containerSize.y},getContainerSize:function(){return new t.Point(this.containerSize.x,this.containerSize.y)},getBounds:function(e){var i=this.getCenter(e),n=1/this.getZoom(e),s=n/this.getAspectRatio();return new t.Rect(i.x-n/2,i.y-s/2,n,s)},getCenter:function(e){var i,n,s,o,a,r,l,h,c=new t.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),u=new t.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return e?c:this.zoomPoint?(i=this.pixelFromPoint(this.zoomPoint,!0),n=this.getZoom(),s=1/n,o=s/this.getAspectRatio(),a=new t.Rect(c.x-s/2,c.y-o/2,s,o),r=this.zoomPoint.minus(a.getTopLeft()).times(this.containerSize.x/a.width),l=r.minus(i),h=l.divide(this.containerSize.x*n),u.plus(h)):u},getZoom:function(t){return t?this.zoomSpring.current.value:this.zoomSpring.target.value},applyConstraints:function(t){var e,i,n,s,o,a,r,l=this.getZoom(),h=Math.max(Math.min(l,this.getMaxZoom()),this.getMinZoom()),c=0,u=0;l!=h&&this.zoomTo(h,this.zoomPoint,t),e=this.getBounds(),i=this.visibilityRatio*e.width,n=this.visibilityRatio*e.height,s=e.x+e.width,o=1-e.x,a=e.y+e.height,r=this.contentAspectY-e.y,this.wrapHorizontal||(i>s?c=i-s:i>o&&(c=o-i)),this.wrapVertical||(n>a?u=n-a:n>r&&(u=r-n)),(c||u)&&(e.x+=c,e.y+=u,this.fitBounds(e,t))},ensureVisible:function(t){this.applyConstraints(t)},fitBounds:function(e,i){var n,s,o,a,r=this.getAspectRatio(),l=e.getCenter(),h=new t.Rect(e.x,e.y,e.width,e.height);return h.getAspectRatio()>=r?(h.height=e.width/r,h.y=l.y-h.height/2):(h.width=e.height*r,h.x=l.x-h.width/2),this.panTo(this.getCenter(!0),!0),this.zoomTo(this.getZoom(!0),null,!0),n=this.getBounds(),s=this.getZoom(),o=1/h.width,o==s||h.width==n.width?(this.panTo(l,i),void 0):(a=n.getTopLeft().times(this.containerSize.x/n.width).minus(h.getTopLeft().times(this.containerSize.x/h.width)).divide(this.containerSize.x/n.width-this.containerSize.x/h.width),this.zoomTo(o,a,i),void 0)},goHome:function(t){return this.contentSize.x<=this.contentSize.y?this.fitVertically(t):this.fitHorizontally(t)},fitVertically:function(t){var e=this.getCenter();this.wrapHorizontal&&(e.x=(1+e.x%1)%1,this.centerSpringX.resetTo(e.x),this.centerSpringX.update()),this.wrapVertical&&(e.y=(this.contentAspectY+e.y%this.contentAspectY)%this.contentAspectY,this.centerSpringY.resetTo(e.y),this.centerSpringY.update()),this.fitBounds(this.homeBounds,t)},fitHorizontally:function(t){var e=this.getCenter();this.wrapHorizontal&&(e.x=(this.contentAspectX+e.x%this.contentAspectX)%this.contentAspectX,this.centerSpringX.resetTo(e.x),this.centerSpringX.update()),this.wrapVertical&&(e.y=(1+e.y%1)%1,this.centerSpringY.resetTo(e.y),this.centerSpringY.update()),this.fitBounds(this.homeBounds,t)},panBy:function(e,i){var n=new t.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);this.panTo(n.plus(e),i)},panTo:function(t,e){e?(this.centerSpringX.resetTo(t.x),this.centerSpringY.resetTo(t.y)):(this.centerSpringX.springTo(t.x),this.centerSpringY.springTo(t.y))},zoomBy:function(t,e,i){this.zoomTo(this.zoomSpring.target.value*t,e,i)},zoomTo:function(e,i,n){n?this.zoomSpring.resetTo(e):this.zoomSpring.springTo(e),this.zoomPoint=i instanceof t.Point?i:null},resize:function(e,i){var n=this.getBounds(),s=n,o=e.x/this.containerSize.x;this.containerSize=new t.Point(e.x,e.y),i&&(s.width=n.width*o,s.height=s.width/this.getAspectRatio()),this.fitBounds(s,!0)},update:function(){var t,e,i,n,s=this.centerSpringX.current.value,o=this.centerSpringY.current.value,a=this.zoomSpring.current.value;return this.zoomPoint&&(t=this.pixelFromPoint(this.zoomPoint,!0)),this.zoomSpring.update(),this.zoomPoint&&this.zoomSpring.current.value!=a?(e=this.pixelFromPoint(this.zoomPoint,!0),i=e.minus(t),n=this.deltaPointsFromPixels(i,!0),this.centerSpringX.shiftBy(n.x),this.centerSpringY.shiftBy(n.y)):this.zoomPoint=null,this.centerSpringX.update(),this.centerSpringY.update(),this.centerSpringX.current.value!=s||this.centerSpringY.current.value!=o||this.zoomSpring.current.value!=a},deltaPixelsFromPoints:function(t,e){return t.times(this.containerSize.x*this.getZoom(e))},deltaPointsFromPixels:function(t,e){return t.divide(this.containerSize.x*this.getZoom(e))},pixelFromPoint:function(t,e){var i=this.getBounds(e);return t.minus(i.getTopLeft()).times(this.containerSize.x/i.width)},pointFromPixel:function(t,e){var i=this.getBounds(e);return t.divide(this.containerSize.x/i.width).plus(i.getTopLeft())}}}(OpenSeadragon),function(t,e,i){var n,s;typeof exports!=i+""?n=exports:(s=t.L,n={},n.noConflict=function(){return t.L=s,this},t.L=n),n.version="0.5",n.Util={extend:function(t){var e,i,n,s,o=Array.prototype.slice.call(arguments,1);for(i=0,n=o.length;n>i;i++){s=o[i]||{};for(e in s)s.hasOwnProperty(e)&&(t[e]=s[e])}return t},bind:function(t,e){var i=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return t.apply(e,i||arguments)}},stamp:function(){var t=0,e="_leaflet_id";return function(i){return i[e]=i[e]||++t,i[e]}}(),limitExecByInterval:function(t,e,i){var n,s;return function o(){var a=arguments;return n?(s=!0,void 0):(n=!0,setTimeout(function(){n=!1,s&&(o.apply(i,a),s=!1)},e),t.apply(i,a),void 0)}},falseFn:function(){return!1},formatNum:function(t,e){var i=Math.pow(10,e||5);return Math.round(t*i)/i},splitWords:function(t){return t.replace(/^\s+|\s+$/g,"").split(/\s+/)},setOptions:function(t,e){return t.options=n.extend({},t.options,e),t.options},getParamString:function(t,e){var i=[];for(var n in t)t.hasOwnProperty(n)&&i.push(n+"="+t[n]);return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")},template:function(t,e){return t.replace(/\{ *([\w_]+) *\}/g,function(t,i){var n=e[i];if(!e.hasOwnProperty(i))throw new Error("No value provided for variable "+t);return n})},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function e(e){var i,n,s=["webkit","moz","o","ms"];for(i=0;i<s.length&&!n;i++)n=t[s[i]+e];return n}function i(e){var i=+new Date,n=Math.max(0,16-(i-s));return s=i+n,t.setTimeout(e,n)}var s=0,o=t.requestAnimationFrame||e("RequestAnimationFrame")||i,a=t.cancelAnimationFrame||e("CancelAnimationFrame")||e("CancelRequestAnimationFrame")||function(e){t.clearTimeout(e)};n.Util.requestAnimFrame=function(e,s,a,r){return e=n.bind(e,s),a&&o===i?(e(),void 0):o.call(t,e,r)},n.Util.cancelAnimFrame=function(e){e&&a.call(t,e)}}(),n.extend=n.Util.extend,n.bind=n.Util.bind,n.stamp=n.Util.stamp,n.setOptions=n.Util.setOptions,n.Class=function(){},n.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},i=function(){};i.prototype=this.prototype;var s=new i;s.constructor=e,e.prototype=s;for(var o in this)this.hasOwnProperty(o)&&"prototype"!==o&&(e[o]=this[o]);t.statics&&(n.extend(e,t.statics),delete t.statics),t.includes&&(n.Util.extend.apply(null,[s].concat(t.includes)),delete t.includes),t.options&&s.options&&(t.options=n.extend({},s.options,t.options)),n.extend(s,t),s._initHooks=[];var a=this;return s.callInitHooks=function(){if(!this._initHooksCalled){a.prototype.callInitHooks&&a.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=s._initHooks.length;e>t;t++)s._initHooks[t].call(this)}},e},n.Class.include=function(t){n.extend(this.prototype,t)},n.Class.mergeOptions=function(t){n.extend(this.prototype.options,t)},n.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i)};var o="_leaflet_events";n.Mixin={},n.Mixin.Events={addEventListener:function(t,e,i){var s,a,r,l=this[o]=this[o]||{};if("object"==typeof t){for(s in t)t.hasOwnProperty(s)&&this.addEventListener(s,t[s],e);return this}for(t=n.Util.splitWords(t),a=0,r=t.length;r>a;a++)l[t[a]]=l[t[a]]||[],l[t[a]].push({action:e,context:i||this});return this},hasEventListeners:function(t){return o in this&&t in this[o]&&this[o][t].length>0},removeEventListener:function(t,e,i){var s,a,r,l,h,c=this[o];if("object"==typeof t){for(s in t)t.hasOwnProperty(s)&&this.removeEventListener(s,t[s],e);return this}for(t=n.Util.splitWords(t),a=0,r=t.length;r>a;a++)if(this.hasEventListeners(t[a]))for(l=c[t[a]],h=l.length-1;h>=0;h--)e&&l[h].action!==e||i&&l[h].context!==i||l.splice(h,1);return this},fireEvent:function(t,e){if(!this.hasEventListeners(t))return this;for(var i=n.extend({type:t,target:this},e),s=this[o][t].slice(),a=0,r=s.length;r>a;a++)s[a].action.call(s[a].context||this,i);return this}},n.Mixin.Events.on=n.Mixin.Events.addEventListener,n.Mixin.Events.off=n.Mixin.Events.removeEventListener,n.Mixin.Events.fire=n.Mixin.Events.fireEvent,function(){var s=!!t.ActiveXObject,o=s&&!t.XMLHttpRequest,a=s&&!e.querySelector,r=navigator.userAgent.toLowerCase(),l=-1!==r.indexOf("webkit"),h=-1!==r.indexOf("chrome"),c=-1!==r.indexOf("android"),u=-1!==r.search("android [23]"),d=typeof orientation!=i+"",p=t.navigator&&t.navigator.msPointerEnabled&&t.navigator.msMaxTouchPoints,f="devicePixelRatio"in t&&t.devicePixelRatio>1||"matchMedia"in t&&t.matchMedia("(min-resolution:144dpi)")&&t.matchMedia("(min-resolution:144dpi)").matches,m=e.documentElement,g=s&&"transition"in m.style,v="WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix,y="MozPerspective"in m.style,_="OTransition"in m.style,b=!t.L_DISABLE_3D&&(g||v||y||_),w=!t.L_NO_TOUCH&&function(){var t="ontouchstart";
if(p||t in m)return!0;var i=e.createElement("div"),n=!1;return i.setAttribute?(i.setAttribute(t,"return;"),"function"==typeof i[t]&&(n=!0),i.removeAttribute(t),i=null,n):!1}();n.Browser={ie:s,ie6:o,ie7:a,webkit:l,android:c,android23:u,chrome:h,ie3d:g,webkit3d:v,gecko3d:y,opera3d:_,any3d:b,mobile:d,mobileWebkit:d&&l,mobileWebkit3d:d&&v,mobileOpera:d&&t.opera,touch:w,msTouch:p,retina:f}}(),n.Point=function(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e},n.Point.prototype={clone:function(){return new n.Point(this.x,this.y)},add:function(t){return this.clone()._add(n.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(n.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(t){t=n.point(t);var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return t.x===this.x&&t.y===this.y},toString:function(){return"Point("+n.Util.formatNum(this.x)+", "+n.Util.formatNum(this.y)+")"}},n.point=function(t,e,i){return t instanceof n.Point?t:n.Util.isArray(t)?new n.Point(t[0],t[1]):isNaN(t)?t:new n.Point(t,e,i)},n.Bounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,s=i.length;s>n;n++)this.extend(i[n])},n.Bounds.prototype={extend:function(t){return t=n.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new n.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new n.Point(this.min.x,this.max.y)},getTopRight:function(){return new n.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return t="number"==typeof t[0]||t instanceof n.Point?n.point(t):n.bounds(t),t instanceof n.Bounds?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=n.bounds(t);var e=this.min,i=this.max,s=t.min,o=t.max,a=o.x>=e.x&&s.x<=i.x,r=o.y>=e.y&&s.y<=i.y;return a&&r},isValid:function(){return!(!this.min||!this.max)}},n.bounds=function(t,e){return!t||t instanceof n.Bounds?t:new n.Bounds(t,e)},n.Transformation=function(t,e,i,n){this._a=t,this._b=e,this._c=i,this._d=n},n.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new n.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},n.DomUtil={get:function(t){return"string"==typeof t?e.getElementById(t):t},getStyle:function(t,i){var n=t.style[i];if(!n&&t.currentStyle&&(n=t.currentStyle[i]),(!n||"auto"===n)&&e.defaultView){var s=e.defaultView.getComputedStyle(t,null);n=s?s[i]:null}return"auto"===n?null:n},getViewportOffset:function(t){var i,s=0,o=0,a=t,r=e.body,l=n.Browser.ie7;do{if(s+=a.offsetTop||0,o+=a.offsetLeft||0,s+=parseInt(n.DomUtil.getStyle(a,"borderTopWidth"),10)||0,o+=parseInt(n.DomUtil.getStyle(a,"borderLeftWidth"),10)||0,i=n.DomUtil.getStyle(a,"position"),a.offsetParent===r&&"absolute"===i)break;if("fixed"===i){s+=r.scrollTop||0,o+=r.scrollLeft||0;break}a=a.offsetParent}while(a);a=t;do{if(a===r)break;s-=a.scrollTop||0,o-=a.scrollLeft||0,n.DomUtil.documentIsLtr()||!n.Browser.webkit&&!l||(o+=a.scrollWidth-a.clientWidth,l&&"hidden"!==n.DomUtil.getStyle(a,"overflow-y")&&"hidden"!==n.DomUtil.getStyle(a,"overflow")&&(o+=17)),a=a.parentNode}while(a);return new n.Point(o,s)},documentIsLtr:function(){return n.DomUtil._docIsLtrCached||(n.DomUtil._docIsLtrCached=!0,n.DomUtil._docIsLtr="ltr"===n.DomUtil.getStyle(e.body,"direction")),n.DomUtil._docIsLtr},create:function(t,i,n){var s=e.createElement(t);return s.className=i,n&&n.appendChild(s),s},disableTextSelection:function(){e.selection&&e.selection.empty&&e.selection.empty(),this._onselectstart||(this._onselectstart=e.onselectstart||null,e.onselectstart=n.Util.falseFn)},enableTextSelection:function(){e.onselectstart===n.Util.falseFn&&(e.onselectstart=this._onselectstart,this._onselectstart=null)},hasClass:function(t,e){return t.className.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)},addClass:function(t,e){n.DomUtil.hasClass(t,e)||(t.className+=(t.className?" ":"")+e)},removeClass:function(t,e){function i(t,i){return i===e?"":t}t.className=t.className.replace(/(\S+)\s*/g,i).replace(/(^\s+|\s+$)/,"")},setOpacity:function(t,e){if("opacity"in t.style)t.style.opacity=e;else if("filter"in t.style){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(s){}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"}},testProp:function(t){for(var i=e.documentElement.style,n=0;n<t.length;n++)if(t[n]in i)return t[n];return!1},getTranslateString:function(t){var e=n.Browser.webkit3d,i="translate"+(e?"3d":"")+"(",s=(e?",0":"")+")";return i+t.x+"px,"+t.y+"px"+s},getScaleString:function(t,e){var i=n.DomUtil.getTranslateString(e.add(e.multiplyBy(-1*t))),s=" scale("+t+") ";return i+s},setPosition:function(t,e,i){t._leaflet_pos=e,!i&&n.Browser.any3d?(t.style[n.DomUtil.TRANSFORM]=n.DomUtil.getTranslateString(e),n.Browser.mobileWebkit3d&&(t.style.WebkitBackfaceVisibility="hidden")):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos}},n.DomUtil.TRANSFORM=n.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),n.DomUtil.TRANSITION=n.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),n.DomUtil.TRANSITION_END="webkitTransition"===n.DomUtil.TRANSITION||"OTransition"===n.DomUtil.TRANSITION?n.DomUtil.TRANSITION+"End":"transitionend",n.LatLng=function(t,e){var i=parseFloat(t),n=parseFloat(e);if(isNaN(i)||isNaN(n))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=i,this.lng=n},n.extend(n.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),n.LatLng.prototype={equals:function(t){if(!t)return!1;t=n.latLng(t);var e=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return e<=n.LatLng.MAX_MARGIN},toString:function(t){return"LatLng("+n.Util.formatNum(this.lat,t)+", "+n.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){t=n.latLng(t);var e=6378137,i=n.LatLng.DEG_TO_RAD,s=(t.lat-this.lat)*i,o=(t.lng-this.lng)*i,a=this.lat*i,r=t.lat*i,l=Math.sin(s/2),h=Math.sin(o/2),c=l*l+h*h*Math.cos(a)*Math.cos(r);return 2*e*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))},wrap:function(t,e){var i=this.lng;return t=t||-180,e=e||180,i=(i+e)%(e-t)+(t>i||i===e?e:t),new n.LatLng(this.lat,i)}},n.latLng=function(t,e){return t instanceof n.LatLng?t:n.Util.isArray(t)?new n.LatLng(t[0],t[1]):isNaN(t)?t:new n.LatLng(t,e)},n.LatLngBounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,s=i.length;s>n;n++)this.extend(i[n])},n.LatLngBounds.prototype={extend:function(t){return t="number"==typeof t[0]||"string"==typeof t[0]||t instanceof n.LatLng?n.latLng(t):n.latLngBounds(t),t instanceof n.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(t.lat,this._southWest.lat),this._southWest.lng=Math.min(t.lng,this._southWest.lng),this._northEast.lat=Math.max(t.lat,this._northEast.lat),this._northEast.lng=Math.max(t.lng,this._northEast.lng)):(this._southWest=new n.LatLng(t.lat,t.lng),this._northEast=new n.LatLng(t.lat,t.lng)):t instanceof n.LatLngBounds&&(this.extend(t._southWest),this.extend(t._northEast)),this},pad:function(t){var e=this._southWest,i=this._northEast,s=Math.abs(e.lat-i.lat)*t,o=Math.abs(e.lng-i.lng)*t;return new n.LatLngBounds(new n.LatLng(e.lat-s,e.lng-o),new n.LatLng(i.lat+s,i.lng+o))},getCenter:function(){return new n.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new n.LatLng(this._northEast.lat,this._southWest.lng)},getSouthEast:function(){return new n.LatLng(this._southWest.lat,this._northEast.lng)},contains:function(t){t="number"==typeof t[0]||t instanceof n.LatLng?n.latLng(t):n.latLngBounds(t);var e,i,s=this._southWest,o=this._northEast;return t instanceof n.LatLngBounds?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=s.lat&&i.lat<=o.lat&&e.lng>=s.lng&&i.lng<=o.lng},intersects:function(t){t=n.latLngBounds(t);var e=this._southWest,i=this._northEast,s=t.getSouthWest(),o=t.getNorthEast(),a=o.lat>=e.lat&&s.lat<=i.lat,r=o.lng>=e.lng&&s.lng<=i.lng;return a&&r},toBBoxString:function(){var t=this._southWest,e=this._northEast;return[t.lng,t.lat,e.lng,e.lat].join(",")},equals:function(t){return t?(t=n.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}},n.latLngBounds=function(t,e){return!t||t instanceof n.LatLngBounds?t:new n.LatLngBounds(t,e)},n.Projection={},n.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(t){var e=n.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,s=Math.max(Math.min(i,t.lat),-i),o=t.lng*e,a=s*e;return a=Math.log(Math.tan(Math.PI/4+a/2)),new n.Point(o,a)},unproject:function(t){var e=n.LatLng.RAD_TO_DEG,i=t.x*e,s=(2*Math.atan(Math.exp(t.y))-Math.PI/2)*e;return new n.LatLng(s,i)}},n.Projection.LonLat={project:function(t){return new n.Point(t.lng,t.lat)},unproject:function(t){return new n.LatLng(t.y,t.x)}},n.CRS={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},scale:function(t){return 256*Math.pow(2,t)}},n.CRS.Simple=n.extend({},n.CRS,{projection:n.Projection.LonLat,transformation:new n.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)}}),n.CRS.EPSG3857=n.extend({},n.CRS,{code:"EPSG:3857",projection:n.Projection.SphericalMercator,transformation:new n.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(t){var e=this.projection.project(t),i=6378137;return e.multiplyBy(i)}}),n.CRS.EPSG900913=n.extend({},n.CRS.EPSG3857,{code:"EPSG:900913"}),n.CRS.EPSG4326=n.extend({},n.CRS,{code:"EPSG:4326",projection:n.Projection.LonLat,transformation:new n.Transformation(1/360,.5,-1/360,.5)}),n.Map=n.Class.extend({includes:n.Mixin.Events,options:{crs:n.CRS.EPSG3857,fadeAnimation:n.DomUtil.TRANSITION&&!n.Browser.android23,trackResize:!0,markerZoomAnimation:n.DomUtil.TRANSITION&&n.Browser.any3d},initialize:function(t,e){e=n.setOptions(this,e),this._initContainer(t),this._initLayout(),this.callInitHooks(),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.center&&e.zoom!==i&&this.setView(n.latLng(e.center),e.zoom,!0),this._initLayers(e.layers)},setView:function(t,e){return this._resetView(n.latLng(t),this._limitZoom(e)),this},setZoom:function(t){return this.setView(this.getCenter(),t)},zoomIn:function(t){return this.setZoom(this._zoom+(t||1))},zoomOut:function(t){return this.setZoom(this._zoom-(t||1))},fitBounds:function(t){var e=this.getBoundsZoom(t);return this.setView(n.latLngBounds(t).getCenter(),e)},fitWorld:function(){var t=new n.LatLng(-60,-170),e=new n.LatLng(85,179);return this.fitBounds(new n.LatLngBounds(t,e))},panTo:function(t){return this.setView(t,this._zoom)},panBy:function(t){return this.fire("movestart"),this._rawPanBy(n.point(t)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(t){if(t=n.latLngBounds(t),this.options.maxBounds=t,!t)return this._boundsMinZoom=null,this;var e=this.getBoundsZoom(t,!0);return this._boundsMinZoom=e,this._loaded&&(this._zoom<e?this.setView(t.getCenter(),e):this.panInsideBounds(t)),this},panInsideBounds:function(t){t=n.latLngBounds(t);var e=this.getBounds(),i=this.project(e.getSouthWest()),s=this.project(e.getNorthEast()),o=this.project(t.getSouthWest()),a=this.project(t.getNorthEast()),r=0,l=0;return s.y<a.y&&(l=a.y-s.y),s.x>a.x&&(r=a.x-s.x),i.y>o.y&&(l=o.y-i.y),i.x<o.x&&(r=o.x-i.x),this.panBy(new n.Point(r,l,!0))},addLayer:function(t){var e=n.stamp(t);return this._layers[e]?this:(this._layers[e]=t,!t.options||isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[e]=t,this._updateZoomLevels()),this.options.zoomAnimation&&n.TileLayer&&t instanceof n.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,t.on("load",this._onTileLayerLoad,this)),this.whenReady(function(){t.onAdd(this),this.fire("layeradd",{layer:t})},this),this)},removeLayer:function(t){var e=n.stamp(t);if(this._layers[e])return t.onRemove(this),delete this._layers[e],this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels()),this.options.zoomAnimation&&n.TileLayer&&t instanceof n.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,t.off("load",this._onTileLayerLoad,this)),this.fire("layerremove",{layer:t})},hasLayer:function(t){var e=n.stamp(t);return this._layers.hasOwnProperty(e)},invalidateSize:function(t){var e=this.getSize();if(this._sizeChanged=!0,this.options.maxBounds&&this.setMaxBounds(this.options.maxBounds),!this._loaded)return this;var i=e._subtract(this.getSize())._divideBy(2)._round();return t===!0?this.panBy(i):(this._rawPanBy(i),this.fire("move"),clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(n.bind(this.fire,this,"moveend"),200)),this},addHandler:function(t,e){return e?(this[t]=new e(this),this.options[t]&&this[t].enable(),this):void 0},getCenter:function(){return this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new n.LatLngBounds(e,i)},getMinZoom:function(){var t=this.options.minZoom||0,e=this._layersMinZoom||0,i=this._boundsMinZoom||0;return Math.max(t,e,i)},getMaxZoom:function(){var t=this.options.maxZoom===i?1/0:this.options.maxZoom,e=this._layersMaxZoom===i?1/0:this._layersMaxZoom;return Math.min(t,e)},getBoundsZoom:function(t,e){t=n.latLngBounds(t);var i,s,o,a=this.getSize(),r=this.options.minZoom||0,l=this.getMaxZoom(),h=t.getNorthEast(),c=t.getSouthWest(),u=!0;e&&r--;do r++,s=this.project(h,r),o=this.project(c,r),i=new n.Point(Math.abs(s.x-o.x),Math.abs(o.y-s.y)),u=e?i.x<a.x||i.y<a.y:i.x<=a.x&&i.y<=a.y;while(u&&l>=r);return u&&e?null:e?r:r-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new n.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var t=this._getTopLeftPoint();return new n.Bounds(t,t.add(this.getSize()))},getPixelOrigin:function(){return this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t){var e=this.options.crs;return e.scale(t)/e.scale(this._zoom)},getScaleZoom:function(t){return this._zoom+Math.log(t)/Math.LN2},project:function(t,e){return e=e===i?this._zoom:e,this.options.crs.latLngToPoint(n.latLng(t),e)},unproject:function(t,e){return e=e===i?this._zoom:e,this.options.crs.pointToLatLng(n.point(t),e)},layerPointToLatLng:function(t){var e=n.point(t).add(this._initialTopLeftPoint);return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(n.latLng(t))._round();return e._subtract(this._initialTopLeftPoint)},containerPointToLayerPoint:function(t){return n.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return n.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(n.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(n.latLng(t)))},mouseEventToContainerPoint:function(t){return n.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=n.DomUtil.get(t);if(e._leaflet)throw new Error("Map container is already initialized.");e._leaflet=!0},_initLayout:function(){var t=this._container;n.DomUtil.addClass(t,"leaflet-container"),n.Browser.touch&&n.DomUtil.addClass(t,"leaflet-touch"),this.options.fadeAnimation&&n.DomUtil.addClass(t,"leaflet-fade-anim");var e=n.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._mapPane=t.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=t.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),t.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),t.shadowPane=this._createPane("leaflet-shadow-pane"),t.overlayPane=this._createPane("leaflet-overlay-pane"),t.markerPane=this._createPane("leaflet-marker-pane"),t.popupPane=this._createPane("leaflet-popup-pane");var e=" leaflet-zoom-hide";this.options.markerZoomAnimation||(n.DomUtil.addClass(t.markerPane,e),n.DomUtil.addClass(t.shadowPane,e),n.DomUtil.addClass(t.popupPane,e))},_createPane:function(t,e){return n.DomUtil.create("div",t,e||this._panes.objectsPane)},_initLayers:function(t){t=t?n.Util.isArray(t)?t:[t]:[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0;var e,i;for(e=0,i=t.length;i>e;e++)this.addLayer(t[e])},_resetView:function(t,e,i,s){var o=this._zoom!==e;s||(this.fire("movestart"),o&&this.fire("zoomstart")),this._zoom=e,this._initialTopLeftPoint=this._getNewTopLeftPoint(t),i?this._initialTopLeftPoint._add(this._getMapPanePos()):n.DomUtil.setPosition(this._mapPane,new n.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var a=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!i}),this.fire("move"),(o||s)&&this.fire("zoomend"),this.fire("moveend",{hard:!i}),a&&this.fire("load")},_rawPanBy:function(t){n.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_updateZoomLevels:function(){var t,e=1/0,n=-1/0;for(t in this._zoomBoundLayers)if(this._zoomBoundLayers.hasOwnProperty(t)){var s=this._zoomBoundLayers[t];isNaN(s.options.minZoom)||(e=Math.min(e,s.options.minZoom)),isNaN(s.options.maxZoom)||(n=Math.max(n,s.options.maxZoom))}t===i?this._layersMaxZoom=this._layersMinZoom=i:(this._layersMaxZoom=n,this._layersMinZoom=e)},_initEvents:function(){if(n.DomEvent){n.DomEvent.on(this._container,"click",this._onMouseClick,this);var e,i,s=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(e=0,i=s.length;i>e;e++)n.DomEvent.on(this._container,s[e],this._fireMouseEvent,this);this.options.trackResize&&n.DomEvent.on(t,"resize",this._onResize,this)}},_onResize:function(){n.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=n.Util.requestAnimFrame(this.invalidateSize,this,!1,this._container)},_onMouseClick:function(t){!this._loaded||this.dragging&&this.dragging.moved()||(this.fire("preclick"),this._fireMouseEvent(t))},_fireMouseEvent:function(t){if(this._loaded){var e=t.type;if(e="mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,this.hasEventListeners(e)){"contextmenu"===e&&n.DomEvent.preventDefault(t);var i=this.mouseEventToContainerPoint(t),s=this.containerPointToLayerPoint(i),o=this.layerPointToLatLng(s);this.fire(e,{latlng:o,layerPoint:s,containerPoint:i,originalEvent:t})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this._tileBg&&(clearTimeout(this._clearTileBgTimer),this._clearTileBgTimer=setTimeout(n.bind(this._clearTileBg,this),500))},whenReady:function(t,e){return this._loaded?t.call(e||this,this):this.on("load",t,e),this},_getMapPanePos:function(){return n.DomUtil.getPosition(this._mapPane)},_getTopLeftPoint:function(){if(!this._loaded)throw new Error("Set map center and zoom first.");return this._initialTopLeftPoint.subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewTopLeftPoint(i,e).add(this._getMapPanePos());return this.project(t,e)._subtract(n)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom();return Math.max(e,Math.min(i,t))}}),n.map=function(t,e){return new n.Map(t,e)},n.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.3142,R_MAJOR:6378137,project:function(t){var e=n.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,s=Math.max(Math.min(i,t.lat),-i),o=this.R_MAJOR,a=this.R_MINOR,r=t.lng*e*o,l=s*e,h=a/o,c=Math.sqrt(1-h*h),u=c*Math.sin(l);u=Math.pow((1-u)/(1+u),.5*c);var d=Math.tan(.5*(.5*Math.PI-l))/u;return l=-a*Math.log(d),new n.Point(r,l)},unproject:function(t){for(var e,i=n.LatLng.RAD_TO_DEG,s=this.R_MAJOR,o=this.R_MINOR,a=t.x*i/s,r=o/s,l=Math.sqrt(1-r*r),h=Math.exp(-t.y/o),c=Math.PI/2-2*Math.atan(h),u=15,d=1e-7,p=u,f=.1;Math.abs(f)>d&&--p>0;)e=l*Math.sin(c),f=Math.PI/2-2*Math.atan(h*Math.pow((1-e)/(1+e),.5*l))-c,c+=f;return new n.LatLng(c*i,a)}},n.CRS.EPSG3395=n.extend({},n.CRS,{code:"EPSG:3395",projection:n.Projection.Mercator,transformation:function(){var t=n.Projection.Mercator,e=t.R_MAJOR,i=t.R_MINOR;return new n.Transformation(.5/(Math.PI*e),.5,-.5/(Math.PI*i),.5)}()}),n.TileLayer=n.Class.extend({includes:n.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:n.Browser.mobile,updateWhenIdle:n.Browser.mobile},initialize:function(t,e){e=n.setOptions(this,e),e.detectRetina&&n.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomOffset++,e.minZoom>0&&e.minZoom--,this.options.maxZoom--),this._url=t;var i=this.options.subdomains;"string"==typeof i&&(this.options.subdomains=i.split(""))},onAdd:function(t){this._map=t,this._initContainer(),this._createTileProto(),t.on({viewreset:this._resetCallback,moveend:this._update},this),this.options.updateWhenIdle||(this._limitedUpdate=n.Util.limitExecByInterval(this._update,150,this),t.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this._container.parentNode.removeChild(this._container),t.off({viewreset:this._resetCallback,moveend:this._update},this),this.options.updateWhenIdle||t.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var t=this._map._panes.tilePane;return this._container&&(t.appendChild(this._container),this._setAutoZIndex(t,Math.max)),this},bringToBack:function(){var t=this._map._panes.tilePane;return this._container&&(t.insertBefore(this._container,t.firstChild),this._setAutoZIndex(t,Math.min)),this},getAttribution:function(){return this.options.attribution},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},redraw:function(){return this._map&&(this._map._panes.tilePane.empty=!1,this._reset(!0),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==i&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t,e){var i,n,s,o=t.children,a=-e(1/0,-1/0);for(n=0,s=o.length;s>n;n++)o[n]!==this._container&&(i=parseInt(o[n].style.zIndex,10),isNaN(i)||(a=e(a,i)));this.options.zIndex=this._container.style.zIndex=(isFinite(a)?a:0)+e(1,-1)},_updateOpacity:function(){n.DomUtil.setOpacity(this._container,this.options.opacity);var t,e=this._tiles;if(n.Browser.webkit)for(t in e)e.hasOwnProperty(t)&&(e[t].style.webkitTransform+=" translate(0,0)")},_initContainer:function(){var t=this._map._panes.tilePane;(!this._container||t.empty)&&(this._container=n.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),t.appendChild(this._container),this.options.opacity<1&&this._updateOpacity())},_resetCallback:function(t){this._reset(t.hard)},_reset:function(t){var e=this._tiles;for(var i in e)e.hasOwnProperty(i)&&this.fire("tileunload",{tile:e[i]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),t&&this._container&&(this._container.innerHTML=""),this._initContainer()},_update:function(){if(this._map){var t=this._map.getPixelBounds(),e=this._map.getZoom(),i=this.options.tileSize;if(!(e>this.options.maxZoom||e<this.options.minZoom)){var s=new n.Point(Math.floor(t.min.x/i),Math.floor(t.min.y/i)),o=new n.Point(Math.floor(t.max.x/i),Math.floor(t.max.y/i)),a=new n.Bounds(s,o);this._addTilesFromCenterOut(a),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(a)}}},_addTilesFromCenterOut:function(t){var i,s,o,a=[],r=t.getCenter();for(i=t.min.y;i<=t.max.y;i++)for(s=t.min.x;s<=t.max.x;s++)o=new n.Point(s,i),this._tileShouldBeLoaded(o)&&a.push(o);var l=a.length;if(0!==l){a.sort(function(t,e){return t.distanceTo(r)-e.distanceTo(r)});var h=e.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=l,s=0;l>s;s++)this._addTile(a[s],h);this._container.appendChild(h)}},_tileShouldBeLoaded:function(t){if(t.x+":"+t.y in this._tiles)return!1;if(!this.options.continuousWorld){var e=this._getWrapTileNum();if(this.options.noWrap&&(t.x<0||t.x>=e)||t.y<0||t.y>=e)return!1}return!0},_removeOtherTiles:function(t){var e,i,n,s;for(s in this._tiles)this._tiles.hasOwnProperty(s)&&(e=s.split(":"),i=parseInt(e[0],10),n=parseInt(e[1],10),(i<t.min.x||i>t.max.x||n<t.min.y||n>t.max.y)&&this._removeTile(s))},_removeTile:function(t){var e=this._tiles[t];this.fire("tileunload",{tile:e,url:e.src}),this.options.reuseTiles?(n.DomUtil.removeClass(e,"leaflet-tile-loaded"),this._unusedTiles.push(e)):e.parentNode===this._container&&this._container.removeChild(e),n.Browser.android||(e.src=n.Util.emptyImageUrl),delete this._tiles[t]},_addTile:function(t,e){var i=this._getTilePos(t),s=this._getTile();n.DomUtil.setPosition(s,i,n.Browser.chrome||n.Browser.android23),this._tiles[t.x+":"+t.y]=s,this._loadTile(s,t),s.parentNode!==this._container&&e.appendChild(s)},_getZoomForUrl:function(){var t=this.options,e=this._map.getZoom();return t.zoomReverse&&(e=t.maxZoom-e),e+t.zoomOffset},_getTilePos:function(t){var e=this._map.getPixelOrigin(),i=this.options.tileSize;return t.multiplyBy(i).subtract(e)},getTileUrl:function(t){return this._adjustTilePoint(t),n.Util.template(this._url,n.extend({s:this._getSubdomain(t),z:this._getZoomForUrl(),x:t.x,y:t.y},this.options))},_getWrapTileNum:function(){return Math.pow(2,this._getZoomForUrl())},_adjustTilePoint:function(t){var e=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(t.x=(t.x%e+e)%e),this.options.tms&&(t.y=e-t.y-1)},_getSubdomain:function(t){var e=(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_createTileProto:function(){var t=this._tileImg=n.DomUtil.create("img","leaflet-tile");t.style.width=t.style.height=this.options.tileSize+"px",t.galleryimg="no"},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var t=this._unusedTiles.pop();return this._resetTile(t),t}return this._createTile()},_resetTile:function(){},_createTile:function(){var t=this._tileImg.cloneNode(!1);return t.onselectstart=t.onmousemove=n.Util.falseFn,t},_loadTile:function(t,e){t._layer=this,t.onload=this._tileOnLoad,t.onerror=this._tileOnError,t.src=this.getTileUrl(e)},_tileLoaded:function(){this._tilesToLoad--,this._tilesToLoad||this.fire("load")},_tileOnLoad:function(){var t=this._layer;this.src!==n.Util.emptyImageUrl&&(n.DomUtil.addClass(this,"leaflet-tile-loaded"),t.fire("tileload",{tile:this,url:this.src})),t._tileLoaded()},_tileOnError:function(){var t=this._layer;t.fire("tileerror",{tile:this,url:this.src});var e=t.options.errorTileUrl;e&&(this.src=e),t._tileLoaded()}}),n.tileLayer=function(t,e){return new n.TileLayer(t,e)},n.TileLayer.WMS=n.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(t,e){this._url=t;var i=n.extend({},this.defaultWmsParams);i.width=i.height=e.detectRetina&&n.Browser.retina?2*this.options.tileSize:this.options.tileSize;for(var s in e)this.options.hasOwnProperty(s)||(i[s]=e[s]);this.wmsParams=i,n.setOptions(this,e)},onAdd:function(t){var e=parseFloat(this.wmsParams.version)>=1.3?"crs":"srs";this.wmsParams[e]=t.options.crs.code,n.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t,e){this._adjustTilePoint(t);var i=this._map,s=i.options.crs,o=this.options.tileSize,a=t.multiplyBy(o),r=a.add(new n.Point(o,o)),l=s.project(i.unproject(a,e)),h=s.project(i.unproject(r,e)),c=[l.x,h.y,h.x,l.y].join(","),u=n.Util.template(this._url,{s:this._getSubdomain(t)});return u+n.Util.getParamString(this.wmsParams,u)+"&bbox="+c},setParams:function(t,e){return n.extend(this.wmsParams,t),e||this.redraw(),this}}),n.tileLayer.wms=function(t,e){return new n.TileLayer.WMS(t,e)},n.TileLayer.Canvas=n.TileLayer.extend({options:{async:!1},initialize:function(t){n.setOptions(this,t)},redraw:function(){var t=this._tiles;for(var e in t)t.hasOwnProperty(e)&&this._redrawTile(t[e])},_redrawTile:function(t){this.drawTile(t,t._tilePoint,this._map._zoom)},_createTileProto:function(){var t=this._canvasProto=n.DomUtil.create("canvas","leaflet-tile");t.width=t.height=this.options.tileSize},_createTile:function(){var t=this._canvasProto.cloneNode(!1);return t.onselectstart=t.onmousemove=n.Util.falseFn,t},_loadTile:function(t,e){t._layer=this,t._tilePoint=e,this._redrawTile(t),this.options.async||this.tileDrawn(t)},drawTile:function(){},tileDrawn:function(t){this._tileOnLoad.call(t)}}),n.tileLayer.canvas=function(t){return new n.TileLayer.Canvas(t)},n.ImageOverlay=n.Class.extend({includes:n.Mixin.Events,options:{opacity:1},initialize:function(t,e,i){this._url=t,this._bounds=n.latLngBounds(e),n.setOptions(this,i)},onAdd:function(t){this._map=t,this._image||this._initImage(),t._panes.overlayPane.appendChild(this._image),t.on("viewreset",this._reset,this),t.options.zoomAnimation&&n.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._image),t.off("viewreset",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var t=this._map._panes.overlayPane;return this._image&&t.insertBefore(this._image,t.firstChild),this},_initImage:function(){this._image=n.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&n.Browser.any3d?n.DomUtil.addClass(this._image,"leaflet-zoom-animated"):n.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),n.extend(this._image,{galleryimg:"no",onselectstart:n.Util.falseFn,onmousemove:n.Util.falseFn,onload:n.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(t){var e=this._map,i=this._image,s=e.getZoomScale(t.zoom),o=this._bounds.getNorthWest(),a=this._bounds.getSouthEast(),r=e._latLngToNewLayerPoint(o,t.zoom,t.center),l=e._latLngToNewLayerPoint(a,t.zoom,t.center)._subtract(r),h=r._add(l._multiplyBy(.5*(1-1/s)));i.style[n.DomUtil.TRANSFORM]=n.DomUtil.getTranslateString(h)+" scale("+s+") "},_reset:function(){var t=this._image,e=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),i=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(e);n.DomUtil.setPosition(t,e),t.style.width=i.x+"px",t.style.height=i.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){n.DomUtil.setOpacity(this._image,this.options.opacity)}}),n.imageOverlay=function(t,e,i){return new n.ImageOverlay(t,e,i)
},n.Icon=n.Class.extend({options:{className:""},initialize:function(t){n.setOptions(this,t)},createIcon:function(){return this._createIcon("icon")},createShadow:function(){return this._createIcon("shadow")},_createIcon:function(t){var e=this._getIconUrl(t);if(!e){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(e);return this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var i,s=this.options,o=n.point(s[e+"Size"]);i="shadow"===e?n.point(s.shadowAnchor||s.iconAnchor):n.point(s.iconAnchor),!i&&o&&(i=o.divideBy(2,!0)),t.className="leaflet-marker-"+e+" "+s.className,i&&(t.style.marginLeft=-i.x+"px",t.style.marginTop=-i.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t){var i;return n.Browser.ie6?(i=e.createElement("div"),i.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+t+'")'):(i=e.createElement("img"),i.src=t),i},_getIconUrl:function(t){return n.Browser.retina&&this.options[t+"RetinaUrl"]?this.options[t+"RetinaUrl"]:this.options[t+"Url"]}}),n.icon=function(t){return new n.Icon(t)},n.Icon.Default=n.Icon.extend({options:{iconSize:new n.Point(25,41),iconAnchor:new n.Point(12,41),popupAnchor:new n.Point(1,-34),shadowSize:new n.Point(41,41)},_getIconUrl:function(t){var e=t+"Url";if(this.options[e])return this.options[e];n.Browser.retina&&"icon"===t&&(t+="@2x");var i=n.Icon.Default.imagePath;if(!i)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return i+"/marker-"+t+".png"}}),n.Icon.Default.imagePath=function(){var t,i,n,s,o=e.getElementsByTagName("script"),a=/\/?leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(t=0,i=o.length;i>t;t++)if(n=o[t].src,s=n.match(a))return n.split(a)[0]+"/images"}(),n.Marker=n.Class.extend({includes:n.Mixin.Events,options:{icon:new n.Icon.Default,title:"",clickable:!0,draggable:!1,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(t,e){n.setOptions(this,e),this._latlng=n.latLng(t)},onAdd:function(t){this._map=t,t.on("viewreset",this.update,this),this._initIcon(),this.update(),t.options.zoomAnimation&&t.options.markerZoomAnimation&&t.on("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this._removeIcon(),this.fire("remove"),t.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=n.latLng(t),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update(),this},setIcon:function(t){return this._map&&this._removeIcon(),this.options.icon=t,this._map&&(this._initIcon(),this.update()),this},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e=this._map,i=e.options.zoomAnimation&&e.options.markerZoomAnimation,s=i?"leaflet-zoom-animated":"leaflet-zoom-hide",o=!1;this._icon||(this._icon=t.icon.createIcon(),t.title&&(this._icon.title=t.title),this._initInteraction(),o=this.options.opacity<1,n.DomUtil.addClass(this._icon,s),t.riseOnHover&&n.DomEvent.on(this._icon,"mouseover",this._bringToFront,this).on(this._icon,"mouseout",this._resetZIndex,this)),this._shadow||(this._shadow=t.icon.createShadow(),this._shadow&&(n.DomUtil.addClass(this._shadow,s),o=this.options.opacity<1)),o&&this._updateOpacity();var a=this._map._panes;a.markerPane.appendChild(this._icon),this._shadow&&a.shadowPane.appendChild(this._shadow)},_removeIcon:function(){var t=this._map._panes;this.options.riseOnHover&&n.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),t.markerPane.removeChild(this._icon),this._shadow&&t.shadowPane.removeChild(this._shadow),this._icon=this._shadow=null},_setPos:function(t){n.DomUtil.setPosition(this._icon,t),this._shadow&&n.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPos(e)},_initInteraction:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu"];n.DomUtil.addClass(t,"leaflet-clickable"),n.DomEvent.on(t,"click",this._onMouseClick,this);for(var i=0;i<e.length;i++)n.DomEvent.on(t,e[i],this._fireMouseEvent,this);n.Handler.MarkerDrag&&(this.dragging=new n.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(t){var e=this.dragging&&this.dragging.moved();(this.hasEventListeners(t.type)||e)&&n.DomEvent.stopPropagation(t),e||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(t.type,{originalEvent:t})},_fireMouseEvent:function(t){this.fire(t.type,{originalEvent:t}),"contextmenu"===t.type&&this.hasEventListeners(t.type)&&n.DomEvent.preventDefault(t),"mousedown"!==t.type&&n.DomEvent.stopPropagation(t)},setOpacity:function(t){this.options.opacity=t,this._map&&this._updateOpacity()},_updateOpacity:function(){n.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&n.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),n.marker=function(t,e){return new n.Marker(t,e)},n.DivIcon=n.Icon.extend({options:{iconSize:new n.Point(12,12),className:"leaflet-div-icon"},createIcon:function(){var t=e.createElement("div"),i=this.options;return i.html&&(t.innerHTML=i.html),i.bgPos&&(t.style.backgroundPosition=-i.bgPos.x+"px "+-i.bgPos.y+"px"),this._setIconStyles(t,"icon"),t},createShadow:function(){return null}}),n.divIcon=function(t){return new n.DivIcon(t)},n.Map.mergeOptions({closePopupOnClick:!0}),n.Popup=n.Class.extend({includes:n.Mixin.Events,options:{minWidth:50,maxWidth:300,maxHeight:null,autoPan:!0,closeButton:!0,offset:new n.Point(0,6),autoPanPadding:new n.Point(5,5),className:"",zoomAnimation:!0},initialize:function(t,e){n.setOptions(this,t),this._source=e,this._animated=n.Browser.any3d&&this.options.zoomAnimation},onAdd:function(t){this._map=t,this._container||this._initLayout(),this._updateContent();var e=t.options.fadeAnimation;e&&n.DomUtil.setOpacity(this._container,0),t._panes.popupPane.appendChild(this._container),t.on("viewreset",this._updatePosition,this),this._animated&&t.on("zoomanim",this._zoomAnimation,this),t.options.closePopupOnClick&&t.on("preclick",this._close,this),this._update(),e&&n.DomUtil.setOpacity(this._container,1)},addTo:function(t){return t.addLayer(this),this},openOn:function(t){return t.openPopup(this),this},onRemove:function(t){t._panes.popupPane.removeChild(this._container),n.Util.falseFn(this._container.offsetWidth),t.off({viewreset:this._updatePosition,preclick:this._close,zoomanim:this._zoomAnimation},this),t.options.fadeAnimation&&n.DomUtil.setOpacity(this._container,0),this._map=null},setLatLng:function(t){return this._latlng=n.latLng(t),this._update(),this},setContent:function(t){return this._content=t,this._update(),this},_close:function(){var t=this._map;t&&(t._popup=null,t.removeLayer(this).fire("popupclose",{popup:this}))},_initLayout:function(){var t,e="leaflet-popup",i=e+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),s=this._container=n.DomUtil.create("div",i);this.options.closeButton&&(t=this._closeButton=n.DomUtil.create("a",e+"-close-button",s),t.href="#close",t.innerHTML="&#215;",n.DomEvent.on(t,"click",this._onCloseButtonClick,this));var o=this._wrapper=n.DomUtil.create("div",e+"-content-wrapper",s);n.DomEvent.disableClickPropagation(o),this._contentNode=n.DomUtil.create("div",e+"-content",o),n.DomEvent.on(this._contentNode,"mousewheel",n.DomEvent.stopPropagation),this._tipContainer=n.DomUtil.create("div",e+"-tip-container",s),this._tip=n.DomUtil.create("div",e+"-tip",this._tipContainer)},_update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var s=t.offsetHeight,o=this.options.maxHeight,a="leaflet-popup-scrolled";o&&s>o?(e.height=o+"px",n.DomUtil.addClass(t,a)):n.DomUtil.removeClass(t,a),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=this._animated,i=this.options.offset;e&&n.DomUtil.setPosition(this._container,t),this._containerBottom=-i.y-(e?0:t.y),this._containerLeft=-Math.round(this._containerWidth/2)+i.x+(e?0:t.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);n.DomUtil.setPosition(this._container,e)},_adjustPan:function(){if(this.options.autoPan){var t=this._map,e=this._container.offsetHeight,i=this._containerWidth,s=new n.Point(this._containerLeft,-e-this._containerBottom);this._animated&&s._add(n.DomUtil.getPosition(this._container));var o=t.layerPointToContainerPoint(s),a=this.options.autoPanPadding,r=t.getSize(),l=0,h=0;o.x<0&&(l=o.x-a.x),o.x+i>r.x&&(l=o.x+i-r.x+a.x),o.y<0&&(h=o.y-a.y),o.y+e>r.y&&(h=o.y+e-r.y+a.y),(l||h)&&t.panBy(new n.Point(l,h))}},_onCloseButtonClick:function(t){this._close(),n.DomEvent.stop(t)}}),n.popup=function(t,e){return new n.Popup(t,e)},n.Marker.include({openPopup:function(){return this._popup&&this._map&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},bindPopup:function(t,e){var i=n.point(this.options.icon.options.popupAnchor)||new n.Point(0,0);return i=i.add(n.Popup.prototype.options.offset),e&&e.offset&&(i=i.add(e.offset)),e=n.extend({offset:i},e),this._popup||this.on("click",this.openPopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popup=new n.Popup(e,this).setContent(t),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.openPopup).off("remove",this.closePopup).off("move",this._movePopup)),this},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),n.Map.include({openPopup:function(t){return this.closePopup(),this._popup=t,this.addLayer(t).fire("popupopen",{popup:this._popup})},closePopup:function(){return this._popup&&this._popup._close(),this}}),n.LayerGroup=n.Class.extend({initialize:function(t){this._layers={};var e,i;if(t)for(e=0,i=t.length;i>e;e++)this.addLayer(t[e])},addLayer:function(t){var e=n.stamp(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=n.stamp(t);return delete this._layers[e],this._map&&this._map.removeLayer(t),this},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)this._layers.hasOwnProperty(e)&&(i=this._layers[e],i[t]&&i[t].apply(i,n));return this},onAdd:function(t){this._map=t,this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t),this._map=null},addTo:function(t){return t.addLayer(this),this},eachLayer:function(t,e){for(var i in this._layers)this._layers.hasOwnProperty(i)&&t.call(e,this._layers[i])},setZIndex:function(t){return this.invoke("setZIndex",t)}}),n.layerGroup=function(t){return new n.LayerGroup(t)},n.FeatureGroup=n.LayerGroup.extend({includes:n.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu"},addLayer:function(t){return this._layers[n.stamp(t)]?this:(t.on(n.FeatureGroup.EVENTS,this._propagateEvent,this),n.LayerGroup.prototype.addLayer.call(this,t),this._popupContent&&t.bindPopup&&t.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return t.off(n.FeatureGroup.EVENTS,this._propagateEvent,this),n.LayerGroup.prototype.removeLayer.call(this,t),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:t})},bindPopup:function(t,e){return this._popupContent=t,this._popupOptions=e,this.invoke("bindPopup",t,e)},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new n.LatLngBounds;return this.eachLayer(function(e){t.extend(e instanceof n.Marker?e.getLatLng():e.getBounds())}),t},_propagateEvent:function(t){t.layer=t.target,t.target=this,this.fire(t.type,t)}}),n.featureGroup=function(t){return new n.FeatureGroup(t)},n.Path=n.Class.extend({includes:[n.Mixin.Events],statics:{CLIP_PADDING:n.Browser.mobile?Math.max(0,Math.min(.5,(1280/Math.max(t.innerWidth,t.innerHeight)-1)/2)):.5},options:{stroke:!0,color:"#0033ff",dashArray:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(t){n.setOptions(this,t)},onAdd:function(t){this._map=t,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),t.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){t._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,n.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),t.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(t){return n.setOptions(this,t),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),n.Map.include({_updatePathViewport:function(){var t=n.Path.CLIP_PADDING,e=this.getSize(),i=n.DomUtil.getPosition(this._mapPane),s=i.multiplyBy(-1)._subtract(e.multiplyBy(t)._round()),o=s.add(e.multiplyBy(1+2*t)._round());this._pathViewport=new n.Bounds(s,o)}}),n.Path.SVG_NS="http://www.w3.org/2000/svg",n.Browser.svg=!(!e.createElementNS||!e.createElementNS(n.Path.SVG_NS,"svg").createSVGRect),n.Path=n.Path.extend({statics:{SVG:n.Browser.svg},bringToFront:function(){var t=this._map._pathRoot,e=this._container;return e&&t.lastChild!==e&&t.appendChild(e),this},bringToBack:function(){var t=this._map._pathRoot,e=this._container,i=t.firstChild;return e&&i!==e&&t.insertBefore(e,i),this},getPathString:function(){},_createElement:function(t){return e.createElementNS(n.Path.SVG_NS,t)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray")):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var t=this.getPathString();t||(t="M0 0"),this._path.setAttribute("d",t)},_initEvents:function(){if(this.options.clickable){(n.Browser.svg||!n.Browser.vml)&&this._path.setAttribute("class","leaflet-clickable"),n.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var t=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],e=0;e<t.length;e++)n.DomEvent.on(this._container,t[e],this._fireMouseEvent,this)}},_onMouseClick:function(t){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(t)},_fireMouseEvent:function(t){if(this.hasEventListeners(t.type)){var e=this._map,i=e.mouseEventToContainerPoint(t),s=e.containerPointToLayerPoint(i),o=e.layerPointToLatLng(s);this.fire(t.type,{latlng:o,layerPoint:s,containerPoint:i,originalEvent:t}),"contextmenu"===t.type&&n.DomEvent.preventDefault(t),"mousemove"!==t.type&&n.DomEvent.stopPropagation(t)}}}),n.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=n.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&n.Browser.any3d?(this._pathRoot.setAttribute("class"," leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):this._pathRoot.setAttribute("class"," leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(t){var e=this.getZoomScale(t.zoom),i=this._getCenterOffset(t.center)._multiplyBy(-e)._add(this._pathViewport.min);this._pathRoot.style[n.DomUtil.TRANSFORM]=n.DomUtil.getTranslateString(i)+" scale("+e+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,i=t.max,s=i.x-e.x,o=i.y-e.y,a=this._pathRoot,r=this._panes.overlayPane;n.Browser.mobileWebkit&&r.removeChild(a),n.DomUtil.setPosition(a,e),a.setAttribute("width",s),a.setAttribute("height",o),a.setAttribute("viewBox",[e.x,e.y,s,o].join(" ")),n.Browser.mobileWebkit&&r.appendChild(a)}}}),n.Path.include({bindPopup:function(t,e){return(!this._popup||e)&&(this._popup=new n.Popup(e,this)),this._popup.setContent(t),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(t){return this._popup&&(t=t||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:t})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(t){this._popup.setLatLng(t.latlng),this._map.openPopup(this._popup)}}),n.Browser.vml=!n.Browser.svg&&function(){try{var t=e.createElement("div");t.innerHTML='<v:shape adj="1"/>';var i=t.firstChild;return i.style.behavior="url(#default#VML)",i&&"object"==typeof i.adj}catch(n){return!1}}(),n.Path=n.Browser.svg||!n.Browser.vml?n.Path:n.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return e.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return e.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var t=this._container=this._createElement("shape");n.DomUtil.addClass(t,"leaflet-vml-shape"),this.options.clickable&&n.DomUtil.addClass(t,"leaflet-clickable"),t.coordsize="1 1",this._path=this._createElement("path"),t.appendChild(this._path),this._map._pathRoot.appendChild(t)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var t=this._stroke,e=this._fill,i=this.options,n=this._container;n.stroked=i.stroke,n.filled=i.fill,i.stroke?(t||(t=this._stroke=this._createElement("stroke"),t.endcap="round",n.appendChild(t)),t.weight=i.weight+"px",t.color=i.color,t.opacity=i.opacity,t.dashStyle=i.dashArray?i.dashArray instanceof Array?i.dashArray.join(" "):i.dashArray.replace(/ *, */g," "):""):t&&(n.removeChild(t),this._stroke=null),i.fill?(e||(e=this._fill=this._createElement("fill"),n.appendChild(e)),e.color=i.fillColor||i.color,e.opacity=i.fillOpacity):e&&(n.removeChild(e),this._fill=null)},_updatePath:function(){var t=this._container.style;t.display="none",this._path.v=this.getPathString()+" ",t.display=""}}),n.Map.include(n.Browser.svg||!n.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var t=this._pathRoot=e.createElement("div");t.className="leaflet-vml-container",this._panes.overlayPane.appendChild(t),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),n.Browser.canvas=function(){return!!e.createElement("canvas").getContext}(),n.Path=n.Path.SVG&&!t.L_PREFER_CANVAS||!n.Browser.canvas?n.Path:n.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(t){return n.setOptions(this,t),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(t){t.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&this._map.off("click",this._onClick,this),this._requestUpdate(),this._map=null},_requestUpdate:function(){this._map&&!n.Path._updateRequest&&(n.Path._updateRequest=n.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){n.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var t=this.options;t.stroke&&(this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color),t.fill&&(this._ctx.fillStyle=t.fillColor||t.color)},_drawPath:function(){var t,e,i,s,o,a;for(this._ctx.beginPath(),t=0,i=this._parts.length;i>t;t++){for(e=0,s=this._parts[t].length;s>e;e++)o=this._parts[t][e],a=(0===e?"move":"line")+"To",this._ctx[a](o.x,o.y);this instanceof n.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var t=this._ctx,e=this.options;this._drawPath(),t.save(),this._updateStyle(),e.fill&&(t.globalAlpha=e.fillOpacity,t.fill()),e.stroke&&(t.globalAlpha=e.opacity,t.stroke()),t.restore()}},_initEvents:function(){this.options.clickable&&this._map.on("click",this._onClick,this)},_onClick:function(t){this._containsPoint(t.layerPoint)&&this.fire("click",{latlng:t.latlng,layerPoint:t.layerPoint,containerPoint:t.containerPoint,originalEvent:t})}}),n.Map.include(n.Path.SVG&&!t.L_PREFER_CANVAS||!n.Browser.canvas?{}:{_initPathRoot:function(){var t,i=this._pathRoot;i||(i=this._pathRoot=e.createElement("canvas"),i.style.position="absolute",t=this._canvasCtx=i.getContext("2d"),t.lineCap="round",t.lineJoin="round",this._panes.overlayPane.appendChild(i),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,i=t.max.subtract(e),s=this._pathRoot;n.DomUtil.setPosition(s,e),s.width=i.x,s.height=i.y,s.getContext("2d").translate(-e.x,-e.y)}}}),n.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=this._reducePoints(t,i),t=this._simplifyDP(t,i)},pointToSegmentDistance:function(t,e,i){return Math.sqrt(this._sqClosestPointOnSegment(t,e,i,!0))},closestPointOnSegment:function(t,e,i){return this._sqClosestPointOnSegment(t,e,i)},_simplifyDP:function(t,e){var n=t.length,s=typeof Uint8Array!=i+""?Uint8Array:Array,o=new s(n);o[0]=o[n-1]=1,this._simplifyDPStep(t,o,e,0,n-1);var a,r=[];for(a=0;n>a;a++)o[a]&&r.push(t[a]);return r},_simplifyDPStep:function(t,e,i,n,s){var o,a,r,l=0;for(a=n+1;s-1>=a;a++)r=this._sqClosestPointOnSegment(t[a],t[n],t[s],!0),r>l&&(o=a,l=r);l>i&&(e[o]=1,this._simplifyDPStep(t,e,i,n,o),this._simplifyDPStep(t,e,i,o,s))},_reducePoints:function(t,e){for(var i=[t[0]],n=1,s=0,o=t.length;o>n;n++)this._sqDist(t[n],t[s])>e&&(i.push(t[n]),s=n);return o-1>s&&i.push(t[o-1]),i},clipSegment:function(t,e,i,n){var s,o,a,r=n?this._lastCode:this._getBitCode(t,i),l=this._getBitCode(e,i);for(this._lastCode=l;;){if(!(r|l))return[t,e];if(r&l)return!1;s=r||l,o=this._getEdgeIntersection(t,e,s,i),a=this._getBitCode(o,i),s===r?(t=o,r=a):(e=o,l=a)}},_getEdgeIntersection:function(t,e,i,s){var o=e.x-t.x,a=e.y-t.y,r=s.min,l=s.max;return 8&i?new n.Point(t.x+o*(l.y-t.y)/a,l.y):4&i?new n.Point(t.x+o*(r.y-t.y)/a,r.y):2&i?new n.Point(l.x,t.y+a*(l.x-t.x)/o):1&i?new n.Point(r.x,t.y+a*(r.x-t.x)/o):void 0},_getBitCode:function(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n},_sqClosestPointOnSegment:function(t,e,i,s){var o,a=e.x,r=e.y,l=i.x-a,h=i.y-r,c=l*l+h*h;return c>0&&(o=((t.x-a)*l+(t.y-r)*h)/c,o>1?(a=i.x,r=i.y):o>0&&(a+=l*o,r+=h*o)),l=t.x-a,h=t.y-r,s?l*l+h*h:new n.Point(a,r)}},n.Polyline=n.Path.extend({initialize:function(t,e){n.Path.prototype.initialize.call(this,e),this._latlngs=this._convertLatLngs(t)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var t=0,e=this._latlngs.length;e>t;t++)this._originalPoints[t]=this._map.latLngToLayerPoint(this._latlngs[t])},getPathString:function(){for(var t=0,e=this._parts.length,i="";e>t;t++)i+=this._getPathPartStr(this._parts[t]);return i},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._latlngs=this._convertLatLngs(t),this.redraw()},addLatLng:function(t){return this._latlngs.push(n.latLng(t)),this.redraw()},spliceLatLngs:function(){var t=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs),this.redraw(),t},closestLayerPoint:function(t){for(var e,i,s=1/0,o=this._parts,a=null,r=0,l=o.length;l>r;r++)for(var h=o[r],c=1,u=h.length;u>c;c++){e=h[c-1],i=h[c];var d=n.LineUtil._sqClosestPointOnSegment(t,e,i,!0);s>d&&(s=d,a=n.LineUtil._sqClosestPointOnSegment(t,e,i))}return a&&(a.distance=Math.sqrt(s)),a},getBounds:function(){var t,e,i=new n.LatLngBounds,s=this.getLatLngs();for(t=0,e=s.length;e>t;t++)i.extend(s[t]);return i},_convertLatLngs:function(t){var e,i;for(e=0,i=t.length;i>e;e++){if(n.Util.isArray(t[e])&&"number"!=typeof t[e][0])return;t[e]=n.latLng(t[e])}return t},_initEvents:function(){n.Path.prototype._initEvents.call(this)},_getPathPartStr:function(t){for(var e,i=n.Path.VML,s=0,o=t.length,a="";o>s;s++)e=t[s],i&&e._round(),a+=(s?"L":"M")+e.x+" "+e.y;return a},_clipPoints:function(){var t,e,i,s=this._originalPoints,o=s.length;if(this.options.noClip)return this._parts=[s],void 0;this._parts=[];var a=this._parts,r=this._map._pathViewport,l=n.LineUtil;for(t=0,e=0;o-1>t;t++)i=l.clipSegment(s[t],s[t+1],r,t),i&&(a[e]=a[e]||[],a[e].push(i[0]),(i[1]!==s[t+1]||t===o-2)&&(a[e].push(i[1]),e++))},_simplifyPoints:function(){for(var t=this._parts,e=n.LineUtil,i=0,s=t.length;s>i;i++)t[i]=e.simplify(t[i],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),n.Path.prototype._updatePath.call(this))}}),n.polyline=function(t,e){return new n.Polyline(t,e)},n.PolyUtil={},n.PolyUtil.clipPolygon=function(t,e){var i,s,o,a,r,l,h,c,u,d=[1,4,2,8],p=n.LineUtil;for(s=0,h=t.length;h>s;s++)t[s]._code=p._getBitCode(t[s],e);for(a=0;4>a;a++){for(c=d[a],i=[],s=0,h=t.length,o=h-1;h>s;o=s++)r=t[s],l=t[o],r._code&c?l._code&c||(u=p._getEdgeIntersection(l,r,c,e),u._code=p._getBitCode(u,e),i.push(u)):(l._code&c&&(u=p._getEdgeIntersection(l,r,c,e),u._code=p._getBitCode(u,e),i.push(u)),i.push(r));t=i}return t},n.Polygon=n.Polyline.extend({options:{fill:!0},initialize:function(t,e){n.Polyline.prototype.initialize.call(this,t,e),t&&n.Util.isArray(t[0])&&"number"!=typeof t[0][0]&&(this._latlngs=this._convertLatLngs(t[0]),this._holes=t.slice(1))},projectLatlngs:function(){if(n.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var t,e,i,s;for(t=0,i=this._holes.length;i>t;t++)for(this._holePoints[t]=[],e=0,s=this._holes[t].length;s>e;e++)this._holePoints[t][e]=this._map.latLngToLayerPoint(this._holes[t][e])}},_clipPoints:function(){var t=this._originalPoints,e=[];if(this._parts=[t].concat(this._holePoints),!this.options.noClip){for(var i=0,s=this._parts.length;s>i;i++){var o=n.PolyUtil.clipPolygon(this._parts[i],this._map._pathViewport);o.length&&e.push(o)}this._parts=e}},_getPathPartStr:function(t){var e=n.Polyline.prototype._getPathPartStr.call(this,t);return e+(n.Browser.svg?"z":"x")}}),n.polygon=function(t,e){return new n.Polygon(t,e)},function(){function t(t){return n.FeatureGroup.extend({initialize:function(t,e){this._layers={},this._options=e,this.setLatLngs(t)},setLatLngs:function(e){var i=0,n=e.length;for(this.eachLayer(function(t){n>i?t.setLatLngs(e[i++]):this.removeLayer(t)},this);n>i;)this.addLayer(new t(e[i++],this._options));return this}})}n.MultiPolyline=t(n.Polyline),n.MultiPolygon=t(n.Polygon),n.multiPolyline=function(t,e){return new n.MultiPolyline(t,e)},n.multiPolygon=function(t,e){return new n.MultiPolygon(t,e)}}(),n.Rectangle=n.Polygon.extend({initialize:function(t,e){n.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=n.latLngBounds(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),n.rectangle=function(t,e){return new n.Rectangle(t,e)},n.Circle=n.Path.extend({initialize:function(t,e,i){n.Path.prototype.initialize.call(this,i),this._latlng=n.latLng(t),this._mRadius=e},options:{fill:!0},setLatLng:function(t){return this._latlng=n.latLng(t),this.redraw()},setRadius:function(t){return this._mRadius=t,this.redraw()},projectLatlngs:function(){var t=this._getLngRadius(),e=new n.LatLng(this._latlng.lat,this._latlng.lng-t),i=this._map.latLngToLayerPoint(e);this._point=this._map.latLngToLayerPoint(this._latlng),this._radius=Math.max(Math.round(this._point.x-i.x),1)},getBounds:function(){var t=this._getLngRadius(),e=360*(this._mRadius/40075017),i=this._latlng,s=new n.LatLng(i.lat-e,i.lng-t),o=new n.LatLng(i.lat+e,i.lng+t);return new n.LatLngBounds(s,o)},getLatLng:function(){return this._latlng},getPathString:function(){var t=this._point,e=this._radius;return this._checkIfEmpty()?"":n.Browser.svg?"M"+t.x+","+(t.y-e)+"A"+e+","+e+",0,1,1,"+(t.x-.1)+","+(t.y-e)+" z":(t._round(),e=Math.round(e),"AL "+t.x+","+t.y+" "+e+","+e+" 0,"+23592600)},getRadius:function(){return this._mRadius},_getLatRadius:function(){return 360*(this._mRadius/40075017)},_getLngRadius:function(){return this._getLatRadius()/Math.cos(n.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var t=this._map._pathViewport,e=this._radius,i=this._point;return i.x-e>t.max.x||i.y-e>t.max.y||i.x+e<t.min.x||i.y+e<t.min.y}}),n.circle=function(t,e,i){return new n.Circle(t,e,i)},n.CircleMarker=n.Circle.extend({options:{radius:10,weight:2},initialize:function(t,e){n.Circle.prototype.initialize.call(this,t,null,e),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){n.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setRadius:function(t){return this._radius=t,this.redraw()}}),n.circleMarker=function(t,e){return new n.CircleMarker(t,e)},n.Polyline.include(n.Path.CANVAS?{_containsPoint:function(t,e){var i,s,o,a,r,l,h,c=this.options.weight/2;for(n.Browser.touch&&(c+=10),i=0,a=this._parts.length;a>i;i++)for(h=this._parts[i],s=0,r=h.length,o=r-1;r>s;o=s++)if((e||0!==s)&&(l=n.LineUtil.pointToSegmentDistance(t,h[o],h[s]),c>=l))return!0;return!1}}:{}),n.Polygon.include(n.Path.CANVAS?{_containsPoint:function(t){var e,i,s,o,a,r,l,h,c=!1;if(n.Polyline.prototype._containsPoint.call(this,t,!0))return!0;for(o=0,l=this._parts.length;l>o;o++)for(e=this._parts[o],a=0,h=e.length,r=h-1;h>a;r=a++)i=e[a],s=e[r],i.y>t.y!=s.y>t.y&&t.x<(s.x-i.x)*(t.y-i.y)/(s.y-i.y)+i.x&&(c=!c);return c}}:{}),n.Circle.include(n.Path.CANVAS?{_drawPath:function(){var t=this._point;this._ctx.beginPath(),this._ctx.arc(t.x,t.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(t){var e=this._point,i=this.options.stroke?this.options.weight/2:0;return t.distanceTo(e)<=this._radius+i}}:{}),n.GeoJSON=n.FeatureGroup.extend({initialize:function(t,e){n.setOptions(this,e),this._layers={},t&&this.addData(t)
},addData:function(t){var e,i,s=n.Util.isArray(t)?t:t.features;if(s){for(e=0,i=s.length;i>e;e++)(s[e].geometries||s[e].geometry)&&this.addData(s[e]);return this}var o=this.options;if(!o.filter||o.filter(t)){var a=n.GeoJSON.geometryToLayer(t,o.pointToLayer);return a.feature=t,a.defaultOptions=a.options,this.resetStyle(a),o.onEachFeature&&o.onEachFeature(t,a),this.addLayer(a)}},resetStyle:function(t){var e=this.options.style;e&&(n.Util.extend(t.options,t.defaultOptions),this._setLayerStyle(t,e))},setStyle:function(t){this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),n.extend(n.GeoJSON,{geometryToLayer:function(t,e){var i,s,o,a,r,l="Feature"===t.type?t.geometry:t,h=l.coordinates,c=[];switch(l.type){case"Point":return i=this.coordsToLatLng(h),e?e(t,i):new n.Marker(i);case"MultiPoint":for(o=0,a=h.length;a>o;o++)i=this.coordsToLatLng(h[o]),r=e?e(t,i):new n.Marker(i),c.push(r);return new n.FeatureGroup(c);case"LineString":return s=this.coordsToLatLngs(h),new n.Polyline(s);case"Polygon":return s=this.coordsToLatLngs(h,1),new n.Polygon(s);case"MultiLineString":return s=this.coordsToLatLngs(h,1),new n.MultiPolyline(s);case"MultiPolygon":return s=this.coordsToLatLngs(h,2),new n.MultiPolygon(s);case"GeometryCollection":for(o=0,a=l.geometries.length;a>o;o++)r=this.geometryToLayer({geometry:l.geometries[o],type:"Feature",properties:t.properties},e),c.push(r);return new n.FeatureGroup(c);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t,e){var i=parseFloat(t[e?0:1]),s=parseFloat(t[e?1:0]);return new n.LatLng(i,s)},coordsToLatLngs:function(t,e,i){var n,s,o,a=[];for(s=0,o=t.length;o>s;s++)n=e?this.coordsToLatLngs(t[s],e-1,i):this.coordsToLatLng(t[s],i),a.push(n);return a}}),n.geoJson=function(t,e){return new n.GeoJSON(t,e)},n.DomEvent={addListener:function(t,e,i,s){var o,a,r,l=n.stamp(i),h="_leaflet_"+e+l;return t[h]?this:(o=function(e){return i.call(s||t,e||n.DomEvent._getEvent())},n.Browser.msTouch&&0===e.indexOf("touch")?this.addMsTouchListener(t,e,o,l):(n.Browser.touch&&"dblclick"===e&&this.addDoubleTapListener&&this.addDoubleTapListener(t,o,l),"addEventListener"in t?"mousewheel"===e?(t.addEventListener("DOMMouseScroll",o,!1),t.addEventListener(e,o,!1)):"mouseenter"===e||"mouseleave"===e?(a=o,r="mouseenter"===e?"mouseover":"mouseout",o=function(e){return n.DomEvent._checkMouse(t,e)?a(e):void 0},t.addEventListener(r,o,!1)):t.addEventListener(e,o,!1):"attachEvent"in t&&t.attachEvent("on"+e,o),t[h]=o,this))},removeListener:function(t,e,i){var s=n.stamp(i),o="_leaflet_"+e+s,a=t[o];if(a)return n.Browser.msTouch&&0===e.indexOf("touch")?this.removeMsTouchListener(t,e,s):n.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,s):"removeEventListener"in t?"mousewheel"===e?(t.removeEventListener("DOMMouseScroll",a,!1),t.removeEventListener(e,a,!1)):"mouseenter"===e||"mouseleave"===e?t.removeEventListener("mouseenter"===e?"mouseover":"mouseout",a,!1):t.removeEventListener(e,a,!1):"detachEvent"in t&&t.detachEvent("on"+e,a),t[o]=null,this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this},disableClickPropagation:function(t){for(var e=n.DomEvent.stopPropagation,i=n.Draggable.START.length-1;i>=0;i--)n.DomEvent.addListener(t,n.Draggable.START[i],e);return n.DomEvent.addListener(t,"click",e).addListener(t,"dblclick",e)},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return n.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,i){var s=e.body,o=e.documentElement,a=t.pageX?t.pageX:t.clientX+s.scrollLeft+o.scrollLeft,r=t.pageY?t.pageY:t.clientY+s.scrollTop+o.scrollTop,l=new n.Point(a,r);return i?l._subtract(n.DomUtil.getViewportOffset(i)):l},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e},_checkMouse:function(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(n){return!1}return i!==t},_getEvent:function(){var e=t.event;if(!e)for(var i=arguments.callee.caller;i&&(e=i.arguments[0],!e||t.Event!==e.constructor);)i=i.caller;return e}},n.DomEvent.on=n.DomEvent.addListener,n.DomEvent.off=n.DomEvent.removeListener,n.Draggable=n.Class.extend({includes:n.Mixin.Events,statics:{START:n.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",MSPointerDown:"touchmove"},TAP_TOLERANCE:15},initialize:function(t,e,i){this._element=t,this._dragStartTarget=e||t,this._longPress=i&&!n.Browser.msTouch},enable:function(){if(!this._enabled){for(var t=n.Draggable.START.length-1;t>=0;t--)n.DomEvent.on(this._dragStartTarget,n.Draggable.START[t],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var t=n.Draggable.START.length-1;t>=0;t--)n.DomEvent.off(this._dragStartTarget,n.Draggable.START[t],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(t){if(!(!n.Browser.touch&&t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(n.DomEvent.preventDefault(t),n.DomEvent.stopPropagation(t),n.Draggable._disabled))){if(this._simulateClick=!0,t.touches&&t.touches.length>1)return this._simulateClick=!1,clearTimeout(this._longPressTimeout),void 0;var i=t.touches&&1===t.touches.length?t.touches[0]:t,s=i.target;n.Browser.touch&&"a"===s.tagName.toLowerCase()&&n.DomUtil.addClass(s,"leaflet-active"),this._moved=!1,this._moving||(this._startPoint=new n.Point(i.clientX,i.clientY),this._startPos=this._newPos=n.DomUtil.getPosition(this._element),t.touches&&1===t.touches.length&&n.Browser.touch&&this._longPress&&(this._longPressTimeout=setTimeout(n.bind(function(){var t=this._newPos&&this._newPos.distanceTo(this._startPos)||0;t<n.Draggable.TAP_TOLERANCE&&(this._simulateClick=!1,this._onUp(),this._simulateEvent("contextmenu",i))},this),1e3)),n.DomEvent.on(e,n.Draggable.MOVE[t.type],this._onMove,this),n.DomEvent.on(e,n.Draggable.END[t.type],this._onUp,this))}},_onMove:function(t){if(!(t.touches&&t.touches.length>1)){var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=new n.Point(e.clientX,e.clientY),s=i.subtract(this._startPoint);(s.x||s.y)&&(n.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=n.DomUtil.getPosition(this._element).subtract(s),n.Browser.touch||(n.DomUtil.disableTextSelection(),this._setMovingCursor())),this._newPos=this._startPos.add(s),this._moving=!0,n.Util.cancelAnimFrame(this._animRequest),this._animRequest=n.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget))}},_updatePosition:function(){this.fire("predrag"),n.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(t){var i;if(clearTimeout(this._longPressTimeout),this._simulateClick&&t.changedTouches){var s=t.changedTouches[0],o=s.target,a=this._newPos&&this._newPos.distanceTo(this._startPos)||0;"a"===o.tagName.toLowerCase()&&n.DomUtil.removeClass(o,"leaflet-active"),a<n.Draggable.TAP_TOLERANCE&&(i=s)}n.Browser.touch||(n.DomUtil.enableTextSelection(),this._restoreCursor());for(var r in n.Draggable.MOVE)n.Draggable.MOVE.hasOwnProperty(r)&&(n.DomEvent.off(e,n.Draggable.MOVE[r],this._onMove),n.DomEvent.off(e,n.Draggable.END[r],this._onUp));this._moved&&(n.Util.cancelAnimFrame(this._animRequest),this.fire("dragend")),this._moving=!1,i&&(this._moved=!1,this._simulateEvent("click",i))},_setMovingCursor:function(){n.DomUtil.addClass(e.body,"leaflet-dragging")},_restoreCursor:function(){n.DomUtil.removeClass(e.body,"leaflet-dragging")},_simulateEvent:function(i,n){var s=e.createEvent("MouseEvents");s.initMouseEvent(i,!0,!0,t,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(s)}}),n.Handler=n.Class.extend({initialize:function(t){this._map=t},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),n.Map.mergeOptions({dragging:!0,inertia:!n.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:n.Browser.touch?32:18,easeLinearity:.25,longPress:!0,worldCopyJump:!1}),n.Map.Drag=n.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new n.Draggable(t._mapPane,t._container,t.options.longPress),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),t.on("viewreset",this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var t=this._map;t._panAnim&&t._panAnim.stop(),t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var t=this._lastTime=+new Date,e=this._lastPos=this._draggable._newPos;this._positions.push(e),this._times.push(t),t-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var t=this._map.getSize()._divideBy(2),e=this._map.latLngToLayerPoint(new n.LatLng(0,0));this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.project(new n.LatLng(0,180)).x},_onPreDrag:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,s=(n-e+i)%t+e-i,o=(n+e+i)%t-e-i,a=Math.abs(s+i)<Math.abs(o+i)?s:o;this._draggable._newPos.x=a},_onDragEnd:function(){var t=this._map,e=t.options,i=+new Date-this._lastTime,s=!e.inertia||i>e.inertiaThreshold||!this._positions[0];if(s)t.fire("moveend");else{var o=this._lastPos.subtract(this._positions[0]),a=(this._lastTime+i-this._times[0])/1e3,r=e.easeLinearity,l=o.multiplyBy(r/a),h=l.distanceTo(new n.Point(0,0)),c=Math.min(e.inertiaMaxSpeed,h),u=l.multiplyBy(c/h),d=c/(e.inertiaDeceleration*r),p=u.multiplyBy(-d/2).round();n.Util.requestAnimFrame(function(){t.panBy(p,d,r)})}t.fire("dragend"),e.maxBounds&&n.Util.requestAnimFrame(this._panInsideMaxBounds,t,!0,t._container)},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)}}),n.Map.addInitHook("addHandler","dragging",n.Map.Drag),n.Map.mergeOptions({doubleClickZoom:!0}),n.Map.DoubleClickZoom=n.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick)},_onDoubleClick:function(t){this.setView(t.latlng,this._zoom+1)}}),n.Map.addInitHook("addHandler","doubleClickZoom",n.Map.DoubleClickZoom),n.Map.mergeOptions({scrollWheelZoom:!0}),n.Map.ScrollWheelZoom=n.Handler.extend({addHooks:function(){n.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){n.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll)},_onWheelScroll:function(t){var e=n.DomEvent.getWheelDelta(t);this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(n.bind(this._performZoom,this),i),n.DomEvent.preventDefault(t),n.DomEvent.stopPropagation(t)},_performZoom:function(){var t=this._map,e=this._delta,i=t.getZoom();if(e=e>0?Math.ceil(e):Math.round(e),e=Math.max(Math.min(e,4),-4),e=t._limitZoom(i+e)-i,this._delta=0,this._startTime=null,e){var n=i+e,s=this._getCenterForScrollWheelZoom(n);t.setView(s,n)}},_getCenterForScrollWheelZoom:function(t){var e=this._map,i=e.getZoomScale(t),n=e.getSize()._divideBy(2),s=this._lastMousePos._subtract(n)._multiplyBy(1-1/i),o=e._getTopLeftPoint()._add(n)._add(s);return e.unproject(o)}}),n.Map.addInitHook("addHandler","scrollWheelZoom",n.Map.ScrollWheelZoom),n.extend(n.DomEvent,{_touchstart:n.Browser.msTouch?"MSPointerDown":"touchstart",_touchend:n.Browser.msTouch?"MSPointerUp":"touchend",addDoubleTapListener:function(t,i,s){function o(t){var e;if(n.Browser.msTouch?(f.push(t.pointerId),e=f.length):e=t.touches.length,!(e>1)){var i=Date.now(),s=i-(r||i);l=t.touches?t.touches[0]:t,h=s>0&&c>=s,r=i}}function a(t){if(n.Browser.msTouch){var e=f.indexOf(t.pointerId);if(-1===e)return;f.splice(e,1)}if(h){if(n.Browser.msTouch){var s,o={};for(var a in l)s=l[a],o[a]="function"==typeof s?s.bind(l):s;l=o}l.type="dblclick",i(l),r=null}}var r,l,h=!1,c=250,u="_leaflet_",d=this._touchstart,p=this._touchend,f=[];t[u+d+s]=o,t[u+p+s]=a;var m=n.Browser.msTouch?e.documentElement:t;return t.addEventListener(d,o,!1),m.addEventListener(p,a,!1),n.Browser.msTouch&&m.addEventListener("MSPointerCancel",a,!1),this},removeDoubleTapListener:function(t,i){var s="_leaflet_";return t.removeEventListener(this._touchstart,t[s+this._touchstart+i],!1),(n.Browser.msTouch?e.documentElement:t).removeEventListener(this._touchend,t[s+this._touchend+i],!1),n.Browser.msTouch&&e.documentElement.removeEventListener("MSPointerCancel",t[s+this._touchend+i],!1),this}}),n.extend(n.DomEvent,{_msTouches:[],_msDocumentListener:!1,addMsTouchListener:function(t,e,i,n){switch(e){case"touchstart":return this.addMsTouchListenerStart(t,e,i,n);case"touchend":return this.addMsTouchListenerEnd(t,e,i,n);case"touchmove":return this.addMsTouchListenerMove(t,e,i,n);default:throw"Unknown touch event type"}},addMsTouchListenerStart:function(t,i,n,s){var o="_leaflet_",a=this._msTouches,r=function(t){for(var e=!1,i=0;i<a.length;i++)if(a[i].pointerId===t.pointerId){e=!0;break}e||a.push(t),t.touches=a.slice(),t.changedTouches=[t],n(t)};if(t[o+"touchstart"+s]=r,t.addEventListener("MSPointerDown",r,!1),!this._msDocumentListener){var l=function(t){for(var e=0;e<a.length;e++)if(a[e].pointerId===t.pointerId){a.splice(e,1);break}};e.documentElement.addEventListener("MSPointerUp",l,!1),e.documentElement.addEventListener("MSPointerCancel",l,!1),this._msDocumentListener=!0}return this},addMsTouchListenerMove:function(t,e,i,n){function s(t){if(t.pointerType!==t.MSPOINTER_TYPE_MOUSE||0!==t.buttons){for(var e=0;e<a.length;e++)if(a[e].pointerId===t.pointerId){a[e]=t;break}t.touches=a.slice(),t.changedTouches=[t],i(t)}}var o="_leaflet_",a=this._msTouches;return t[o+"touchmove"+n]=s,t.addEventListener("MSPointerMove",s,!1),this},addMsTouchListenerEnd:function(t,e,i,n){var s="_leaflet_",o=this._msTouches,a=function(t){for(var e=0;e<o.length;e++)if(o[e].pointerId===t.pointerId){o.splice(e,1);break}t.touches=o.slice(),t.changedTouches=[t],i(t)};return t[s+"touchend"+n]=a,t.addEventListener("MSPointerUp",a,!1),t.addEventListener("MSPointerCancel",a,!1),this},removeMsTouchListener:function(t,e,i){var n="_leaflet_",s=t[n+e+i];switch(e){case"touchstart":t.removeEventListener("MSPointerDown",s,!1);break;case"touchmove":t.removeEventListener("MSPointerMove",s,!1);break;case"touchend":t.removeEventListener("MSPointerUp",s,!1),t.removeEventListener("MSPointerCancel",s,!1)}return this}}),n.Map.mergeOptions({touchZoom:n.Browser.touch&&!n.Browser.android23}),n.Map.TouchZoom=n.Handler.extend({addHooks:function(){n.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){n.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var i=this._map;if(t.touches&&2===t.touches.length&&!i._animatingZoom&&!this._zooming){var s=i.mouseEventToLayerPoint(t.touches[0]),o=i.mouseEventToLayerPoint(t.touches[1]),a=i._getCenterLayerPoint();this._startCenter=s.add(o)._divideBy(2),this._startDist=s.distanceTo(o),this._moved=!1,this._zooming=!0,this._centerOffset=a.subtract(this._startCenter),i._panAnim&&i._panAnim.stop(),n.DomEvent.on(e,"touchmove",this._onTouchMove,this).on(e,"touchend",this._onTouchEnd,this),n.DomEvent.preventDefault(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length){var e=this._map,i=e.mouseEventToLayerPoint(t.touches[0]),s=e.mouseEventToLayerPoint(t.touches[1]);this._scale=i.distanceTo(s)/this._startDist,this._delta=i._add(s)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(this._moved||(n.DomUtil.addClass(e._mapPane,"leaflet-zoom-anim leaflet-touching"),e.fire("movestart").fire("zoomstart")._prepareTileBg(),this._moved=!0),n.Util.cancelAnimFrame(this._animRequest),this._animRequest=n.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),n.DomEvent.preventDefault(t))}},_updateOnMove:function(){var t=this._map,e=this._getScaleOrigin(),i=t.layerPointToLatLng(e);t.fire("zoomanim",{center:i,zoom:t.getScaleZoom(this._scale)}),t._tileBg.style[n.DomUtil.TRANSFORM]=n.DomUtil.getTranslateString(this._delta)+" "+n.DomUtil.getScaleString(this._scale,this._startCenter)},_onTouchEnd:function(){if(this._moved&&this._zooming){var t=this._map;this._zooming=!1,n.DomUtil.removeClass(t._mapPane,"leaflet-touching"),n.DomEvent.off(e,"touchmove",this._onTouchMove).off(e,"touchend",this._onTouchEnd);var i=this._getScaleOrigin(),s=t.layerPointToLatLng(i),o=t.getZoom(),a=t.getScaleZoom(this._scale)-o,r=a>0?Math.ceil(a):Math.floor(a),l=t._limitZoom(o+r);t.fire("zoomanim",{center:s,zoom:l}),t._runAnimation(s,l,t.getZoomScale(l)/this._scale,i,!0)}},_getScaleOrigin:function(){var t=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(t)}}),n.Map.addInitHook("addHandler","touchZoom",n.Map.TouchZoom),n.Map.mergeOptions({boxZoom:!0}),n.Map.BoxZoom=n.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){n.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){n.DomEvent.off(this._container,"mousedown",this._onMouseDown)},_onMouseDown:function(t){return!t.shiftKey||1!==t.which&&1!==t.button?!1:(n.DomUtil.disableTextSelection(),this._startLayerPoint=this._map.mouseEventToLayerPoint(t),this._box=n.DomUtil.create("div","leaflet-zoom-box",this._pane),n.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",n.DomEvent.on(e,"mousemove",this._onMouseMove,this).on(e,"mouseup",this._onMouseUp,this).preventDefault(t),this._map.fire("boxzoomstart"),void 0)},_onMouseMove:function(t){var e=this._startLayerPoint,i=this._box,s=this._map.mouseEventToLayerPoint(t),o=s.subtract(e),a=new n.Point(Math.min(s.x,e.x),Math.min(s.y,e.y));n.DomUtil.setPosition(i,a),i.style.width=Math.max(0,Math.abs(o.x)-4)+"px",i.style.height=Math.max(0,Math.abs(o.y)-4)+"px"},_onMouseUp:function(t){this._pane.removeChild(this._box),this._container.style.cursor="",n.DomUtil.enableTextSelection(),n.DomEvent.off(e,"mousemove",this._onMouseMove).off(e,"mouseup",this._onMouseUp);var i=this._map,s=i.mouseEventToLayerPoint(t);if(!this._startLayerPoint.equals(s)){var o=new n.LatLngBounds(i.layerPointToLatLng(this._startLayerPoint),i.layerPointToLatLng(s));i.fitBounds(o),i.fire("boxzoomend",{boxZoomBounds:o})}}}),n.Map.addInitHook("addHandler","boxZoom",n.Map.BoxZoom),n.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),n.Map.Keyboard=n.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61],zoomOut:[189,109,173]},initialize:function(t){this._map=t,this._setPanOffset(t.options.keyboardPanOffset),this._setZoomOffset(t.options.keyboardZoomOffset)},addHooks:function(){var t=this._map._container;-1===t.tabIndex&&(t.tabIndex="0"),n.DomEvent.on(t,"focus",this._onFocus,this).on(t,"blur",this._onBlur,this).on(t,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var t=this._map._container;n.DomEvent.off(t,"focus",this._onFocus,this).off(t,"blur",this._onBlur,this).off(t,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){this._focused||this._map._container.focus()},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(t){var e,i,n=this._panKeys={},s=this.keyCodes;for(e=0,i=s.left.length;i>e;e++)n[s.left[e]]=[-1*t,0];for(e=0,i=s.right.length;i>e;e++)n[s.right[e]]=[t,0];for(e=0,i=s.down.length;i>e;e++)n[s.down[e]]=[0,t];for(e=0,i=s.up.length;i>e;e++)n[s.up[e]]=[0,-1*t]},_setZoomOffset:function(t){var e,i,n=this._zoomKeys={},s=this.keyCodes;for(e=0,i=s.zoomIn.length;i>e;e++)n[s.zoomIn[e]]=t;for(e=0,i=s.zoomOut.length;i>e;e++)n[s.zoomOut[e]]=-t},_addHooks:function(){n.DomEvent.on(e,"keydown",this._onKeyDown,this)},_removeHooks:function(){n.DomEvent.off(e,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){var e=t.keyCode,i=this._map;if(this._panKeys.hasOwnProperty(e))i.panBy(this._panKeys[e]),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds);else{if(!this._zoomKeys.hasOwnProperty(e))return;i.setZoom(i.getZoom()+this._zoomKeys[e])}n.DomEvent.stop(t)}}),n.Map.addInitHook("addHandler","keyboard",n.Map.Keyboard),n.Handler.MarkerDrag=n.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new n.Draggable(t,t).on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this)),this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var t=this._marker,e=t._shadow,i=n.DomUtil.getPosition(t._icon),s=t._map.layerPointToLatLng(i);e&&n.DomUtil.setPosition(e,i),t._latlng=s,t.fire("move",{latlng:s}).fire("drag")},_onDragEnd:function(){this._marker.fire("moveend").fire("dragend")}}),n.Handler.PolyEdit=n.Handler.extend({options:{icon:new n.DivIcon({iconSize:new n.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"})},initialize:function(t,e){this._poly=t,n.setOptions(this,e)},addHooks:function(){this._poly._map&&(this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){this._poly._map&&(this._poly._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new n.LayerGroup),this._markers=[];var t,e,i,s,o=this._poly._latlngs;for(t=0,i=o.length;i>t;t++)s=this._createMarker(o[t],t),s.on("click",this._onMarkerClick,this),this._markers.push(s);var a,r;for(t=0,e=i-1;i>t;e=t++)(0!==t||n.Polygon&&this._poly instanceof n.Polygon)&&(a=this._markers[e],r=this._markers[t],this._createMiddleMarker(a,r),this._updatePrevNext(a,r))},_createMarker:function(t,e){var i=new n.Marker(t,{draggable:!0,icon:this.options.icon});return i._origLatLng=t,i._index=e,i.on("drag",this._onMarkerDrag,this),i.on("dragend",this._fireEdit,this),this._markerGroup.addLayer(i),i},_fireEdit:function(){this._poly.fire("edit")},_onMarkerDrag:function(t){var e=t.target;n.extend(e._origLatLng,e._latlng),e._middleLeft&&e._middleLeft.setLatLng(this._getMiddleLatLng(e._prev,e)),e._middleRight&&e._middleRight.setLatLng(this._getMiddleLatLng(e,e._next)),this._poly.redraw()},_onMarkerClick:function(t){if(!(this._poly._latlngs.length<3)){var e=t.target,i=e._index;this._markerGroup.removeLayer(e),this._markers.splice(i,1),this._poly.spliceLatLngs(i,1),this._updateIndexes(i,-1),this._updatePrevNext(e._prev,e._next),e._middleLeft&&this._markerGroup.removeLayer(e._middleLeft),e._middleRight&&this._markerGroup.removeLayer(e._middleRight),e._prev&&e._next?this._createMiddleMarker(e._prev,e._next):e._prev?e._next||(e._prev._middleRight=null):e._next._middleLeft=null,this._poly.fire("edit")}},_updateIndexes:function(t,e){this._markerGroup.eachLayer(function(i){i._index>t&&(i._index+=e)})},_createMiddleMarker:function(t,e){var i,n,s,o=this._getMiddleLatLng(t,e),a=this._createMarker(o);a.setOpacity(.6),t._middleRight=e._middleLeft=a,n=function(){var n=e._index;a._index=n,a.off("click",i).on("click",this._onMarkerClick,this),o.lat=a.getLatLng().lat,o.lng=a.getLatLng().lng,this._poly.spliceLatLngs(n,0,o),this._markers.splice(n,0,a),a.setOpacity(1),this._updateIndexes(n,1),e._index++,this._updatePrevNext(t,a),this._updatePrevNext(a,e)},s=function(){a.off("dragstart",n,this),a.off("dragend",s,this),this._createMiddleMarker(t,a),this._createMiddleMarker(a,e)},i=function(){n.call(this),s.call(this),this._poly.fire("edit")},a.on("click",i,this).on("dragstart",n,this).on("dragend",s,this),this._markerGroup.addLayer(a)},_updatePrevNext:function(t,e){t&&(t._next=e),e&&(e._prev=t)},_getMiddleLatLng:function(t,e){var i=this._poly._map,n=i.latLngToLayerPoint(t.getLatLng()),s=i.latLngToLayerPoint(e.getLatLng());return i.layerPointToLatLng(n._add(s)._divideBy(2))}}),n.Polyline.addInitHook(function(){n.Handler.PolyEdit&&(this.editing=new n.Handler.PolyEdit(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),n.Control=n.Class.extend({options:{position:"topright"},initialize:function(t){n.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},addTo:function(t){this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),s=t._controlCorners[i];return n.DomUtil.addClass(e,"leaflet-control"),-1!==i.indexOf("bottom")?s.insertBefore(e,s.firstChild):s.appendChild(e),this},removeFrom:function(t){var e=this.getPosition(),i=t._controlCorners[e];return i.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(t),this}}),n.control=function(t){return new n.Control(t)},n.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.removeFrom(this),this},_initControlPos:function(){function t(t,o){var a=i+t+" "+i+o;e[t+o]=n.DomUtil.create("div",a,s)}var e=this._controlCorners={},i="leaflet-",s=this._controlContainer=n.DomUtil.create("div",i+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")}}),n.Control.Zoom=n.Control.extend({options:{position:"topleft"},onAdd:function(t){var e="leaflet-control-zoom",i="leaflet-bar",s=i+"-part",o=n.DomUtil.create("div",e+" "+i);return this._map=t,this._zoomInButton=this._createButton("+","Zoom in",e+"-in "+s+" "+s+"-top",o,this._zoomIn,this),this._zoomOutButton=this._createButton("-","Zoom out",e+"-out "+s+" "+s+"-bottom",o,this._zoomOut,this),t.on("zoomend",this._updateDisabled,this),o},onRemove:function(t){t.off("zoomend",this._updateDisabled,this)},_zoomIn:function(t){this._map.zoomIn(t.shiftKey?3:1)},_zoomOut:function(t){this._map.zoomOut(t.shiftKey?3:1)},_createButton:function(t,e,i,s,o,a){var r=n.DomUtil.create("a",i,s);r.innerHTML=t,r.href="#",r.title=e;var l=n.DomEvent.stopPropagation;return n.DomEvent.on(r,"click",l).on(r,"mousedown",l).on(r,"dblclick",l).on(r,"click",n.DomEvent.preventDefault).on(r,"click",o,a),r},_updateDisabled:function(){var t=this._map,e="leaflet-control-zoom-disabled";n.DomUtil.removeClass(this._zoomInButton,e),n.DomUtil.removeClass(this._zoomOutButton,e),t._zoom===t.getMinZoom()&&n.DomUtil.addClass(this._zoomOutButton,e),t._zoom===t.getMaxZoom()&&n.DomUtil.addClass(this._zoomInButton,e)}}),n.Map.mergeOptions({zoomControl:!0}),n.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new n.Control.Zoom,this.addControl(this.zoomControl))}),n.control.zoom=function(t){return new n.Control.Zoom(t)},n.Control.Attribution=n.Control.extend({options:{position:"bottomright",prefix:'Powered by <a href="http://leafletjs.com">Leaflet</a>'},initialize:function(t){n.setOptions(this,t),this._attributions={}},onAdd:function(t){return this._container=n.DomUtil.create("div","leaflet-control-attribution"),n.DomEvent.disableClickPropagation(this._container),t.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(t){t.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):void 0},removeAttribution:function(t){return t?(this._attributions[t]--,this._update(),this):void 0},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions.hasOwnProperty(e)&&this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" &#8212; ")}},_onLayerAdd:function(t){t.layer.getAttribution&&this.addAttribution(t.layer.getAttribution())},_onLayerRemove:function(t){t.layer.getAttribution&&this.removeAttribution(t.layer.getAttribution())}}),n.Map.mergeOptions({attributionControl:!0}),n.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new n.Control.Attribution).addTo(this))}),n.control.attribution=function(t){return new n.Control.Attribution(t)},n.Control.Scale=n.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(t){this._map=t;var e="leaflet-control-scale",i=n.DomUtil.create("div",e),s=this.options;return this._addScales(s,e,i),t.on(s.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=n.DomUtil.create("div",e+"-line",i)),t.imperial&&(this._iScale=n.DomUtil.create("div",e+"-line",i))},_update:function(){var t=this._map.getBounds(),e=t.getCenter().lat,i=6378137*Math.PI*Math.cos(e*Math.PI/180),n=i*(t.getNorthEast().lng-t.getSouthWest().lng)/180,s=this._map.getSize(),o=this.options,a=0;s.x>0&&(a=n*(o.maxWidth/s.x)),this._updateScales(o,a)},_updateScales:function(t,e){t.metric&&e&&this._updateMetric(e),t.imperial&&e&&this._updateImperial(e)},_updateMetric:function(t){var e=this._getRoundNum(t);this._mScale.style.width=this._getScaleWidth(e/t)+"px",this._mScale.innerHTML=1e3>e?e+" m":e/1e3+" km"},_updateImperial:function(t){var e,i,n,s=3.2808399*t,o=this._iScale;s>5280?(e=s/5280,i=this._getRoundNum(e),o.style.width=this._getScaleWidth(i/e)+"px",o.innerHTML=i+" mi"):(n=this._getRoundNum(s),o.style.width=this._getScaleWidth(n/s)+"px",o.innerHTML=n+" ft")},_getScaleWidth:function(t){return Math.round(this.options.maxWidth*t)-10},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,e*i}}),n.control.scale=function(t){return new n.Control.Scale(t)},n.Control.Layers=n.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(t,e,i){n.setOptions(this,i),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var s in t)t.hasOwnProperty(s)&&this._addLayer(t[s],s);for(s in e)e.hasOwnProperty(s)&&this._addLayer(e[s],s,!0)},onAdd:function(t){return this._initLayout(),this._update(),t.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(t){t.off("layeradd",this._onLayerChange).off("layerremove",this._onLayerChange)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._update(),this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._update(),this},removeLayer:function(t){var e=n.stamp(t);return delete this._layers[e],this._update(),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=n.DomUtil.create("div",t);n.Browser.touch?n.DomEvent.on(e,"click",n.DomEvent.stopPropagation):(n.DomEvent.disableClickPropagation(e),n.DomEvent.on(e,"mousewheel",n.DomEvent.stopPropagation));var i=this._form=n.DomUtil.create("form",t+"-list");if(this.options.collapsed){n.DomEvent.on(e,"mouseover",this._expand,this).on(e,"mouseout",this._collapse,this);var s=this._layersLink=n.DomUtil.create("a",t+"-toggle",e);s.href="#",s.title="Layers",n.Browser.touch?n.DomEvent.on(s,"click",n.DomEvent.stopPropagation).on(s,"click",n.DomEvent.preventDefault).on(s,"click",this._expand,this):n.DomEvent.on(s,"focus",this._expand,this),this._map.on("movestart",this._collapse,this)}else this._expand();this._baseLayersList=n.DomUtil.create("div",t+"-base",i),this._separator=n.DomUtil.create("div",t+"-separator",i),this._overlaysList=n.DomUtil.create("div",t+"-overlays",i),e.appendChild(i)
},_addLayer:function(t,e,i){var s=n.stamp(t);this._layers[s]={layer:t,name:e,overlay:i},this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var t=!1,e=!1;for(var i in this._layers)if(this._layers.hasOwnProperty(i)){var n=this._layers[i];this._addItem(n),e=e||n.overlay,t=t||!n.overlay}this._separator.style.display=e&&t?"":"none"}},_onLayerChange:function(t){var e=n.stamp(t.layer);this._layers[e]&&!this._handlingClick&&this._update()},_createRadioElement:function(t,i){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"';i&&(n+=' checked="checked"'),n+="/>";var s=e.createElement("div");return s.innerHTML=n,s.firstChild},_addItem:function(t){var i,s=e.createElement("label"),o=this._map.hasLayer(t.layer);t.overlay?(i=e.createElement("input"),i.type="checkbox",i.className="leaflet-control-layers-selector",i.defaultChecked=o):i=this._createRadioElement("leaflet-base-layers",o),i.layerId=n.stamp(t.layer),n.DomEvent.on(i,"click",this._onInputClick,this);var a=e.createElement("span");a.innerHTML=" "+t.name,s.appendChild(i),s.appendChild(a);var r=t.overlay?this._overlaysList:this._baseLayersList;return r.appendChild(s),s},_onInputClick:function(){var t,e,i,n,s=this._form.getElementsByTagName("input"),o=s.length;for(this._handlingClick=!0,t=0;o>t;t++)e=s[t],i=this._layers[e.layerId],e.checked&&!this._map.hasLayer(i.layer)?(this._map.addLayer(i.layer),i.overlay||(n=i.layer)):!e.checked&&this._map.hasLayer(i.layer)&&this._map.removeLayer(i.layer);n&&(this._map.setZoom(this._map.getZoom()),this._map.fire("baselayerchange",{layer:n})),this._handlingClick=!1},_expand:function(){n.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),n.control.layers=function(t,e,i){return new n.Control.Layers(t,e,i)},n.PosAnimation=n.Class.extend({includes:n.Mixin.Events,run:function(t,e,i,s){this.stop(),this._el=t,this._inProgress=!0,this.fire("start"),t.style[n.DomUtil.TRANSITION]="all "+(i||.25)+"s cubic-bezier(0,0,"+(s||.5)+",1)",n.DomEvent.on(t,n.DomUtil.TRANSITION_END,this._onTransitionEnd,this),n.DomUtil.setPosition(t,e),n.Util.falseFn(t.offsetWidth),this._stepTimer=setInterval(n.bind(this.fire,this,"step"),50)},stop:function(){this._inProgress&&(n.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),n.Util.falseFn(this._el.offsetWidth))},_transformRe:/(-?[\d\.]+), (-?[\d\.]+)\)/,_getPos:function(){var e,i,s,o=this._el,a=t.getComputedStyle(o);return n.Browser.any3d?(s=a[n.DomUtil.TRANSFORM].match(this._transformRe),e=parseFloat(s[1]),i=parseFloat(s[2])):(e=parseFloat(a.left),i=parseFloat(a.top)),new n.Point(e,i,!0)},_onTransitionEnd:function(){n.DomEvent.off(this._el,n.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[n.DomUtil.TRANSITION]="",clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),n.Map.include({setView:function(t,e,i){e=this._limitZoom(e);var n=this._zoom!==e;if(this._loaded&&!i&&this._layers){this._panAnim&&this._panAnim.stop();var s=n?this._zoomToIfClose&&this._zoomToIfClose(t,e):this._panByIfClose(t);if(s)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},panBy:function(t,e,i){if(t=n.point(t),!t.x&&!t.y)return this;this._panAnim||(this._panAnim=new n.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),this.fire("movestart"),n.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var s=n.DomUtil.getPosition(this._mapPane).subtract(t)._round();return this._panAnim.run(this._mapPane,s,e||.25,i),this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){n.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_panByIfClose:function(t){var e=this._getCenterOffset(t)._floor();return this._offsetIsWithinView(e)?(this.panBy(e),!0):!1},_offsetIsWithinView:function(t,e){var i=e||1,n=this.getSize();return Math.abs(t.x)<=n.x*i&&Math.abs(t.y)<=n.y*i}}),n.PosAnimation=n.DomUtil.TRANSITION?n.PosAnimation:n.PosAnimation.extend({run:function(t,e,i,s){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(s||.5,.2),this._startPos=n.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=n.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var t=+new Date-this._startTime,e=1e3*this._duration;e>t?this._runFrame(this._easeOut(t/e)):(this._runFrame(1),this._complete())},_runFrame:function(t){var e=this._startPos.add(this._offset.multiplyBy(t));n.DomUtil.setPosition(this._el,e),this.fire("step")},_complete:function(){n.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),n.Map.mergeOptions({zoomAnimation:n.DomUtil.TRANSITION&&!n.Browser.android23&&!n.Browser.mobileOpera}),n.DomUtil.TRANSITION&&n.Map.addInitHook(function(){n.DomEvent.on(this._mapPane,n.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),n.Map.include(n.DomUtil.TRANSITION?{_zoomToIfClose:function(t,e){if(this._animatingZoom)return!0;if(!this.options.zoomAnimation)return!1;var i=this.getZoomScale(e),s=this._getCenterOffset(t)._divideBy(1-1/i);if(!this._offsetIsWithinView(s,1))return!1;n.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this.fire("movestart").fire("zoomstart"),this.fire("zoomanim",{center:t,zoom:e});var o=this._getCenterLayerPoint().add(s);return this._prepareTileBg(),this._runAnimation(t,e,i,o),!0},_catchTransitionEnd:function(){this._animatingZoom&&this._onZoomTransitionEnd()},_runAnimation:function(t,e,i,s,o){this._animateToCenter=t,this._animateToZoom=e,this._animatingZoom=!0,n.Draggable&&(n.Draggable._disabled=!0);var a=n.DomUtil.TRANSFORM,r=this._tileBg;clearTimeout(this._clearTileBgTimer),n.Util.falseFn(r.offsetWidth);var l=n.DomUtil.getScaleString(i,s),h=r.style[a];r.style[a]=o?h+" "+l:l+" "+h},_prepareTileBg:function(){var t=this._tilePane,e=this._tileBg;if(e&&this._getLoadedTilesPercentage(e)>.5&&this._getLoadedTilesPercentage(t)<.5)return t.style.visibility="hidden",t.empty=!0,this._stopLoadingImages(t),void 0;e||(e=this._tileBg=this._createPane("leaflet-tile-pane",this._mapPane),e.style.zIndex=1),e.style[n.DomUtil.TRANSFORM]="",e.style.visibility="hidden",e.empty=!0,t.empty=!1,this._tilePane=this._panes.tilePane=e;var i=this._tileBg=t;n.DomUtil.addClass(i,"leaflet-zoom-animated"),this._stopLoadingImages(i)},_getLoadedTilesPercentage:function(t){var e,i,n=t.getElementsByTagName("img"),s=0;for(e=0,i=n.length;i>e;e++)n[e].complete&&s++;return s/i},_stopLoadingImages:function(t){var e,i,s,o=Array.prototype.slice.call(t.getElementsByTagName("img"));for(e=0,i=o.length;i>e;e++)s=o[e],s.complete||(s.onload=n.Util.falseFn,s.onerror=n.Util.falseFn,s.src=n.Util.emptyImageUrl,s.parentNode.removeChild(s))},_onZoomTransitionEnd:function(){this._restoreTileFront(),n.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),n.Util.falseFn(this._tileBg.offsetWidth),this._animatingZoom=!1,this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),n.Draggable&&(n.Draggable._disabled=!1)},_restoreTileFront:function(){this._tilePane.innerHTML="",this._tilePane.style.visibility="",this._tilePane.style.zIndex=2,this._tileBg.style.zIndex=1},_clearTileBg:function(){this._animatingZoom||this.touchZoom._zooming||(this._tileBg.innerHTML="")}}:{}),n.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(t){if(t=this._locationOptions=n.extend(this._defaultLocateOptions,t),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=n.bind(this._handleGeolocationResponse,this),i=n.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locationOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=180*t.coords.accuracy/4e7,i=2*e,s=t.coords.latitude,o=t.coords.longitude,a=new n.LatLng(s,o),r=new n.LatLng(s-e,o-i),l=new n.LatLng(s+e,o+i),h=new n.LatLngBounds(r,l),c=this._locationOptions;if(c.setView){var u=Math.min(this.getBoundsZoom(h),c.maxZoom);this.setView(a,u)}this.fire("locationfound",{latlng:a,bounds:h,accuracy:t.coords.accuracy})}})}(this,document),/*
 * Swipe 2.0
 *
 * Brad Birdsall
 * Copyright 2012, Licensed GPL & MIT
 *
*/
window.Swipe=function(t,e){var i=this;t&&(this.container=t,this.element=this.container.children[0],this.browser={touch:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}(),transitions:function(){var t=document.createElement("swipe"),e=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var i in e)if(void 0!==t.style[e[i]])return!0;return!1}()},e=e||{},this.index=e.startSlide||0,this.speed=e.speed||300,this.callback=e.callback||function(){},this.transitionEnd=e.transitionEnd||function(){},this.delay=e.auto||0,this.cont=void 0!=e.continuous?!!e.continuous:!0,this.disableScroll=!!e.disableScroll,this.index=parseInt(this.index,10),this.setup(),this.begin(),this.element.addEventListener?(this.browser.touch&&(this.element.addEventListener("touchstart",this,!1),this.element.addEventListener("touchmove",this,!1),this.element.addEventListener("touchend",this,!1)),this.browser.transitions&&(this.element.addEventListener("webkitTransitionEnd",this,!1),this.element.addEventListener("msTransitionEnd",this,!1),this.element.addEventListener("oTransitionEnd",this,!1),this.element.addEventListener("transitionend",this,!1)),window.addEventListener("resize",this,!1)):window.onresize=function(){i.setup()})},Swipe.prototype={setup:function(){if(this.slides=this.element.children,this.length=this.slides.length,this.cache=new Array(this.length),!(this.length<2)&&(this.width=this.container.getBoundingClientRect().width||this.container.offsetWidth,this.width)){var t=[[],[],[]];this.element.style.width=this.slides.length*this.width+"px";for(var e=this.length-1;e>-1;e--){var i=this.slides[e];i.style.width=this.width+"px",i.setAttribute("data-index",e),this.browser.transitions&&(i.style.left=e*-this.width+"px"),t[this.index>e?0:this.index<e?2:1].push(e)}this.browser.transitions?(this._stack(t[0],-1),this._stack(t[1],0),this._stack(t[2],1)):this.element.style.left=this.index*-this.width+"px",this.container.style.visibility="visible"}},kill:function(){this.delay=0,clearTimeout(this.interval);for(var t=[],e=this.slides.length-1;e>=0;e--)this.slides[e].style.width="",t.push(e);this._stack(t,0);var i=this.element;i.className=i.className.replace("swipe-active",""),this.element.removeEventListener?(this.browser.touch&&(this.element.removeEventListener("touchstart",this,!1),this.element.removeEventListener("touchmove",this,!1),this.element.removeEventListener("touchend",this,!1)),this.browser.transitions&&(this.element.removeEventListener("webkitTransitionEnd",this,!1),this.element.removeEventListener("msTransitionEnd",this,!1),this.element.removeEventListener("oTransitionEnd",this,!1),this.element.removeEventListener("transitionend",this,!1)),window.removeEventListener("resize",this,!1)):window.onresize=null},getPos:function(){return this.index},prev:function(t){this.delay=t||0,clearTimeout(this.interval),this.index?this.slide(this.index-1,this.speed):this.cont&&this.slide(this.length-1,this.speed)},next:function(t){this.delay=t||0,clearTimeout(this.interval),this.index<this.length-1?this.slide(this.index+1,this.speed):this.cont&&this.slide(0,this.speed)},begin:function(){var t=this;this.interval=this.delay?setTimeout(function(){t.next(t.delay)},this.delay):0},handleEvent:function(t){switch(t.type){case"touchstart":this.onTouchStart(t);break;case"touchmove":this.onTouchMove(t);break;case"touchend":this.onTouchEnd(t);break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":this.onTransitionEnd(t);break;case"resize":this.setup()}t.stopPropagation()},onTouchStart:function(t){var e=this;e.start={pageX:t.touches[0].pageX,pageY:t.touches[0].pageY,time:Number(new Date)},e.isScrolling=void 0,e.deltaX=0},onTouchMove:function(t){var e=this;t.touches.length>1||t.scale&&1!==t.scale||(e.deltaX=t.touches[0].pageX-e.start.pageX,"undefined"==typeof e.isScrolling&&(e.isScrolling=!!(e.isScrolling||Math.abs(e.deltaX)<Math.abs(t.touches[0].pageY-e.start.pageY))),e.isScrolling?e.disableScroll&&t.preventDefault():(t.preventDefault(),e.delay=0,clearTimeout(e.interval),e.deltaX=e.deltaX/(!e.index&&e.deltaX>0||e.index==e.length-1&&e.deltaX<0?Math.abs(e.deltaX)/e.width+1:1),e._move([e.index-1,e.index,e.index+1],e.deltaX)))},onTouchEnd:function(){var t=this,e=Number(new Date)-t.start.time<500&&Math.abs(t.deltaX)>20||Math.abs(t.deltaX)>t.width/2,i=!t.index&&t.deltaX>0||t.index==t.length-1&&t.deltaX<0,n=t.deltaX<0;t.isScrolling||(e&&!i?(n?(t._stack([t.index-1],-1),t._slide([t.index,t.index+1],-t.width,t.speed),t.index+=1):(t._stack([t.index+1],1),t._slide([t.index-1,t.index],t.width,t.speed),t.index+=-1),t.callback(t.index,t.slides[t.index])):t._slide([t.index-1,t.index,t.index+1],0,t.speed))},onTransitionEnd:function(t){this._getElemIndex(t.target)==this.index&&(this.delay&&this.begin(),this.transitionEnd(this.index,this.slides[this.index]))},slide:function(t,e){var i=this.index;if(i!=t){var e="undefined"==typeof e?this.speed:e;if(this.browser.transitions){for(var n=Math.abs(i-t)-1,s=Math.abs(i-t)/(i-t),o=[];n--;)o.push((t>i?t:i)-n-1);this._stack(o,s),this._slide([i,t],this.width*s,e)}else this._animate(i*-this.width,t*-this.width,e);this.index=t,this.callback(this.index,this.slides[this.index])}},_slide:function(t,e,i){for(var n=this.slides,s=t.length;s--;)this._translate(n[t[s]],e+this.cache[t[s]],i?i:0),this.cache[t[s]]+=e},_stack:function(t,e){for(var i=this.slides,n=t.length,s=this.width*e;n--;)this._translate(i[t[n]],s,0),this.cache[t[n]]=s},_move:function(t,e){for(var i=this.slides,n=t.length;n--;)this._translate(i[t[n]],e+this.cache[t[n]],0)},_translate:function(t,e,i){if(t){var n=t.style;n.webkitTransitionDuration=n.MozTransitionDuration=n.msTransitionDuration=n.OTransitionDuration=n.transitionDuration=i+"ms",n.webkitTransform="translate("+e+"px,0)"+"translateZ(0)",n.msTransform=n.MozTransform=n.OTransform="translateX("+e+"px)"}},_animate:function(t,e,i){var n=this.element;if(!i)return n.style.left=e+"px",void 0;var s=this,o=new Date,a=setInterval(function(){var r=new Date-o;return r>i?(n.style.left=e+"px",s.delay&&s.begin(),s.transitionEnd(s.index,s.slides[s.index]),clearInterval(a),void 0):(n.style.left=(e-t)*(Math.floor(100*(r/i))/100)+t+"px",void 0)},4)},_getElemIndex:function(t){return parseInt(t.getAttribute("data-index"),10)}},(window.jQuery||window.Zepto)&&!function(t){t.fn.Swipe=function(e){return this.each(function(){var i=t(this);i.data("Swipe",new Swipe(i[0],e))})}}(window.jQuery||window.Zepto),function(){Walker.mobile_webapp=function(){return window.navigator.standalone===!0?$("a:not(.pjax)").on("click",function(){return event.preventDefault(),window.location=$(this).attr("href")}):void 0},Walker.item_hover=function(){var t;return t=function(){return Modernizr.touch?void 0:$("#item_container").on("mouseenter mouseleave",".item",function(t){var e,i,n;return"mouseenter"===t.type&&$("#item_container").hasClass("grid_view")?(i=$(this).find(".caption"),i.find(".title").removeClass("ellipsis"),$(this).find(".top_shadow").stop(!0,!0).fadeIn(400),e=i.css("height","auto").height(),i.css("height","30px"),i.stop(!0,!0).animate({bottom:"0px",overflow:"auto",height:e},100,function(){var t;return t=!0})):"mouseleave"===t.type&&$("#item_container").hasClass("grid_view")?(i=$(this).find(".caption"),n=$(this).find(".top_shadow"),i.find(".title").addClass("ellipsis"),n.stop(!0,!0).fadeOut(200),i.stop(!0,!0).animate({bottom:"0px",overflow:"hidden",height:"20px",queue:!1},200)):void 0})},$("html").hasClass("oldie")?t():enquire.register("screen and (min-width: 621px)",{match:function(){return t()},unmatch:function(){return $("#item_container").unbind("mouseenter mouseleave")}},!0).listen()},Walker.mobile_navigation=function(){var t;return t=!1,$("header .menu").click(function(e){return e.preventDefault(),t="menu active"!==$(this).attr("class")?!0:!1,$(this).is(".active")?($(this).removeClass("active").html("Menu").parent().find("nav").slideUp(100),$("header .subnav").hide(),$("header .active").removeClass("active")):$(this).addClass("active").html("Close").parent().find("nav").slideDown(100)}),$("header nav li a").click(function(e){return t===!0?(e.preventDefault(),$(this).is(".active")?$(this).removeClass("active").parent().find("ul").slideUp(100):($(this).parent().parent().find(".active").removeClass("active").parent().find("ul").slideUp(100),$(this).addClass("active").parent().find("ul").slideDown(100))):void 0}),$(".js #menu_toggle").click(function(t){return t.stopPropagation(),t.preventDefault(),t.stopPropagation(),$("body").toggleClass("active")}),$(document).on("click",".active .main_content",function(t){return t.stopPropagation(),t.preventDefault(),$("body").removeClass("active")})},Walker.make_mobile_sidebar=function(){return $("#mobile_nav").html($(".filters").html()),$("#mobile_nav .has_image").parent().prependTo("#mobile_nav"),$("#mobile_nav").prepend($("#scopeable_search").html()),$("#mobile_nav #searchform #q").attr("placeholder","Search").autocomplete({source:$("#mobile_nav #searchform #q").data("autocomplete-path"),delay:100,appendTo:"#mobile_nav #searchform",select:function(t,e){return $("#mobile_nav #searchform #q").val(e.item.value),$("#mobile_nav #searchform").submit()}})},Walker.masonryInit=function(){var t;return t=function(){var t,e,i;return i=navigator.userAgent.toLowerCase().indexOf("chrome")>-1,e=200,t=$("#item_container"),t.imagesLoaded(function(){var n,s;return t.masonry({itemSelector:".item",columnWidth:e,isAnimated:!1}),n=1*$(".pagination ul .current").text(),i&&n>1&&(s=$.cookie("pos"),setTimeout(function(){return $("html, body").animate({scrollTop:s},"fast")},100),$.cookie("pos",null,{path:"/collections"})),$("body").hasClass("artist_page")&&$.support.pjax?$("#spacer").css("height",function(){return 0}):void 0})},$("html").hasClass("oldie")?t():enquire.register("screen and (max-width: 620px)",{match:function(){var t,e;return e=150,t=$("#item_container"),t.imagesLoaded(function(){return t.masonry({itemSelector:".item",columnWidth:e,isAnimated:!1})})}}).register("screen and (min-width: 621px)",{match:function(){return t()}},!0).listen()},Walker.infiniteScrollInit=function(){var t,e,i,n;if($(".pagination ul .current").length)return e=navigator.userAgent.toLowerCase().indexOf("chrome")>-1,i=void 0,Walker.infiniteScrollPage=1*$(".pagination ul .current").text()+1,n="",t=$("#item_container"),t.infinitescroll({navSelector:".pagination",nextSelector:".pagination ul .next_page",itemSelector:"#item_container .item",loading:{msgText:"",selector:".infscr-loading",img:"http://www.walkerart.org/static/img/loading.gif",finishedMsg:'<div class="end">&bull;</div>',speed:1},debug:!1,animate:!1,pixelsFromNavToBottom:1e3,state:{currPage:Walker.infiniteScrollPage},path:Walker.infiniteScrollPath},function(i){var s,o;return Walker.infiniteScrollPage+=1,s=$(i),t.masonry("appended",s),Modernizr.history&&e?(n=Walker.infiniteScrollPath().match(/^(.*?)page=\d+(.*|$)/).slice(1),o=n[0]+"p="+Walker.infiniteScrollPage+n[1],window.history.replaceState({},document.title,o)):void 0}),Modernizr.history&&e?$(window).scroll(function(){return $.cookie("pos",$(window).scrollTop(),{path:"/collections"})}):void 0},Walker.infiniteScrollPath=function(t){var e;return t=Walker.infiniteScrollPage,e=$(".pagination ul .next_page").attr("href").replace(/page=\d+/,"page="+t)},Walker.navigation=function(){return $("nav.filters .nav_item").each(function(){var t;return t=$(this).find("ul li .selected").html(),$(this).find(".active_filter .selected_option").html(t)}),Modernizr.touch?$("nav.filters .nav_item").click(function(){return $(this).hasClass("activated")===!0?($(".selector",this).stop(!0,!0).fadeOut(150),$("nav.filters .nav_item").removeClass("activated")):($(".selector").stop(!0,!0).fadeOut(150),$(".selector",this).delay(200).fadeIn(100),$("nav.filters .nav_item").removeClass("activated"),$(this).addClass("activated"))}):$("nav.filters .nav_item").hover(function(){return $(this).addClass("activated"),$(".selector",this).stop(!0,!0).delay(200).fadeIn(100)},function(){return $(this).removeClass("activated"),$(".selector",this).stop(!0,!0).fadeOut(150)})},Walker.one_page_nav=function(){return $(".one_page_nav").onePageNav({currentClass:"active",changeHash:!1,scrollSpeed:250,scrollOffset:86,scrollThreshold:.1,easing:"swing"})},Walker.weather=function(){return $("header .weather").hover(function(){return $(".attribution",this).delay(250).fadeIn(50)},function(){return $(".attribution",this).stop(!0,!0).fadeOut(100)})},Walker.artwork_page_size=function(){var t;return t=function(){var t,e,i,n,s,o;return o=$(window).height(),i=$("#header_container").outerHeight(!0),e=$(".tombstone").outerHeight(!0),t=$("body").hasClass("multiple_images")?30:10,n=o-(i+e+t),s=$("#li_artwork .artwork_center_outer .artwork_center_inner .artwork_img").css("height"),parseInt(s,10)>=n&&$("#li_artwork .artwork_center_outer .artwork_center_inner .artwork_img").css("height",n),$("#li_artwork, .link_to_seadragon_single").css("height",n),$(window).resize(function(){return o=$(window).height(),e=$(".tombstone").outerHeight(!0),n=o-(i+e+t),parseInt(s,10)>=n?$("#li_artwork .artwork_center_outer .artwork_center_inner .artwork_img").css("height",n):$("#li_artwork .artwork_center_outer .artwork_center_inner .artwork_img").css("height",s),$("#li_artwork, .link_to_seadragon_single").css("height",n),Walker.zoom_go_home()})},-1!==document.URL.indexOf("/artworks/")&&($("html").hasClass("oldie")?t():(enquire.register("screen and (min-width: 621px)",{match:function(){return t()},unmatch:function(){return setTimeout(function(){return Walker.zoom_go_home()},1e3)}},!0).listen(),enquire.register("screen and (max-width: 620px)",{match:function(){return $("#li_artwork, .link_to_seadragon_single").css("height",300),$("#li_artwork .artwork_center_outer .artwork_center_inner .artwork_img").css("height",300),$(window).unbind("resize")},unmatch:function(){return setTimeout(function(){return Walker.zoom_go_home()},1e3)}}).listen())),$(document).trigger("artwork_page_sized")},Walker.search_init=function(){var t;return $("body").on("click","header #scopeable_search",function(){var t;return t=void 0,t=$(window).width()-37,$(this).addClass("expanded").animate({width:t},150),$(".search_scope").delay(150).fadeIn(150),$("input#q",this).val("").focus()}),$("body").on("click","#main, #walker_header, #header_container nav",function(){return $("#scopeable_search").hasClass("expanded")?($(".search_scope").hide(),$("header #scopeable_search").removeClass("expanded").animate({width:"62px",height:"32px"},100)):void 0}),t=$("#scopeable_search #q"),t.autocomplete({source:t.data("autocomplete-path"),delay:100,select:function(e,i){return t.val(i.item.value),$("#searchform").submit()}})},Walker.accordion=function(){return $(".item_heading").click(function(){var t;return $(this).parent(".detail_item").hasClass("active")?$(this).parent(".detail_item").children(".item_body").slideUp(150,function(){return $(this).parent(".detail_item").removeClass("active")}):($("body").hasClass("artwork")&&(t=$(this).offset().top-$("#header_container").height(),$("body").animate({scrollTop:t},150)),$(this).parent(".detail_item").children(".item_body").slideDown(150,function(){return $(this).parent(".detail_item").addClass("active")}))})},Walker.zoom_go_home=function(){return Zoomer.zoomers[window.artworkSwipe.getCurrentSlideId()].map.centerImageAtExtents()},Walker.zoom_in=function(){return Zoomer.zoomers[window.artworkSwipe.getCurrentSlideId()].map.zoomIn()},Walker.zoom_out=function(){return Zoomer.zoomers[window.artworkSwipe.getCurrentSlideId()].map.zoomOut()},Walker.swipe_next_slide=function(){return window.artworkSwipe.next()},Walker.swipe_prev_slide=function(){return window.artworkSwipe.prev()},Walker.zoom_sidebar_setup=function(){var t,e;return $("a#os-home").on("click",function(t){return t.preventDefault(),Walker.zoom_go_home()}),$("a#os-zoom-in").on("click",function(t){return t.preventDefault(),Walker.zoom_in()}),$(".viewer_wrapper .info").click(function(t){return t.preventDefault(),$.scrollTo("#artwork_info",150)}),$(".image_caption").on("click",".rights",function(t){return t.preventDefault(),$(".info_container").lightbox_me({centered:!0,overlaySpeed:150,lightboxSpeed:150})}),$(".accordion .rights").click(function(t){return t.preventDefault(),$(".info_container").lightbox_me({centered:!0,overlaySpeed:150,lightboxSpeed:150})}),e=".image-view-0",t=$(e).children(".image_caption").html(),$(".image_caption_container .image_caption").html(t),Modernizr.touch?void 0:$(".artwork_wrapper").hover(function(){return $(".shadow",this).stop(!0,!0).delay(150).fadeIn(400),$(".image_caption",this).stop(!0,!0).delay(150).animate({bottom:"0px"},100)},function(){return $(".shadow",this).stop(!0,!0).fadeOut(500),$(".image_caption",this).stop(!0,!0).animate({bottom:"-20px"},100)})},Walker.multiple_artworks_flipper=function(){var t;return t=$(".swipe-wrap .wac_slide"),1!==t.length?(t.each(function(t){var e;return e='<a class="'+t+'" ></a>',$(".pager_container").append(e)}),$(".pager_container a").first().addClass("active_slide"),Walker.multiple_artworks_click(),Walker.multiple_artworks_keypress()):void 0},Walker.multiple_artworks_keypress=function(){return $(document).keydown(function(t){return 37===t.keyCode?(t.preventDefault(),Walker.swipe_prev_slide()):39===t.keyCode?(t.preventDefault(),Walker.swipe_next_slide()):void 0})},Walker.set_active=function(t){var e;return e=".pager_container a."+t,$(".pager_container a").removeClass("active_slide"),$(e).addClass("active_slide"),Walker.artwork_info(t)},Walker.multiple_artworks_click=function(){return $(".pager_container a").click(function(t){var e;return $(this).hasClass("active_slide")?void 0:(t.preventDefault(),e=Math.round($(this).attr("class"))+1,window.artworkSwipe.slide(e,300))})},Walker.artwork_info=function(t){var e,i,n;return n=".image-view-"+t,e=$(n).children(".image_caption").html(),i=$(n).children(".info_list").html(),$(".info_container .image_info").html(i),$(".image_caption_container .image_caption").html(e)},Walker.thumb_scroll=function(){return $(".artwork_thumb").click(function(){return $("html, body").animate({scrollTop:0},250)})},Walker.artist_images=function(){return $.fn.imageSpin=function(t,e,i,n,s,o){"use strict";return this.hover(function(){return $(".image1",this).stop(!0,!0).queue(function(t){return $(this).css("z-index","501"),t()}).animate({left:t,top:e},100).delay(700).queue(function(t){return $(this).css("z-index","502"),t()}).animate({left:i,top:n},100).delay(700).queue(function(t){return $(this).css("z-index","500"),t()}).animate({left:s,top:o},100),$(".image2",this).stop(!0,!0).queue(function(t){return $(this).css("z-index","502"),t()}).animate({left:i,top:n},100).delay(700).queue(function(t){return $(this).css("z-index","500"),t()}).animate({left:s,top:o},100).delay(700).queue(function(t){return $(this).css("z-index","501"),t()}).animate({left:t,top:e},100),$(".image3",this).stop(!0,!0).queue(function(t){return $(this).css("z-index","500"),t()}).animate({left:s,top:o},100).delay(700).queue(function(t){return $(this).css("z-index","501"),t()}).animate({left:t,top:e},100).delay(700).queue(function(t){return $(this).css("z-index","502"),t()}).animate({left:i,top:n},100)},function(){return $(".image1",this).stop(!0,!0).css("z-index","500").animate({left:s,top:o},100),$(".image2",this).stop(!0,!0).css("z-index","501").animate({left:t,top:e},100),$(".image3",this).stop(!0,!0).css("z-index","502").animate({left:i,top:n},100)})},Modernizr.touch?void 0:$("#artist_container a").imageSpin(19,7,9,13,0,1)},Walker.show_more=function(){return $(".more_content").before('<a href="" class="show_more">More</a>'),$(".more_content").after('<a href="" class="hide_more">Hide</a>'),$("a.show_more").click(function(t){return t.preventDefault(),$(this).hide(),$(this).parent().children(".more_content").slideDown(200),$(this).parent().children("a.hide_more").css("display","block")}),$("a.hide_more").click(function(t){return t.preventDefault(),$(this).hide(),$(this).parent().children(".more_content").slideUp(200),$(this).parent().children("a.show_more").css("display","block")})},Walker.scrollToAnchor=function(t){var e;return e=$(t),$("html,body").animate({scrollTop:e.offset().top-$("#header_container").height()},150)},Walker.footnotes=function(){return $("article sup a").click(function(){return $(this).parent().parent().parent().find(".more_content").show(),$(this).parent().parent().parent().find("a.hide_more").css("display","block"),$(this).parent().parent().parent().find("a.show_more").hide()}),$("article sup a, .jump").click(function(t){return t.preventDefault(),Walker.scrollToAnchor($(this).attr("href"))}),Modernizr.touch?void 0:$("article sup a").inlineFootnote({boxMargin:10,maximumBoxWidth:300})}}.call(this);var Zoomer=Zoomer||{};Zoomer.guidCounter=0,Zoomer.zoom_image_by_class=function(t){Zoomer.loadExtraTiles=-1!==window.location.href.indexOf("longSwipe")?2:6;var e=t.container;$("."+t.container).each(function(){var i=e+Zoomer.guidCounter++;$(this).attr("id",i);var n=$(this).innerHTML;t.container=i,Zoomer.zoom_image(t),n&&this.insertBefore(n,this.firstChild)})},L.Draggable=L.Draggable.extend({_onDown:function(t){if(this._verticalPan=void 0,!(!L.Browser.touch&&t.shiftKey||1!==t.which&&1!==t.button&&!t.touches)){var e=Zoomer.getParentMapForElement(t.target);if((!L.Browser.touch||"function"!=typeof Swipe||e._zoom>e.getMinZoom())&&(L.DomEvent.preventDefault(t),L.DomEvent.stopPropagation(t)),!L.Draggable._disabled){if(this._simulateClick=!0,t.touches&&t.touches.length>1)return this._simulateClick=!1,clearTimeout(this._longPressTimeout),void 0;var i=t.touches&&1===t.touches.length?t.touches[0]:t,n=i.target;L.Browser.touch&&"a"===n.tagName.toLowerCase()&&L.DomUtil.addClass(n,"leaflet-active"),this._moved=!1,this._moving||(this._startPoint=new L.Point(i.clientX,i.clientY),this._startPos=this._newPos=L.DomUtil.getPosition(this._element),t.touches&&1===t.touches.length&&L.Browser.touch&&this._longPress&&(this._longPressTimeout=setTimeout(L.bind(function(){var t=this._newPos&&this._newPos.distanceTo(this._startPos)||0;t<L.Draggable.TAP_TOLERANCE&&(this._simulateClick=!1,this._onUp(),this._simulateEvent("contextmenu",i))},this),1e3)),L.DomEvent.on(document,L.Draggable.MOVE[t.type],this._onMove,this),L.DomEvent.on(document,L.Draggable.END[t.type],this._onUp,this))}}},_onMove:function(t){if(!(t.touches&&t.touches.length>1)){var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=new L.Point(e.clientX,e.clientY),n=i.subtract(this._startPoint);if(n.x||n.y){var s=null;if(t.target&&("undefined"!=typeof t.target._layer?s=t.target._layer._map:Zoomer.zoomers[t.target.id]&&(s=Zoomer.zoomers[t.target.id].map)),L.Browser.touch&&"function"==typeof Swipe||L.DomEvent.preventDefault(t),s&&void 0===this._verticalPan&&(this._verticalPan=!!(this._verticalPan||s.isAtEastEdge()&&s.isAtWestEdge()&&Math.abs(n.x)<Math.abs(n.y))),L.Browser.touch&&(!s||n.x>0&&s.isAtEastEdge()||n.x<0&&s.isAtWestEdge())){if(!(s&&this._verticalPan&&s._zoom>s.getMinZoom()))return this._simulateClick=!1,void 0;n.x=0}this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=L.DomUtil.getPosition(this._element).subtract(n),L.Browser.touch||(L.DomUtil.disableTextSelection(),this._setMovingCursor())),this._newPos=this._startPos.add(n),this._moving=!0,L.Util.cancelAnimFrame(this._animRequest),this._animRequest=L.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)}}}}),Swipe.prototype.handleEvent=function(t){switch(t.type){case"touchstart":this.onTouchStart(t);break;case"touchmove":this.onTouchMove(t);break;case"touchend":this.onTouchEnd(t);break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":this.onTransitionEnd(t);break;case"resize":this.setup()}},Swipe.prototype.getCurrentSlideId=function(){return this.slides?this.slides[this.index].id:this.element.children[0].id},Swipe.prototype.getPreviousSlideId=function(){return this.previousSlideId},Swipe.prototype.setup=function(){if(this.element.children.length<2)return this.container.style.visibility="visible",void 0;if(this.slides||(this.element.appendChild(this.element.children[0].cloneNode(!0)),this.element.insertBefore(this.element.children[this.element.children.length-2].cloneNode(!0),this.element.firstChild),this.index++),this.gutter=10,this.currentSlideId=this.element.children[0].id,this.previousSlideId=this.element.children[0].id,this.slideDuration=-1!==window.location.href.indexOf("longSwipe")?500:250,this.slides=this.element.children,this.length=this.slides.length,this.cache=new Array(this.length),!(this.length<2)&&(this.width=this.container.getBoundingClientRect().width+2*this.gutter||this.container.offsetWidth,this.width)){var t=[[],[],[]];this.element.style.width=this.slides.length*this.width+"px";for(var e=this.length-1;e>-1;e--){var i=this.slides[e];i.style.width=this.width-2*this.gutter+"px",i.setAttribute("data-index",e),i.style.marginLeft=this.gutter+"px",i.style.marginRight=this.gutter+"px",this.browser.transitions&&(i.style.left=e*-this.width-this.gutter+"px"),t[this.index>e?0:this.index<e?2:1].push(e)}this.browser.transitions?(this._stack(t[0],-1),this._stack(t[1],0),this._stack(t[2],1)):this.element.style.left=this.index*-this.width+"px",this.container.style.visibility="visible"}},Zoomer.isPinching=void 0,Swipe.prototype.onTouchMove=function(t){var e=this;if(t.touches.length>1||t.scale&&1!==t.scale)return Zoomer.isPinching=!0,void 0;if(Zoomer.isPinching&&(e.start.pageX=t.touches[0].pageX,Zoomer.isPinching=void 0),e.deltaX=t.touches[0].pageX-e.start.pageX,"undefined"==typeof e.isScrolling&&(e.isScrolling=!!(e.isScrolling||Math.abs(e.deltaX)<Math.abs(t.touches[0].pageY-e.start.pageY))),t.target&&"undefined"!=typeof t.target._layer){var i=t.target._layer._map;if(i._getEdgeDeltas(),i&&!(e.deltaX>0&&i.isAtEastEdge()||e.deltaX<0&&i.isAtWestEdge()))return t.preventDefault(),this.onTouchStart(t)}e.isScrolling?e.disableScroll&&t.preventDefault():(t.preventDefault(),e.delay=0,clearTimeout(e.interval),e.deltaX=e.deltaX/(!e.index&&e.deltaX>0||e.index==e.length-1&&e.deltaX<0?Math.abs(e.deltaX)/e.width+1:1),e._move([e.index-1,e.index,e.index+1],e.deltaX))},Swipe.prototype.onTouchEnd=function(){var t=this,e=Number(new Date)-t.start.time<t.slideDuration&&Math.abs(t.deltaX)>20||Math.abs(t.deltaX)>t.width/2,i=!t.index&&t.deltaX>0||t.index==t.length-1&&t.deltaX<0,n=t.deltaX<0;t.isScrolling||(e&&!i?(n?(t._stack([t.index-1],-1),t._slide([t.index,t.index+1],-t.width,t.speed),t.index+=1):(t._stack([t.index+1],1),t._slide([t.index-1,t.index],t.width,t.speed),t.index+=-1),t.callback(t.index,t.slides[t.index])):t._slide([t.index-1,t.index,t.index+1],0,t.speed))},Swipe.prototype.onTransitionEnd=function(t){this._getElemIndex(t.target)==this.index&&(this.previousSlideId=this.slides[this.index].id,0==this.index&&this.slide(this.slides.length-2,0),this.index==this.slides.length-1&&this.slide(1,0),this.delay&&this.begin(),this.transitionEnd(this.index,this.slides[this.index]),this.currentSlideId=this.slides[this.index].id)},Swipe.prototype.getPos=function(){var t=this.index;return 0==this.index&&(t=this.slides.length-2),this.index==this.slides.length-1&&(t=1),t-1};var Zoomer=Zoomer||{};Zoomer._realTileSize=512,Zoomer.zoomers=[],Zoomer.ua=navigator.userAgent.toLowerCase(),Zoomer.tilePad=1,Zoomer.roundingSlop=2,Zoomer.loadExtraTiles=2,Zoomer.Map=L.Map.extend({_debug:function(t){console.log(this._zoomer.containerName+" -------------"),console.log(t)},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new L.Point($("#"+this._container.id).actual("width"),$("#"+this._container.id).actual("height")),this._sizeChanged=!1),this._size.clone()},getMinZoom:function(){return this.options.minZoom||0},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),n=this.options.crs,s=-1>=t?0:Math.ceil(t);s>i&&(s=i),t=Math.max(e,Math.min(i,t)),this._zoomer&&this._zoomer.tiles&&(s=this._zoomer.noTiles&&e===i?0:s,this._zoomer.tileLayerScale=n.scale(t)/n.scale(s));var o=L.DomUtil.TRANSFORM?1:this._zoomer.tileLayerScale;return this._zoomer.tiles.options.tileSize=o*this._zoomer.currentMapTileSize,t},centerImageAtExtents:function(){this._zoomer.imageBounds=this._zoomer.noTiles?new L.LatLngBounds(this.unproject([0,this._zoomer.imageHeight*(this._zoomer.tileLayerScale>1?this._zoomer.tileLayerScale:1)],this.getMaxZoom()),this.unproject([this._zoomer.imageWidth*(this._zoomer.tileLayerScale>1?this._zoomer.tileLayerScale:1),0],this.getMaxZoom())):new L.LatLngBounds(this.unproject([Zoomer.roundingSlop,this._zoomer.imageHeight-Zoomer.roundingSlop],this.getMaxZoom()),this.unproject([this._zoomer.imageWidth-Zoomer.roundingSlop,Zoomer.roundingSlop],this.getMaxZoom())),this.fitBounds(this._zoomer.imageBounds),this._zoomer.noTiles||(this.options.minZoom=this.getBoundsZoom(this._zoomer.imageBounds))},panToContainImage:function(){if(this._tilePane.children[0]&&(this._tilePane.children[0].style[L.DomUtil.TRANSFORM]=L.DomUtil.getScaleString(this._zoomer.tileLayerScale,this.getPixelOrigin().multiplyBy(-1))),this.getZoom()===this.getMinZoom())return this.centerImageAtExtents(),void 0;var t=(this.getBounds(),0),e=0;this._zoomer.tiles&&(this._getEdgeDeltas(),this._edgeDeltas.dw>0&&this._edgeDeltas.de>0&&(t=Math.ceil(Math.min(this._edgeDeltas.de,this._edgeDeltas.dw))),this._edgeDeltas.dw<0&&this._edgeDeltas.de<0&&(t=Math.ceil(Math.max(this._edgeDeltas.de,this._edgeDeltas.dw))),this._edgeDeltas.ds>0&&this._edgeDeltas.dn>0&&(e=Math.ceil(Math.min(this._edgeDeltas.ds,this._edgeDeltas.dn))),this._edgeDeltas.ds<0&&this._edgeDeltas.dn<0&&(e=Math.ceil(Math.max(this._edgeDeltas.ds,this._edgeDeltas.dn))),this.panBy([t,e]))},_setNoTilesScale:function(){if(this._zoomer.noTiles){var t;this._zoomer.containerAspectRatio<this._zoomer.imageAspectRatio?(t=this._zoomer.container.actual("width"),this._zoomer.imageAspectRatio<1&&(t*=this._zoomer.imageHeight/this._zoomer.imageWidth)):(t=this._zoomer.container.actual("height"),this._zoomer.imageAspectRatio>1&&(t*=this._zoomer.imageWidth/this._zoomer.imageHeight)),this._zoomer.currentMapTileSize=Math.max(this._zoomer.imageWidth,this._zoomer.imageHeight),this._zoomer.tileLayerScale=t/this._zoomer.currentMapTileSize}else this._zoomer.currentMapTileSize=Zoomer._realTileSize},_getEdgeDeltas:function(){var t=this.getBounds(),e=this.project(t._northEast),i=this.project(this._zoomer.imageBounds._northEast),n=this.project(t._southWest),s=this.project(this._zoomer.imageBounds._southWest),o=s.x-n.x,a=i.x-e.x,r=s.y-n.y,l=i.y-e.y;this._edgeDeltas={dw:o,de:a,ds:r,dn:l}},isAtEastEdge:function(){return this._getEdgeDeltas(),this._edgeDeltas.de>0&&this._edgeDeltas.dw>0||this._edgeDeltas.de<0&&this._edgeDeltas.dw>0},isAtWestEdge:function(){return this._getEdgeDeltas(),this._edgeDeltas.dw<0&&this._edgeDeltas.de<0||this._edgeDeltas.de<0&&this._edgeDeltas.dw>0}}),Zoomer.zoomAtMouseLocation=function(t){var e=t.target,i=t.originalEvent.shiftKey?-1:1,n=e._limitZoom(e._zoom+i),s=e.getZoomScale(n),o=e.getSize()._divideBy(2),a=t.containerPoint._subtract(o)._multiplyBy(1-1/s),r=e._getTopLeftPoint()._add(o)._add(a);n!==e._zoom&&e.setView(e.unproject(r),n)},Zoomer.getParentMapForElement=function(t){var e,i;for(e in Zoomer.zoomers)if(Zoomer.zoomers.hasOwnProperty(e)&&(i=Zoomer.zoomers[e],i.container.has(t)))return i.map;return null},Zoomer.Map.TouchZoom=L.Map.TouchZoom.extend({_onTouchMove:function(t){if(t.touches&&2===t.touches.length){var e=this._map,i=e.mouseEventToLayerPoint(t.touches[0]),n=e.mouseEventToLayerPoint(t.touches[1]);if(this._scale=i.distanceTo(n)/this._startDist,this._delta=i._add(n)._divideBy(2)._subtract(this._startCenter),1!==this._scale){var s=e.getScaleZoom(this._scale);s>e.getMaxZoom()&&(this._scale=e.getZoomScale(e.getMaxZoom())),s<e.getMinZoom()&&(this._scale=e.getZoomScale(e.getMinZoom())),this._moved||(L.DomUtil.addClass(e._mapPane,"leaflet-zoom-anim leaflet-touching"),e.fire("movestart").fire("zoomstart")._prepareTileBg(),this._moved=!0),L.Util.cancelAnimFrame(this._animRequest),this._animRequest=L.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),L.DomEvent.preventDefault(t)}}},_onTouchEnd:function(){if(this._moved&&this._zooming){var t=this._map;this._zooming=!1,L.DomUtil.removeClass(t._mapPane,"leaflet-touching"),L.DomEvent.off(document,"touchmove",this._onTouchMove).off(document,"touchend",this._onTouchEnd);var e=this._getScaleOrigin(),i=t.layerPointToLatLng(e),n=t.getZoom(),s=t.getScaleZoom(this._scale)-n,o=(s>0?Math.ceil(s):Math.floor(s),t._limitZoom(n+s));t.fire("zoomanim",{center:i,zoom:o});var a=1;t._runAnimation(i,o,a,e,!0)}}}),Zoomer._getNatural=function(t){if(t.naturalWidth)return{width:t.naturalWidth,height:t.naturalHeight};
var e=new Image;return e.src=t.src,{width:e.width,height:e.height}},Zoomer.scaleNonSquareTile=function(t){var e=t.target._map,i=Zoomer._getNatural(t.tile),n=i.width,s=i.height,o=L.DomUtil.TRANSFORM?1:e._zoomer.tileLayerScale;t.tile.style.height=o*(s+Zoomer.tilePad)+"px",t.tile.style.width=o*(n+Zoomer.tilePad)+"px",s<e._zoomer.currentMapTileSize?t.tile.style.marginBottom=Math.ceil(e._zoomer.currentMapTileSize-s+Zoomer.tilePad)+"px":t.tile.style.marginTop="",t.tile.style.marginRight=n<e._zoomer.currentMapTileSize?Math.ceil((e._zoomer.currentMapTileSize-n)*(e._zoomer.tiles.options.tileSize/e._zoomer.currentMapTileSize)+Zoomer.tilePad)+"px":""},Zoomer.TileLayer=L.TileLayer.extend({_getZoomForUrl:function(){var t=this.options,e=this._map.getZoom();return t.zoomReverse&&(e=t.maxZoom-e),-1>=e?0:Math.ceil(e+t.zoomOffset)},_tileShouldBeLoaded:function(t){if(t.x+":"+t.y in this._tiles)return!1;if(!this.options.continuousWorld){this._getWrapTileNum();var e=Math.ceil(this._map.getZoom());e=0>e?0:e;var i=this._map._zoomer.noTiles?1:Math.ceil(this._map._zoomer.imageWidth/Math.pow(2,this._map.getMaxZoom()-e)/this._map._zoomer.tiles.options.tileSize),n=this._map._zoomer.noTiles?1:Math.ceil(this._map._zoomer.imageHeight/Math.pow(2,this._map.getMaxZoom()-e)/this._map._zoomer.tiles.options.tileSize);if(this.options.noWrap&&(t.x<0||t.x>=i)||t.y<0||t.y>=n)return!1}return!0},_update:function(){if(this._map){var t=this._map.getPixelBounds(),e=this._map.getZoom(),i=this.options.tileSize;if(i*=Math.pow(2,e-Math.ceil(e)),this._map._zoomer.noTiles||!(e>this.options.maxZoom||e<this.options.minZoom)){var n=new L.Point(Math.floor(t.min.x/i)-Zoomer.loadExtraTiles,Math.floor(t.min.y/i)-Zoomer.loadExtraTiles),s=new L.Point(Math.floor(t.max.x/i)+Zoomer.loadExtraTiles,Math.floor(t.max.y/i)+Zoomer.loadExtraTiles),o=new L.Bounds(n,s);this._addTilesFromCenterOut(o),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(o)}}}}),Zoomer.computeZoomScale=function(t){var e=Math.max(t.imageWidth,t.imageHeight);for(t.maxZoom=t.noTiles?0:1;t.currentMapTileSize*Math.pow(2,t.maxZoom)<e;)t.maxZoom+=1;t.maxZoom=t.noTiles?10:t.maxZoom,t.imageAspectRatio=t.imageWidth/t.imageHeight;var i=t.container.actual("width"),n=t.container.actual("height");t.containerAspectRatio=i/n,t.containerMin=Math.min(i,n),t.tileLayerScale=t.imageAspectRatio<t.containerAspectRatio?n/t.imageHeight:i/t.imageWidth},L.CRS.Simple=L.Util.extend({},L.CRS,{projection:L.Projection.LonLat,transformation:new L.Transformation(1,0,-1,0),scale:function(t){return Zoomer._realTileSize*Math.pow(2,t)}}),Zoomer.setupMap=function(t){t.map||(t.map=new Zoomer.Map(t.containerName,{crs:L.CRS.Simple,worldCopyJump:!1,maxZoom:t.maxZoom,inertia:L.Browser.touch,zoomControl:!1,attributionControl:!1,scrollWheelZoom:!1,doubleClickZoom:!1,boxZoom:!1,trackResize:!0,touchZoom:!1,fadeAnimation:-1!==Zoomer.ua.indexOf("chrome")&&-1===Zoomer.ua.search("android 4.0.4")}),t.map.on("zoomend",t.map.panToContainImage),t.map.on("moveend",t.map.panToContainImage),t.map.on("click",Zoomer.zoomAtMouseLocation),t.map.options.touchZoom=!0,t.map.addHandler("touchZoom",Zoomer.Map.TouchZoom)),t.map._zoomer=t,t.map._setNoTilesScale(),t.map._zoom=0,t.map._loaded=!1,t.map.options.minZoom=t.map.getScaleZoom(t.tileLayerScale),t.map.options.maxZoom=t.noTiles?t.tileLayerScale>1?t.map.getScaleZoom(t.tileLayerScale):0:t.maxZoom},Zoomer.createTiles=function(t){var e=new Zoomer.TileLayer(t.tileURL,{noWrap:!0,subdomains:["","0","1","2"],continuousWorld:!1,maxZoom:t.map.options.maxZoom,minZoom:t.map.options.minZoom,tms:!1,detectRetina:!1,tileSize:t.currentMapTileSize,zoomOffset:0,unloadInvisibleTiles:!1,reuseTiles:!1,updateWhenIdle:!1});return e.on("tileload",Zoomer.scaleNonSquareTile),e},Zoomer.zoom_image=function(t){var e=t.container,i=t.tileURL,n=t.imageWidth,s=t.imageHeight,o=$("#"+e),a={};Zoomer.zoomers[e]?a=Zoomer.zoomers[e]:(Zoomer.zoomers[e]=a,a.container=o),a.map&&a.tiles&&(a.map.removeLayer(a.tiles),a.map.options.minZoom=0,a.map._sizeChanged=!0),a.currentMapTileSize=Zoomer._realTileSize,a.containerName=e,a.imageWidth=n,a.imageHeight=s,a.tileURL=i,a.noTiles=-1===a.tileURL.indexOf("{x}"),Zoomer.computeZoomScale(a),Zoomer.setupMap(a),a.tiles=Zoomer.createTiles(a),a.map.centerImageAtExtents(),a.map.addLayer(a.tiles),$("#"+a.containerName+" .leaflet-layer").each(function(){this.style[L.DomUtil.TRANSFORM]=L.DomUtil.getScaleString(a.tileLayerScale,a.map.getPixelOrigin().multiplyBy(-1))})},Zoomer.windowResized=function(){var t,e;for(t in Zoomer.zoomers)Zoomer.zoomers.hasOwnProperty(t)&&(e=Zoomer.zoomers[t],Zoomer.zoom_image({container:e.containerName,tileURL:e.tileURL,imageWidth:e.imageWidth,imageHeight:e.imageHeight}))},$(window).resize(function(){clearTimeout(Zoomer.resizeTimer),Zoomer.resizeTimer=setTimeout(Zoomer.windowResized,100)}),function(){var t;t=function(){var t,e,i,n,s,o,a;return""===Walker.current_section||""===Walker.page_array?"":(n=Walker.page_array.slice(0),a=0,a=n.indexOf(Walker.current_section),$(".headers").removeClass("inverse"),i="."+Walker.current_section,$(i).addClass("inverse"),o=n.length-a-2,0>o?$(".sidebar_right h2").hide():(s=".sidebar_right h2:gt("+o+")",$(".sidebar_right h2").show(),$(s).hide()),e=n.length-a-1,t=".sidebar_left h2:lt("+e+")",$(".sidebar_left h2").css("display","block"),$(t).css("display","none"))},this.setAccordion=t}.call(this),function(){Walker.browse_preference=function(){return $("a.browse_preference.grid").on("click",function(t){return t.preventDefault(),$.cookie("browse_preference","grid_view",{path:"/"}),$("#item_container").removeClass("list_view"),$("#item_container").addClass("grid_view"),$("#item_container").masonry("reload"),$("a.browse_preference").removeClass("active"),$(this).addClass("active")}),$("a.browse_preference.list").on("click",function(t){return t.preventDefault(),$.cookie("browse_preference","list_view",{path:"/"}),$("#item_container").removeClass("grid_view"),$("#item_container").addClass("list_view"),$("#item_container").masonry("reload"),$("a.browse_preference").removeClass("active"),$(this).addClass("active")})}}.call(this),function(){Walker.scopeable_search=function(){return $(".search_scope .level_1").click(function(){return $(".search_scope .level_1").removeClass("active"),$(this).addClass("active"),$("#searchform").attr("action",$(this).attr("data-action")),$(".q").attr("data-autocomplete-path",$(this).attr("data-autocomplete-path"))})}}.call(this),LazyLoad=function(t){function e(e,i){var n,s=t.createElement(e);for(n in i)i.hasOwnProperty(n)&&s.setAttribute(n,i[n]);return s}function i(t){var e,i,n=h[t];n&&(e=n.callback,i=n.urls,i.shift(),c=0,i.length||(e&&e.call(n.context,n.obj),h[t]=null,u[t].length&&s(t)))}function n(){var e=navigator.userAgent;r={async:t.createElement("script").async===!0},(r.webkit=/AppleWebKit\//.test(e))||(r.ie=/MSIE/.test(e))||(r.opera=/Opera/.test(e))||(r.gecko=/Gecko\//.test(e))||(r.unknown=!0)}function s(s,c,d,p,f){var m,g,v,y,_,b,w=function(){i(s)},x="css"===s,k=[];if(r||n(),c)if(c="string"==typeof c?[c]:c.concat(),x||r.async||r.gecko||r.opera)u[s].push({urls:c,callback:d,obj:p,context:f});else for(m=0,g=c.length;g>m;++m)u[s].push({urls:[c[m]],callback:m===g-1?d:null,obj:p,context:f});if(!h[s]&&(y=h[s]=u[s].shift())){for(l||(l=t.head||t.getElementsByTagName("head")[0]),_=y.urls,m=0,g=_.length;g>m;++m)b=_[m],x?v=r.gecko?e("style"):e("link",{href:b,rel:"stylesheet"}):(v=e("script",{src:b}),v.async=!1),v.className="lazyload",v.setAttribute("charset","utf-8"),r.ie&&!x?v.onreadystatechange=function(){/loaded|complete/.test(v.readyState)&&(v.onreadystatechange=null,w())}:x&&(r.gecko||r.webkit)?r.webkit?(y.urls[m]=v.href,a()):(v.innerHTML='@import "'+b+'";',o(v)):v.onload=v.onerror=w,k.push(v);for(m=0,g=k.length;g>m;++m)l.appendChild(k[m])}}function o(t){var e;try{e=!!t.sheet.cssRules}catch(n){return c+=1,200>c?setTimeout(function(){o(t)},50):e&&i("css"),void 0}i("css")}function a(){var t,e=h.css;if(e){for(t=d.length;--t>=0;)if(d[t].href===e.urls[0]){i("css");break}c+=1,e&&(200>c?setTimeout(a,50):i("css"))}}var r,l,h={},c=0,u={css:[],js:[]},d=t.styleSheets;return{css:function(t,e,i,n){s("css",t,e,i,n)},js:function(t,e,i,n){s("js",t,e,i,n)}}}(this.document),LoadLib=function(){function t(t){var i=0,n=!1;for(i=0;i<e.length;i++)e[i]==t&&(n=!0);return n?!0:(e.push(t),!1)}var e=[];return{css:function(e,i,n,s){t(e)||LazyLoad.css(e,i,n,s)},js:function(e,i,n,s){t(e)||LazyLoad.js(e,i,n,s)}}}(this.document);var WebFontConfig;if("undefined"==typeof embed_path||"undefined"==typeof embed_path)var embed_path=getEmbedScriptPath("storyjs-embed.js").split("js/")[0];!function(){"object"==typeof url_config?createStoryJS(url_config):"object"==typeof timeline_config?createStoryJS(timeline_config):"object"==typeof storyjs_config?createStoryJS(storyjs_config):"object"==typeof config&&createStoryJS(config)}(),function(){$.ajaxSetup({cache:!0}),Walker.page_init=function(){return Walker.mobile_webapp(),Walker.search_init(),Walker.thumb_scroll(),Walker.show_more(),$(document).pjax("a.pjax","[data-pjax-container]"),$("body").hasClass("artist_page")&&$.support.pjax&&($.pjax.defaults.scrollTo=!1),$(document).on("pjax:timeout",function(){return!1}),$(document).on("pjax:send",function(){return $("#loading").stop(!0,!0).fadeIn(150)}),$(document).on("pjax:complete",function(){return $("body").hasClass("artist_page")&&$("#spacer").css("height",function(){return $(window).height()}),$("#loading").stop(!0,!0).fadeOut(250)}),$(window).scroll(function(){return $(window).scrollTop()<=0?$("header .shadow").stop(!0,!0).fadeOut(150):$("header .shadow").stop(!0,!0).fadeIn(150)}),Walker.browse_preference(),Walker.scopeable_search(),Walker.weather(),Walker.accordion(),Walker.artwork_page_size(),Walker.zoom_sidebar_setup(),Walker.artist_images(),Walker.one_page_nav(),Walker.footnotes(),Walker.infiniteScrollInit()}}.call(this),function(){Walker.state_init=function(){return Walker.navigation(),Walker.masonryInit(),Walker.infiniteScrollInit(),Walker.item_hover(),Walker.mobile_navigation(),Walker.make_mobile_sidebar()}}.call(this),function(){$(document).on("pjax:end",function(){return Walker.state_init()}),$(document).on("pjax:beforeSend",function(){return $("body").removeClass("active"),$("#item_container").infinitescroll("destroy"),$("#item_container").data("infinitescroll",null)})}.call(this);